var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya","$timeout","$ionicPopup",function(t,e,n,a,o,i,r){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.profilePicture=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.StatusBar&&"android"==cordova.platformId&&StatusBar.backgroundColorByHexString("#1C536F"),localStorage.islogin&&l()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){r.confirm({title:"Confirm",template:"Are you sure to logout ?"}).then(function(t){return t?(localStorage.clear(),window.location.hash="#/",n.clearHistory(),a.showBackButton(!1),location.reload(),void 0):!1})};var l=function(){localStorage.profilePicture?e.profilePicture=localStorage.profilePicture:"undefined"==typeof httpclient||o.profilePicture().then(function(t){i(function(){localStorage.profilePicture=t,e.profilePicture=t})},function(){})};e.login?(localStorage.permission||(localStorage.permission=JSON.stringify({examScore:!0,absence:!0,finance:!0})),window.location.hash="/schedule"):window.location.hash="/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,n=localStorage.loginId?JSON.parse(localStorage.loginId):!1;return t(function(t,a){if(localStorage.templogin===!0)t(!0);else{if(n!==!1)return e.api("/","get").then(function(t){200!==t.code&&a(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=n.binusid,o.txtPassword=n.password,o.btnLogin="Log In ",e.api("/","post",o)},a).then(function(){localStorage.templogin=!0,t(!0)},a);a("please login")}})},api:function(e,n,a,o,i){var r=this,l={headers:r.headers()};return"undefined"!=typeof i&&(l.noRedirect=!0),"none"==navigator.connection.type?t(function(t,e){e("No internet connection")}):void 0===localStorage.cookie?r._getCookie().then(function(){return r.api(e,n,a)}):t(function(t,i){"get"===n?httpclient.get(o?e:r._bimay_url+e,function(e){t(e)},function(t){i(t)},l):httpclient.post(o?e:r._bimay_url+e,a,function(e){t(e)},function(t){i(t)},l)})},download:function(e,n){var a=this;return t(function(t,o){return a.api(a._bimay_api_url+"/LMS/"+e,"get",{},!0).then(function(t){var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o[n+".x"]=1,o[n+".y"]=1,a.api(a._bimay_api_url+"/LMS/"+e,"post",o,!0,!0)},o).then(function(t){o(t)},function(e){302==e.code?t(e):o(e)})})},frame:function(e){var n=this,a="";return t(function(t,o){return n.api(e,"get").then(function(t){return n.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return a=$(t.result).find("#ifrApp").attr("src"),n.api(a,"get",{},!0)},o).then(function(e){t({url:a,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,n){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):n(e)},n)})},profilePicture:function(){var e=this;return t(function(t,n){e.checkLogin().then(function(){return e.frame("/")},n).then(function(a){var o=$(a.result.result).find("#ctl00_cpRight_ucPhoto_imgProfilePic").attr("src");httpclient.image(e._bimay_api_url+"/home/"+o,function(e){t("data:image/jpeg;base64,"+e.result.replace(/(\r\n|\n|\r)/gm,""))},n,{headers:e.headers()})},n)})},promptPassword:function(n,a,o){a.promptPass={};var i=localStorage.code;return permission=JSON.parse(localStorage.permission),msgvar=i?"Secret Code":"Binusmaya Password",t(function(t,i){if(1==permission[o]||"undefined"==typeof o)var r=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter "+msgvar,subTitle:"",scope:a,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+n,r.close(),i("back")}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(e){var n=localStorage.code?localStorage.code:JSON.parse(localStorage.loginId).password;return n==a.promptPass.password?(a.promptPass={},a.isAllow=!0,t(!0),!0):(a.promptPass.error=!0,a.promptPass.password="",e.preventDefault(),void 0)}}]});else a.isAllow=!0,t(!0)})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],n="",a=-1,o=0;return t.forEach(function(t){n==t.date?(e[a].data[o]=t,o++):(o=1,a++,n=t.date,e[a]={date:t.date,data:[]},e[a].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,n){var a=!1,o=t.defer(),i="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var r in i)i[r].code==e.code&&(a=r);return a?o.resolve(a):n.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("settings",{url:"/settings",views:{"main-view":{templateUrl:view_path+"settings/index.html"}}}).state("permissions",{url:"/settings/permissions",views:{"main-view":{templateUrl:view_path+"settings/permissions.html",controller:"PermissionController"}}}).state("password",{url:"/settings/password",views:{"main-view":{templateUrl:view_path+"settings/password.html",controller:"PasswordController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("AbsenceController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){(!localStorage.absence||e.length>0)&&(localStorage.absence=JSON.stringify(e),t.absence=e),t.$broadcast("scroll.refreshComplete"),f.hide()})},function(e){m(e),t.$broadcast("scroll.refreshComplete"),f.hide()})};var p=function(){return u(function(t,n){var a=function(t){function e(t){return/baik/.test(t)?"balanced":/warning/.test(t)?"calm":/maximum/.test(t)?"energized":/overlimit/.test(t)?"assertive":void 0}var n=[],a=0;return $(t).find("#rptTable tr").each(function(t){var o=$(this).find("td");t>0&&(o.length>=8?(n[a]={name:o.eq(0).html(),absence:[{max:o.eq(3).html(),total:o.eq(4).html(),component:o.eq(2).text(),status:e(o.eq(5).find("img").attr("src"))}]},a++):n[a-1].absence.push({max:o.eq(2).html(),total:o.eq(3).html(),component:o.eq(1).text(),status:e(o.eq(4).find("img").attr("src"))}))}),n};"undefined"==typeof httpclient?o.get("http://localhost:2505/absence.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return u.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl01_linkMenuStudent").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl02_linkSubMenu").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(e){t(a(e.result))},function(t){n(t)})})};e.promptPassword("services",t,"absence").then(function(){t.absence=!1,"undefined"!=typeof localStorage.absence?t.absence=JSON.parse(localStorage.absence):(f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())});var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScheduleController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){(!localStorage.examSchedule||e.length>0)&&(localStorage.examSchedule=JSON.stringify(e),t.examScheduleList=e),f.hide(),t.$broadcast("scroll.refreshComplete")})},function(e){m(e),f.hide(),t.$broadcast("scroll.refreshComplete")})};var p=function(){return u(function(t,n){var a=function(t){for(var n=[],a=0;a<t.length;a++){var o=$(t[a]).find("table:eq(2) tr td li").text();$(t[a]).find(".tablewithborder tr").each(function(t,e){t>0&&n.push({term:o,code:$(e).find("td").eq(0).text(),name:$(e).find("td").eq(1).text(),sks:$(e).find("td").eq(2).text(),date:$(e).find("td").eq(3).text(),hour:$(e).find("td").eq(4).text(),room:$(e).find("td").eq(5).text(),campus:$(e).find("td").eq(6).text(),className:$(e).find("td").eq(7).text(),seat:parseInt($(e).find("td").eq(8).text())})})}return e.grouping(_.sortBy(n,"date"))},i=[],r="";"undefined"==typeof httpclient?o.get("http://localhost:2505/exam.html").then(function(t){return i.push(t.data),o.get("http://localhost:2505/exam-practicum.html")},n).then(function(e){i.push(e.data),t(a(i))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return u.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl02_linkMenuStudent").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return r=t.result,e.api($(r).find(".itemContentService li:eq(0) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(1) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(2) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(e){i.push(e.result),t(a(i))},function(t){n(t)})})};t.examScheduleList=!1,localStorage.examSchedule?t.examScheduleList=JSON.parse(localStorage.examSchedule):(f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh());var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScoreController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){var p=function(){return u(function(t,n){var a=function(t){var e=[];return $(t).find(".tablebordersmaller tr").each(function(n){n>0&&e.push({term:"Theory Score",year:$(t).find("#ctl00_cpContent_ddlPeriodYear").val(),smester:$(t).find("#ctl00_cpContent_ddlPeriodSemester").val(),name:$(this).find("td").eq(1).text(),data:[[{name:"TM",value:$(this).find("td").eq(5).find("a:first").text()},{name:"MID",value:$(this).find("td").eq(6).find("a:first").text()},{name:"Practicum",value:$(this).find("td").eq(7).find("a:first").text()}],[{name:"SKS",value:$(this).find("td").eq(2).text()},{name:"Final",value:$(this).find("td").eq(8).find("a:first").text()},{name:"Result",value:$(this).find("td").eq(9).find("a:first").text()}]]})}),$(t).find(".tablewithborder tr").each(function(n){n>0&&e.push({term:"Practicum Score",year:$(t).find("#ctl00_cpContent_ddlPeriodYear").val(),smester:$(t).find("#ctl00_cpContent_ddlPeriodSemester").val(),name:$(this).find("td").eq(1).text(),data:[[{name:"MID",value:$(this).find("td").eq(3).find("a:first").text()},{name:"Final",value:$(this).find("td").eq(4).find("a:first").text()},{name:"Project",value:$(this).find("td").eq(5).find("a:first").text()}],[{name:"Project",value:$(this).find("td").eq(6).find("a:first").text()},{name:" ",value:" "},{name:" ",value:" "}]]})}),e};"undefined"==typeof httpclient?o.get("http://localhost:2505/exam-score.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return u.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl03_linkMenuStudent").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl01_linkSubMenu").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(e){t(a(e.result))},function(){n("can't access to main frame")})})};t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){(!localStorage.examScore||e.length>0)&&(localStorage.examScore=JSON.stringify(e),t.examScore=e),f.hide(),t.$broadcast("scroll.refreshComplete")})},function(e){m(e),f.hide(),t.$broadcast("scroll.refreshComplete")})};var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};t.isAllow=!1,e.promptPassword("services",t,"examScore").then(function(){t.examScore=!1,"undefined"!=typeof localStorage.examScore?t.examScore=JSON.parse(localStorage.examScore):s.ready(function(){f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh()})})}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e,n,a,o,i){t.isAllow=!1,t.financeList=!1,t.doRefresh=function(){r().then(function(e){t.$applyAsync(function(){(!localStorage.finance||e.length>0)&&(localStorage.finance=JSON.stringify(e),t.financeList=e),i.hide(),t.$broadcast("scroll.refreshComplete")})},function(e){l(e),i.hide(),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var r=function(){return a(function(t,n){var i=function(t){var n=0;try{n=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(a){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:isNaN(parseInt(e.eq(5).html()))===!0?0:parseInt(e.eq(5).html()),payment:isNaN(parseInt(e.eq(6).html()))===!0?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:isNaN(parseInt(e.eq(7).html()))===!0?0:parseInt(e.eq(7).html())})});var i={data:e.grouping(o),billing:n,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return i};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(i(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return a.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return a.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){return a.reject("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){return a.reject("can't access to main frame")}).then(function(e){t(i(e.result))},function(){n("can't access to main frame")})})},l=function(e){n.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t,"finance").then(function(){localStorage.finance?t.financeList=JSON.parse(localStorage.finance):(i.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())})}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,n,a,o,i,r){i.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",a.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,r.api("/","get").then(function(e){200!==e.code&&n(e);var a={};return $($(e.result).serializeArray()).each(function(t,e){a[e.name]=e.value}),a.txtUserId=t.binusid,a.txtPassword=t.password,a.btnLogin="Log In ",r.api("/","post",a)},function(t){n(t)}).then(function(e){var r=$(e.result).find("#content #topbar .right strong");200!==e.code&&n(e),r.length<=0?n(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=r.text(),i.login=!0,i.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,location.reload(),a.clearHistory(),o.showBackButton(!1))},n);var n=function(n,a){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:a?a:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading","$http",function(t,e,n,a,o,i,r,l,c,s,u,d,f){l.noHeader=!1,l.leftMenu=!0,c.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var p=function(){return s(function(t,n){var a=function(t){var e=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,n){var a=$(n).find("a").html(),o=a.match(/^(.*)-(.*) \((.*)\)/i);e.push({indexItem:t,name:o[2],url:$(n).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(e),e};"undefined"==typeof httpclient?f.get("http://localhost:2505/myclass.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return s.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return s.reject("can't access to main frame")}).then(function(e){t(a(e.result.result))},function(){n("can't access to my class")})})};t.doRefresh=function(){p().then(function(e){t.classData=e,d.hide(),t.$broadcast("scroll.refreshComplete")},function(t){e(t)});var e=function(e){d.hide(),u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}},t.classData||(d.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$http","$ionicScrollDelegate","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset","$timeout","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f,p,c,m){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[p],t.showpage=0,t.linksSetAssigment=[],t.linksSet=[];var h=function(t){return d(function(n,a){var o=function(t){var e=$(t).find("#desc_course_desc > span").html(),n=$(t).find("#desc_grad_compete > span").html(),a=[],o=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&a.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlMainAssignment table tbody tr").each(function(t,e){0!==t&&o.push({term:"Main Assignment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlAdditionalAssignment2 table tbody tr").each(function(t,e){0!==t&&o.push({term:"Additional Assignment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),{main_description:e,grad_description:n,assigment:o.length>0?o:!1,course:a}};"undefined"==typeof httpclient?i.get("http://localhost:2505/myclass-inside.html").then(function(t){n(o(t.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){return d.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return d.reject("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){return d.reject("can't access to my class")}).then(function(t){n(o(t.result))},function(){a("can't access to course page")})})};"undefined"==typeof t.classData[p].detail?h(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),t.$broadcast("scroll.refreshComplete")},g):(t.state.loading=!1,t.state.isData=t.classData[p].detail),t.switchTab=function(e){t.showpage=e,setTimeout(function(){r.resize()},100)};var g=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};t.downloadCourse=function(e,n){t.linksSet[e]={isLoading:!0},v(n).then(function(n){window.open(n,"_system"),t.linksSet[e]={isLoading:!1}},function(){t.linksSet[e]={isLoading:!1}})},t.downloadAssigment=function(e,n){t.linksSetAssigment[e]={isLoading:!0},v(n).then(function(n){window.open(n,"_system"),t.linksSetAssigment[e]={isLoading:!1}},function(){t.linksSetAssigment[e]={isLoading:!1}})};var v=function(n){return d(function(a,o){e.checkLogin().then(function(){return e.api("/","get")},function(){return d.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return d.reject("can't access to main frame")}).then(function(){return e.download(t.classData[p].url,n)},function(){return d.reject("can't access to my class")}).then(function(t){a(t.header.Location)},function(t){o(t)})})};t.refresh=function(){m.show({template:'<ion-spinner icon="android" class="overlay-spinner"></ion-spinner> Loading...'}),h(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),m.hide(),r.resize()},function(t){m.hide(),g(t)})}}]),app.controller("PasswordController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e,n){t.input={},t.change=function(){var e=JSON.parse(localStorage.loginId),a=localStorage.code?localStorage.code:e.password;t.input.oldPassword!==a?n.alert({title:"Oops !",template:"Incorrect Code"}):t.input.newPassword&&t.input.rePassword?t.input.newPassword!==t.input.rePassword?n.alert({title:"Oops !",template:"re code is not same as new code"}):(n.alert({title:"Success !",template:"Code has been changed"}),localStorage.code=t.input.newPassword,t.input={}):n.alert({title:"Oops !",template:"Please Insert new Code"})}}]),app.controller("PermissionController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e){t.isAllow=!1,t.permission=JSON.parse(localStorage.permission),t.change=function(){localStorage.permission=JSON.stringify(t.permission)},e.promptPassword("settings",t).then(function(){})}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s){o.noHeader=!1,o.leftMenu=!0,i.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var n=moment(),a=null;try{var o=e.split("-")[1].split(":"),i=parseInt(o[0]),r=parseInt(o[1]);a=moment(t).hour(i).minute(r)}catch(l){a=moment(t)}return n>a?"completo":void 0},t.isSchedule=!1,t.schedule=[];var u=function(t){var e=[];return $(t).find("tr").each(function(t){var n=$(this).find("td");if(t>0){var a=n.eq(3).html().match(/(.*)-(.*)/);e.push({date:n.eq(0).html(),time:n.eq(1).html(),state:n.eq(2).html(),course:a[2],code:a[1],myClass:n.eq(5).html(),room:n.eq(6).html(),building:n.eq(7).html()})}}),e},d=function(){return l(function(t,e){var n=function(t){var e=$(t).find("table"),n=u(e.eq(0).html()),a=u(e.eq(1).html()),o=n.concat(a),i=r.grouping(o);return(localStorage.jadwal||i.length>0)&&(localStorage.jadwal=JSON.stringify(i)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:i,lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?c.get("http://localhost:2505/schedule.html").then(function(e){t(n(e.data))},e):r.checkLogin().then(function(){return r.api("/","get")},function(){return l.reject("can't re-auth your account")}).then(function(t){return r.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return l.reject("can't access to main frame")}).then(function(t){var e={},n=t.result;return $($(n.result).serializeArray()).each(function(t,n){e[n.name]=n.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",r.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){return l.reject("can't access to schedule page")}).then(function(e){t(n(e.result))},function(t){e(t)})})};if(t.doRefresh=function(){d().then(function(e){s.hide(),t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),t.isSchedule=!0,t.schedule=e.jadwal},function(t){n(t)});var n=function(n){s.hide(),e.alert({title:"Oops !",template:n}),t.$broadcast("scroll.refreshComplete")}},localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(f){}else i.ready(function(){s.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh()})}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvYWJzZW5jZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvZXhhbVNjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9leGFtU2NvcmUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2ZpbmFuY2UuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9teWNsYXNzLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9teWNsYXNzSW5zaWRlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9wYXNzd29yZC5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGVybWlzc2lvbi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2NoZWR1bGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NlcnZpY2VzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxXQUFBLFNBQ0EsT0FBQSxVQUNBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxJQUFBLFFBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxxQkFFQSxLQUFBLGlCQUFBLGFBQUEsZ0JBQUEsdUJBQUEsWUFBQSxXQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsTUFBQSxtQkFBQSxjQUFBLFNBQUEsRUFBQSxhQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxnQkFBQSxFQUNBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLE1BQUEsS0FBQSxhQUFBLE1BQUEsb0JBQ0EsY0FBQSxhQUNBLGNBQUEsVUFFQSxFQUFBLE1BQUEsV0FDQSxFQUFBLGFBQ0EsUUFBQSxHQU9BLE9BQUEsV0FDQSxXQUFBLFFBQUEsWUFDQSxVQUFBLDJCQUFBLFdBR0EsYUFBQSxTQUNBLE1BSUEsRUFBQSxjQUFBLFdBQ0EsRUFBQSxXQUFBLG1CQUFBLGNBQUEsV0FBQSxXQUFBLGFBQUEsWUFFQSxFQUFBLGdCQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsU0FDQSxNQUFBLFVBQ0EsU0FBQSw2QkFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLElBQ0EsYUFBQSxRQUNBLE9BQUEsU0FBQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FDQSxTQUFBLFNBSkEsU0FNQSxJQUtBLElBQUEsR0FBQSxXQUVBLGFBQUEsZUFDQSxFQUFBLGVBQUEsYUFBQSxlQUVBLG1CQUFBLGFBRUEsRUFBQSxpQkFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFdBQ0EsYUFBQSxlQUFBLEVBQ0EsRUFBQSxlQUFBLEtBRUEsY0FRQSxHQUFBLE9BQ0EsYUFBQSxhQUNBLGFBQUEsV0FBQSxLQUFBLFdBQ0EsV0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEtBR0EsT0FBQSxTQUFBLEtBQUEsYUFFQSxPQUFBLFNBQUEsS0FBQSxPQUlBLFFBQUEsdUJBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxjQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsS0N2R0EsU0FBQSxPQUFBLHVCQUVBLFFBQUEsYUFBQSxLQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsT0FFQSxXQUFBLCtCQUNBLGVBQUEsb0NBRUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLFFBQ0EsT0FBQSxhQUFBLE9BQUEsYUFBQSxPQUFBLEtBQ0EsT0FBQSxFQUFBLFdBQ0EsUUFBQSxFQUFBLGFBR0EsV0FBQSxXQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsYUFBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxhQUFBLGFBQUEsRUFDQSxHQUFBLE9BQ0EsQ0FBQSxHQUFBLEtBQUEsRUFHQSxNQUFBLEdBQUEsSUFBQSxJQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsS0FPQSxPQU5BLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxJQUFBLE9BQUEsSUFDQSxHQUNBLEtBQUEsV0FDQSxhQUFBLFdBQUEsRUFDQSxHQUFBLElBQ0EsRUFqQkEsR0FBQSxvQkFxQkEsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FHQSxHQUNBLFFBQUEsRUFBQSxVQUtBLE9BSEEsbUJBQUEsS0FDQSxFQUFBLFlBQUEsR0FFQSxRQUFBLFVBQUEsV0FBQSxLQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSw0QkFFQSxTQUFBLGFBQUEsT0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsSUFDQSxTQUFBLEdBQ0EsRUFBQSxJQUNBLEdBRUEsV0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLElBQ0EsU0FBQSxHQUNBLEVBQUEsSUFDQSxNQU1BLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsZUFBQSxRQUFBLEVBQUEsVUFBQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGVBQUEsUUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLElBQ0EsU0FBQSxHQUNBLEtBQUEsRUFBQSxLQUNBLEVBQUEsR0FFQSxFQUFBLFFBTUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxxQkFBQSxLQUFBLE9BQUEsUUFDQSxHQUNBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLFdBQUEsS0FBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLFVBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQ0EsSUFBQSxFQUNBLE9BQUEsS0FFQSxNQUlBLFdBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsV0FBQSxJQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE1BQ0EsYUFBQSxPQUFBLEVBQUEsT0FBQSxjQUNBLEdBQUEsSUFFQSxFQUFBLElBRUEsTUFHQSxlQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsTUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsd0NBQUEsS0FBQSxNQUNBLFlBQUEsTUFBQSxFQUFBLGVBQUEsU0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLDBCQUFBLEVBQUEsT0FBQSxRQUFBLGlCQUFBLE1BQ0EsR0FFQSxRQUFBLEVBQUEsYUFFQSxNQUdBLGVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLGFBQUEsSUFHQSxPQUZBLFlBQUEsS0FBQSxNQUFBLGFBQUEsWUFDQSxPQUFBLEVBQUEsY0FBQSxxQkFDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxXQUFBLElBQUEsbUJBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLFNBQUEscUlBQ0EsTUFBQSxTQUFBLE9BQ0EsU0FBQSxHQUNBLE1BQUEsRUFDQSxVQUNBLEtBQUEsU0FDQSxNQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsUUFDQSxFQUFBLFdBR0EsS0FBQSxlQUNBLEtBQUEsa0JBQ0EsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLGFBQUEsS0FBQSxhQUFBLEtBQUEsS0FBQSxNQUFBLGFBQUEsU0FBQSxRQUNBLE9BQUEsSUFBQSxFQUFBLFdBQUEsVUFDQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEVBQ0EsR0FBQSxJQUNBLElBRUEsRUFBQSxXQUFBLE9BQUEsRUFDQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsaUJBRkEsaUJBUUEsR0FBQSxTQUFBLEVBQ0EsR0FBQSxNQUlBLGNBQUEsYUFHQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUNBLFFBRUEsSUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxDQWdCQSxPQWZBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUNBLE1BRUEsRUFBQSxFQUNBLElBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxLQUNBLFNBRUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxLQUdBLE9DcE9BLFFBQUEsT0FBQSxnQkFFQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQ0EsTUFBQSxTQUNBLElBQUEsSUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGlCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxnQkFDQSxXQUFBLHlCQUlBLE1BQUEsU0FDQSxJQUFBLFNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsYUFDQSxXQUFBLHNCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxzQkFDQSxXQUFBLHlCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxlQUNBLFdBQUEsd0JBSUEsTUFBQSxpQkFDQSxJQUFBLHdCQUNBLFNBQ0EsU0FBQSxLQUFBLGVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBUUEsT0FMQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxZQUFBLFVBRUEsRUFBQSxXQUdBLE9BQ0EsYUFDQSxZQUFBLFVBQUEscUJBQ0EsV0FBQSw4QkFJQSxNQUFBLGdCQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSw4QkFDQSxXQUFBLDZCQUlBLE1BQUEsYUFDQSxJQUFBLGNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSwyQkFDQSxXQUFBLDBCQUlBLE1BQUEsaUJBQ0EsSUFBQSxrQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxXQUNBLElBQUEsV0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxZQUNBLElBQUEsWUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLDBCQUlBLE1BQUEsZUFDQSxJQUFBLHdCQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsNEJBQ0EsV0FBQSwyQkFJQSxNQUFBLFlBQ0EsSUFBQSxxQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHlCQUNBLFdBQUEseUJBSUEsTUFBQSxVQUNBLElBQUEsVUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGtCQUtBLEVBQUEsVUFBQSxjQzFKQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsYUFDQSxhQUFBLFNBQUEsRUFBQSxPQUFBLEtBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLFVBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsMEJBQ0EsRUFBQSxTQUlBLElBQUEsR0FBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxHQUVBLFFBQUEsR0FBQSxHQUNBLE1BQUEsT0FBQSxLQUFBLEdBQ0EsV0FDQSxVQUFBLEtBQUEsR0FDQSxPQUNBLFVBQUEsS0FBQSxHQUNBLFlBQ0EsWUFBQSxLQUFBLEdBQ0EsWUFEQSxPQVJBLEdBQUEsTUFBQSxFQUFBLENBb0NBLE9BeEJBLEdBQUEsR0FBQSxLQUFBLGdCQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxLQUNBLEdBQUEsSUFDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLElBQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLFVBQ0EsSUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxVQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsT0FBQSxLQUFBLFdBR0EsS0FFQSxFQUFBLEVBQUEsR0FBQSxRQUFBLE1BQ0EsSUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxVQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsT0FBQSxLQUFBLGFBS0EsRUFFQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSxzQ0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2REFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxpREFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxTQUFBLEdBQ0EsRUFBQSxPQU1BLEdBQUEsZUFBQSxXQUFBLEVBQUEsV0FDQSxLQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQ0EsbUJBQUEsY0FBQSxRQUNBLEVBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxVQUVBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLGNBSUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsOEJDM0hBLElBQUEsV0FBQSwwQkFDQSxTQUFBLFlBQUEsdUJBQUEsU0FBQSxRQUFBLFlBQUEsZUFBQSxXQUFBLGFBQUEsaUJBQUEsS0FBQSxjQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsV0FDQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxhQUNBLGFBQUEsY0FBQSxFQUFBLE9BQUEsS0FFQSxhQUFBLGFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFBQSxpQkFBQSxHQUVBLEVBQUEsT0FDQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDRCQUlBLElBQUEsR0FBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsd0JBQUEsTUFDQSxHQUFBLEVBQUEsSUFBQSxLQUFBLHVCQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxJQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLFVBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsWUFLQSxNQUFBLEdBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxVQUVBLEtBQ0EsRUFBQSxFQUNBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLG1DQUNBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsOENBQ0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxLQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2REFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsT0FDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsS0FBQSxRQUFBLFVBQUEsSUFDQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsS0FBQSxRQUFBLFVBQUEsSUFDQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsS0FBQSxRQUFBLFVBQUEsSUFDQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEtBQ0EsU0FBQSxHQUNBLEVBQUEsT0FNQSxHQUFBLGtCQUFBLEVBQ0EsYUFBQSxhQUNBLEVBQUEsaUJBQUEsS0FBQSxNQUFBLGFBQUEsZUFFQSxFQUFBLE1BQUEsWUFBQSw0QkFBQSxZQUFBLElBQ0EsRUFBQSxZQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDhCQzVIQSxJQUFBLFdBQUEsdUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxLQWdFQSxPQS9EQSxHQUFBLEdBQUEsS0FBQSwwQkFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsZUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLGtDQUFBLE1BQ0EsUUFBQSxFQUFBLEdBQUEsS0FBQSxzQ0FBQSxNQUNBLEtBQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxRQUVBLEtBQUEsS0FDQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsV0FBQSxTQUVBLEtBQUEsTUFDQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsV0FBQSxTQUVBLEtBQUEsWUFDQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsV0FBQSxXQUVBLEtBQUEsTUFDQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLFNBRUEsS0FBQSxRQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxTQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLGNBT0EsRUFBQSxHQUFBLEtBQUEsdUJBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLGtCQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsTUFDQSxRQUFBLEVBQUEsR0FBQSxLQUFBLHNDQUFBLE1BQ0EsS0FBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLFFBRUEsS0FBQSxNQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxRQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxVQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFdBRUEsS0FBQSxVQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxJQUNBLE1BQUEsTUFFQSxLQUFBLElBQ0EsTUFBQSxXQU1BLEVBRUEsb0JBQUEsWUFDQSxFQUFBLElBQUEseUNBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsTUFBQSxHQUFBLE9BQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsNkRBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaURBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsV0FDQSxFQUFBLGtDQU1BLEdBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLGFBQ0EsYUFBQSxXQUFBLEVBQUEsT0FBQSxLQUNBLGFBQUEsVUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLFVBQUEsR0FFQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDZCQUdBLFNBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsV0FBQSw0QkFJQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwwQkFHQSxHQUFBLFNBQUEsRUFDQSxFQUFBLGVBQUEsV0FBQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLEVBQUEsV0FBQSxFQUNBLG1CQUFBLGNBQUEsVUFDQSxFQUFBLFVBQUEsS0FBQSxNQUFBLGFBQUEsV0FFQSxFQUFBLE1BQUEsV0FDQSxFQUFBLE1BQUEsWUFBQSw0QkFBQSxZQUFBLElBQ0EsRUFBQSxtQkNySkEsSUFBQSxXQUFBLHFCQUNBLFNBQUEsWUFBQSxjQUFBLEtBQUEsUUFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsYUFBQSxFQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLGFBQ0EsYUFBQSxTQUFBLEVBQUEsT0FBQSxLQUNBLGFBQUEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLFlBQUEsR0FFQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDZCQUVBLFNBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsV0FBQSw2QkFHQSxFQUFBLFFBQUEsU0FBQSxHQUNBLElBQ0EsTUFBQSxHQUFBLFFBQUEsR0FBQSxRQUFBLHNCQUFBLE9BQ0EsTUFBQSxHQUNBLE1BQUEsSUFJQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxLQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxxQkFBQSxPQUFBLE1BQUEsVUFBQSxJQUNBLE1BQUEsSUFDQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEtBQUEscUJBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEtBQ0EsR0FBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxJQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxNQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxRQUNBLFFBQUEsTUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsT0FBQSxNQUFBLFdBQ0EsT0FBQSxNQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxXQUlBLElBQUEsSUFDQSxLQUFBLEVBQUEsU0FBQSxHQUNBLFFBQUEsRUFDQSxXQUFBLFNBQUEsT0FBQSx1QkFHQSxPQUFBLEdBR0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsc0NBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsTUFBQSxHQUFBLE9BQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsNkRBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaURBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsV0FDQSxFQUFBLG1DQU1BLEVBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwwQkFHQSxHQUFBLGVBQUEsV0FBQSxFQUFBLFdBQ0EsS0FBQSxXQUNBLGFBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxNQUFBLGFBQUEsVUFFQSxFQUFBLE1BQUEsWUFBQSw0QkFBQSxZQUFBLElBQ0EsRUFBQSxrQkM3SEEsSUFBQSxXQUFBLG1CQUNBLFNBQUEsY0FBQSxXQUFBLGdCQUFBLHVCQUFBLGFBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEdBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBRUEsRUFBQSxpQkFDQSxhQUFBLElBR0EsRUFBQSxPQUFBLFdBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxTQUtBLENBQ0EsRUFBQSxXQUFBLGFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLFNBQUEsR0FDQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaUNBRUEsT0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGFBQUEsU0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FNQSxhQUFBLFFBQUEsS0FBQSxXQUNBLFFBQUEsRUFBQSxRQUNBLFNBQUEsRUFBQSxXQUdBLGFBQUEsU0FBQSxFQUNBLGFBQUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxVQUFBLGFBQUEsTUFBQSxjQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLFNBQUEsU0FDQSxFQUFBLGVBQ0EsRUFBQSxnQkFBQSxLQUdBLEVBRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxFQUFBLEVBQUEsMkJBNURBLEdBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSw4Q0NiQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsWUFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsZ0JBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxxQkFBQSxTQUFBLEdBQ0EsRUFBQSxtQkFHQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FFQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEtBYUEsT0FaQSxHQUFBLEdBQUEsS0FBQSw2Q0FBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsdUJBQ0EsR0FBQSxNQUNBLFVBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQSxRQUNBLEtBQUEsRUFBQSxHQUNBLFVBQUEsRUFBQSxPQUdBLGFBQUEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUdBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHNDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLE1BQUEsR0FBQSxPQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxVQUNBLFdBQ0EsRUFBQSxnQ0FNQSxHQUFBLFVBQUEsV0FDQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsT0FDQSxFQUFBLFdBQUEsMkJBQ0EsU0FBQSxHQUNBLEVBQUEsSUFHQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsNEJBSUEsRUFBQSxZQUNBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLGdCQ2pGQSxJQUFBLFdBQUEsMkJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsWUFBQSxRQUFBLHVCQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxVQUFBLFdBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLFFBQUEsS0FBQSxNQUFBLGFBQUEsVUFBQSxFQUNBLEVBQUEsT0FDQSxRQUFBLEVBQ0EsU0FBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLFVBQUEsR0FDQSxFQUFBLFNBQUEsRUFFQSxFQUFBLHFCQUNBLEVBQUEsV0FFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSw0QkFBQSxPQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsNkJBQUEsT0FDQSxLQUNBLElBMkNBLE9BMUNBLEdBQUEsR0FBQSxLQUFBLDhEQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUNBLEVBQUEsTUFDQSxRQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsbUJBQUEsUUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxnQkFBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsbUJBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxLQUFBLG9CQUFBLEtBQUEsWUFJQSxFQUFBLEdBQUEsS0FBQSwrREFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxrQkFDQSxRQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsUUFDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsUUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLGVBQUEsS0FBQSxZQUlBLEVBQUEsR0FBQSxLQUFBLHNFQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLHdCQUNBLFFBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxRQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLFNBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsT0FBQSxRQUFBLEdBQUEsRUFDQSxRQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsT0FBQSxRQUFBLEdBQUEsRUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLEtBQUEsZUFBQSxLQUFBLGFBTUEsaUJBQUEsRUFDQSxpQkFBQSxFQUNBLFVBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUNBLE9BQUEsR0FJQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSw2Q0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxlQUFBLFFBQUEsRUFBQSxVQUFBLElBQ0EsV0FDQSxNQUFBLEdBQUEsT0FBQSw4QkFFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFdBQ0EsRUFBQSxtQ0FNQSxvQkFBQSxHQUFBLFVBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxVQUFBLEdBQUEsS0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxPQUFBLEVBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsR0FBQSxTQUVBLEVBQUEsV0FBQSwyQkFDQSxJQUVBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxVQUFBLEdBQUEsUUFHQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLFdBQUEsV0FDQSxFQUFBLFVBQ0EsS0FHQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwwQkFHQSxHQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLElBQUEsV0FBQSxHQUNBLEVBQUEsR0FDQSxLQUFBLFNBQUEsR0FDQSxPQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsU0FBQSxJQUFBLFdBQUEsSUFDQSxXQUNBLEVBQUEsU0FBQSxJQUFBLFdBQUEsTUFJQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsa0JBQUEsSUFBQSxXQUFBLEdBQ0EsRUFBQSxHQUNBLEtBQUEsU0FBQSxHQUNBLE9BQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxrQkFBQSxJQUFBLFdBQUEsSUFDQSxXQUNBLEVBQUEsa0JBQUEsSUFBQSxXQUFBLEtBS0EsSUFBQSxHQUFBLFNBQUEsR0FFQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLFVBQUEsR0FBQSxJQUFBLElBQ0EsV0FDQSxNQUFBLEdBQUEsT0FBQSw4QkFFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxXQUNBLFNBQUEsR0FDQSxFQUFBLE9BS0EsR0FBQSxRQUFBLFdBRUEsRUFBQSxNQUFBLFNBQUEsa0ZBRUEsRUFBQSxFQUFBLFVBQUEsR0FBQSxLQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsVUFBQSxHQUFBLE9BQUEsRUFDQSxhQUFBLFFBQUEsS0FBQSxVQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsV0FDQSxFQUFBLE1BQUEsU0FBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsVUFBQSxHQUFBLFNBRUEsRUFBQSxPQUNBLEVBQUEsVUFDQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsU0NoTkEsSUFBQSxXQUFBLHNCQUNBLFNBQUEsWUFBQSxjQUFBLEtBQUEsUUFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FFQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxNQUFBLGFBQUEsU0FDQSxFQUFBLGFBQUEsS0FBQSxhQUFBLEtBQUEsRUFBQSxRQUVBLEdBQUEsTUFBQSxjQUFBLEVBQ0EsRUFBQSxPQUFBLE1BQUEsU0FBQSxTQUFBLG1CQUNBLEVBQUEsTUFBQSxhQUFBLEVBQUEsTUFBQSxXQUVBLEVBQUEsTUFBQSxjQUFBLEVBQUEsTUFBQSxXQUNBLEVBQUEsT0FBQSxNQUFBLFNBQUEsU0FBQSxxQ0FFQSxFQUFBLE9BQUEsTUFBQSxZQUFBLFNBQUEsMEJBQ0EsYUFBQSxLQUFBLEVBQUEsTUFBQSxZQUNBLEVBQUEsVUFOQSxFQUFBLE9BQUEsTUFBQSxTQUFBLFNBQUEsK0JDWkEsSUFBQSxXQUFBLHdCQUNBLFNBQUEsWUFBQSxjQUFBLEtBQUEsUUFBQSxnQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsS0FBQSxNQUFBLGFBQUEsWUFFQSxFQUFBLE9BQUEsV0FDQSxhQUFBLFdBQUEsS0FBQSxVQUFBLEVBQUEsYUFHQSxFQUFBLGVBQUEsV0FBQSxHQUNBLEtBQUEsaUJDVkEsSUFBQSxXQUFBLHNCQUNBLFNBQUEsY0FBQSxXQUFBLGdCQUFBLGFBQUEsaUJBQUEsWUFBQSxLQUFBLFFBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsbUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFFQSxPQUFBLFFBQUEsR0FBQSxPQUFBLEVBQUEsT0FDQSxRQUdBLE9BQUEsR0FBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsT0FDQSxXQUdBLE9BQUEsR0FBQSxFQUNBLFdBREEsUUFLQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQ0EsRUFBQSxJQUNBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSxLQUNBLEVBQUEsU0FBQSxFQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLE9BQUEsR0FBQSxLQUFBLEdBQUEsT0FBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLE9BQUEsR0FHQSxNQUFBLEdBQUEsRUFDQSxXQURBLFFBS0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxXQUVBLElBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxLQWlCQSxPQWhCQSxHQUFBLEdBQUEsS0FBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxLQUNBLElBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLE9BQUEsTUFBQSxZQUNBLEdBQUEsTUFDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsR0FDQSxRQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFJQSxHQUdBLEVBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEVBS0EsUUFKQSxhQUFBLFFBQUEsRUFBQSxPQUFBLEtBQ0EsYUFBQSxPQUFBLEtBQUEsVUFBQSxJQUVBLGFBQUEsV0FBQSxTQUFBLE9BQUEsd0JBRUEsT0FBQSxFQUFBLFdBQUEsYUFBQSxZQUlBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHVDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLE1BQUEsR0FBQSxPQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxNQUNBLEVBQUEsRUFBQSxNQUtBLE9BSkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLGNBQUEsd0NBQ0EsRUFBQSxJQUFBLGVBQUEsb0JBQUEsT0FBQSxHQUFBLElBQ0EsV0FDQSxNQUFBLEdBQUEsT0FBQSxtQ0FFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFNBQUEsR0FDQSxFQUFBLE9BNEJBLElBdEJBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLGdCQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsU0FBQSxHQUNBLEVBQUEsSUFHQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsNEJBSUEsYUFBQSxPQUNBLElBQ0EsS0FBQSxNQUFBLGFBQUEsUUFBQSxPQUFBLElBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxhQUFBLFNBRUEsTUFBQSxRQUlBLEdBQUEsTUFBQSxXQUNBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLGlCQy9KQSxJQUFBLFdBQUEsc0JBQUEsU0FBQSxZQUFBLHVCQUNBIiwiZmlsZSI6Ind3dy9qcy9jb21waWxlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQklOVVNNQVlBIE1PRFVMRVxuICogQGF1dGhvciBQZWRveCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5cblxuLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdzdGFydGVyJyBpcyB0aGUgbmFtZSBvZiB0aGlzIGFuZ3VsYXIgbW9kdWxlIGV4YW1wbGUgKGFsc28gc2V0IGluIGEgPGJvZHk+IGF0dHJpYnV0ZSBpbiBpbmRleC5odG1sKVxuLy8gdGhlIDJuZCBwYXJhbWV0ZXIgaXMgYW4gYXJyYXkgb2YgJ3JlcXVpcmVzJ1xuXG52YXIgdmlld19wYXRoID0gJ3ZpZXdzLycsXG4gIHBjb2xvciA9ICcjMUM1MzZGJyxcbiAgX2JpbWF5X3VybCA9ICdodHRwOi8vYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcbiAgX2JpbWF5X2FwaV91cmwgPSAnaHR0cDovL2FwcHMuYmludXNtYXlhLmJpbnVzLmFjLmlkJztcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdCaW51c01heWEnLCBbJ2lvbmljJywgJ2xpc3RSb3V0ZScsICdCaW51c01heWFGYWN0b3J5J10pXG5cbi5ydW4oZnVuY3Rpb24oJGlvbmljUGxhdGZvcm0sICRyb290U2NvcGUsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCBCaW51c01heWEsICR0aW1lb3V0LCAkaW9uaWNQb3B1cCkge1xuXG4gICRyb290U2NvcGUubG9naW4gPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5pc2xvZ2luID09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IGxvY2FsU3RvcmFnZS5pc2xvZ2luKTtcbiAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IGZhbHNlO1xuICAkcm9vdFNjb3BlLnByb2ZpbGVQaWN0dXJlID0gZmFsc2U7XG4gICRyb290U2NvcGUubG9naW5OYW1lID0gdHlwZW9mIGxvY2FsU3RvcmFnZS5mbmFtZSA9PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICBkZWxldGUgbG9jYWxTdG9yYWdlLmNvb2tpZTtcbiAgZGVsZXRlIGxvY2FsU3RvcmFnZS50ZW1wbG9naW47XG5cbiAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJHJvb3RTY29wZS5vbkxvYWRTdHlsZSA9IHtcbiAgICAgIG9wYWNpdHk6IDFcbiAgICB9O1xuICAgIC8vIEhpZGUgdGhlIGFjY2Vzc29yeSBiYXIgYnkgZGVmYXVsdCAocmVtb3ZlIHRoaXMgdG8gc2hvdyB0aGUgYWNjZXNzb3J5IGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAvLyBmb3IgZm9ybSBpbnB1dHMpXG4gICAgLyppZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcih0cnVlKTtcbiAgICB9Ki9cbiAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgaWYgKGNvcmRvdmEucGxhdGZvcm1JZCA9PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgU3RhdHVzQmFyLmJhY2tncm91bmRDb2xvckJ5SGV4U3RyaW5nKFwiIzFDNTM2RlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYobG9jYWxTdG9yYWdlLmlzbG9naW4pIHtcbiAgICAgIGdldFByb2ZpbGVJbWFnZSgpOyAgXG4gICAgfVxuICB9KTtcblxuICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAkcm9vdFNjb3BlLmxhc3RVcGRhdGUgPSB0eXBlb2YgbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGUgPT09IFwidW5kZWZpbmVkXCIgPyBcIldoYXRldmVyXCIgOiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZTtcbiAgfTtcbiAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlKCk7XG4gICRyb290U2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgJGlvbmljUG9wdXAuY29uZmlybSh7XG4gICAgICB0aXRsZTogJ0NvbmZpcm0nLFxuICAgICAgdGVtcGxhdGU6ICdBcmUgeW91IHN1cmUgdG8gbG9nb3V0ID8nLFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZihyZXMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvJztcbiAgICAgICAgJGlvbmljSGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgJGlvbmljTmF2QmFyRGVsZWdhdGUuc2hvd0JhY2tCdXR0b24oZmFsc2UpO1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ2V0UHJvZmlsZUltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgLyoqIHBlZm9ybSBhdmF0YXIgKiovXG4gICAgaWYobG9jYWxTdG9yYWdlLnByb2ZpbGVQaWN0dXJlKSB7XG4gICAgICAkcm9vdFNjb3BlLnByb2ZpbGVQaWN0dXJlID0gbG9jYWxTdG9yYWdlLnByb2ZpbGVQaWN0dXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEJpbnVzTWF5YS5wcm9maWxlUGljdHVyZSgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnByb2ZpbGVQaWN0dXJlID0gZG9uZTtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS5wcm9maWxlUGljdHVyZSA9IGRvbmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgXG5cbiAgaWYgKCRyb290U2NvcGUubG9naW4pIHtcbiAgICBpZighbG9jYWxTdG9yYWdlLnBlcm1pc3Npb24pIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5wZXJtaXNzaW9uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBleGFtU2NvcmU6IHRydWUsXG4gICAgICAgIGFic2VuY2U6IHRydWUsXG4gICAgICAgIGZpbmFuY2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcvc2NoZWR1bGUnO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJy8nO1xuICB9XG59KVxuXG4uY29uZmlnKGZ1bmN0aW9uKCRpb25pY0NvbmZpZ1Byb3ZpZGVyKSB7XG4gICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnZpZXdzLmZvcndhcmRDYWNoZShmYWxzZSk7XG4gICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnZpZXdzLm1heENhY2hlKDApO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQmludXNNYXlhRmFjdG9yeScsIFtdKVxuXG4uZmFjdG9yeSgnQmludXNNYXlhJywgZnVuY3Rpb24oJHEsICRpb25pY1BvcHVwKSB7XG4gIHJldHVybiB7XG5cbiAgICBfYmltYXlfdXJsOiAnaHR0cDovL2JpbnVzbWF5YS5iaW51cy5hYy5pZCcsXG4gICAgX2JpbWF5X2FwaV91cmw6ICdodHRwOi8vYXBwcy5iaW51c21heWEuYmludXMuYWMuaWQnLFxuXG4gICAgaGVhZGVyczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgQ29va2llOiBsb2NhbFN0b3JhZ2UuY29va2llID8gbG9jYWxTdG9yYWdlLmNvb2tpZSA6IG51bGwsXG4gICAgICAgIE9yaWdpbjogX3QuX2JpbWF5X3VybCxcbiAgICAgICAgUmVmZXJlcjogX3QuX2JpbWF5X3VybFxuICAgICAgfTtcbiAgICB9LFxuICAgIGNoZWNrTG9naW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHZhciBsb2dpbiA9IGxvY2FsU3RvcmFnZS5sb2dpbklkID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCkgOiBmYWxzZTtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS50ZW1wbG9naW4gPT09IHRydWUpIHtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYobG9naW4gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmVqZWN0KFwicGxlYXNlIGxvZ2luXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBfdC5hcGkoJy8nLCAnZ2V0JylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgaWYgKGQuY29kZSAhPT0gMjAwKSByZWplY3QoZCk7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtkLm5hbWVdID0gZC52YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEudHh0VXNlcklkID0gbG9naW4uYmludXNpZDtcbiAgICAgICAgICAgICAgZGF0YS50eHRQYXNzd29yZCA9IGxvZ2luLnBhc3N3b3JkO1xuICAgICAgICAgICAgICBkYXRhLmJ0bkxvZ2luID0gXCJMb2cgSW4gXCI7XG4gICAgICAgICAgICAgIHJldHVybiBfdC5hcGkoJy8nLCAncG9zdCcsIGRhdGEpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudGVtcGxvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXBpOiBmdW5jdGlvbihlbmRwb2ludCwgbWV0aG9kLCBwYXJhbXMsIG5vRW5kcG9pbnQsIG5vUmVkaXJlY3QpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICAvKmpzaGludCAtVzAzMCAqL1xuICAgICAgdHlwZW9mIG5vRW5kcG9pbnQgIT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IHRydWU7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgaGVhZGVyczogX3QuaGVhZGVycygpLFxuICAgICAgfTtcbiAgICAgIGlmKHR5cGVvZiBub1JlZGlyZWN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIG9wdGlvbnMubm9SZWRpcmVjdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZihuYXZpZ2F0b3IuY29ubmVjdGlvbi50eXBlID09IFwibm9uZVwiKSB7XG4gICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZWplY3QoXCJObyBpbnRlcm5ldCBjb25uZWN0aW9uXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLmNvb2tpZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBfdC5fZ2V0Q29va2llKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoZW5kcG9pbnQsIG1ldGhvZCwgcGFyYW1zKTtcbiAgICAgICAgICB9KTsgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJnZXRcIikge1xuICAgICAgICAgICAgaHR0cGNsaWVudC5nZXQoKG5vRW5kcG9pbnQgPyBlbmRwb2ludCA6IF90Ll9iaW1heV91cmwgKyBlbmRwb2ludCksIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShkKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBjbGllbnQucG9zdCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgcGFyYW1zLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoZCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRvd25sb2FkOiBmdW5jdGlvbih1cmwsIGZvcm1OYW1lKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gX3QuYXBpKF90Ll9iaW1heV9hcGlfdXJsICsnL0xNUy8nKyB1cmwsICdnZXQnLCB7fSwgdHJ1ZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGUpIHtcbiAgICAgICAgICAgIGRhdGFbZS5uYW1lXSA9IGUudmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YVtmb3JtTmFtZSsnLngnXSA9IDE7XG4gICAgICAgICAgZGF0YVtmb3JtTmFtZSsnLnknXSA9IDE7XG4gICAgICAgICAgcmV0dXJuIF90LmFwaShfdC5fYmltYXlfYXBpX3VybCArJy9MTVMvJysgdXJsLCAncG9zdCcsIGRhdGEsIHRydWUsIHRydWUpO1xuICAgICAgICB9LCByZWplY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZWplY3QoZCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICBpZihkLmNvZGUgPT0gMzAyKSB7XG4gICAgICAgICAgICByZXNvbHZlKGQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBmcmFtZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzLFxuICAgICAgICBfdXJsID0gJyc7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiBfdC5hcGkodXJsLCAnZ2V0JylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKCQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3AxX2lmckFwcFwiKS5hdHRyKFwic3JjXCIpLCAnZ2V0Jyk7XG4gICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIF91cmwgPSAkKGQucmVzdWx0KS5maW5kKFwiI2lmckFwcFwiKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaShfdXJsLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgdXJsOiBfdXJsLFxuICAgICAgICAgICAgICByZXN1bHQ6IGRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgX2dldENvb2tpZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBodHRwY2xpZW50LmdldChfdC5fYmltYXlfdXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jb29raWUgPSBkYXRhLmhlYWRlclsnU2V0LUNvb2tpZSddO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcHJvZmlsZVBpY3R1cmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgX3QuY2hlY2tMb2dpbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfdC5mcmFtZSgnLycpO1xuICAgICAgICB9LCByZWplY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgdmFyIHVybCA9ICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwUmlnaHRfdWNQaG90b19pbWdQcm9maWxlUGljXCIpLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgaHR0cGNsaWVudC5pbWFnZShfdC5fYmltYXlfYXBpX3VybCArIFwiL2hvbWUvXCIgKyB1cmwsIGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICByZXNvbHZlKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBkLnJlc3VsdC5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLFwiXCIpKTtcbiAgICAgICAgICB9LCByZWplY3QsIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IF90LmhlYWRlcnMoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwcm9tcHRQYXNzd29yZDogZnVuY3Rpb24obG9jYXRpb24sIHNjb3BlLCBwZXJtaXNzaW9uS2V5KSB7XG4gICAgICBzY29wZS5wcm9tcHRQYXNzID0ge307XG4gICAgICB2YXIgY29kZSA9IGxvY2FsU3RvcmFnZS5jb2RlXG4gICAgICAgICAgcGVybWlzc2lvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnBlcm1pc3Npb24pLFxuICAgICAgICAgIG1zZ3ZhciA9IGNvZGUgPyAnU2VjcmV0IENvZGUnIDogJ0JpbnVzbWF5YSBQYXNzd29yZCc7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmKHBlcm1pc3Npb25bcGVybWlzc2lvbktleV0gPT0gdHJ1ZSB8fCB0eXBlb2YgcGVybWlzc2lvbktleSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHZhciBteVBvcHVwID0gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxwIG5nLXNob3c9XCJwcm9tcHRQYXNzLmVycm9yXCI+SW5jb3JyZWN0IFBhc3N3b3JkPC9wPjxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cInByb21wdFBhc3MtZm9ybVwiIG5nLW1vZGVsPVwicHJvbXB0UGFzcy5wYXNzd29yZFwiPicsXG4gICAgICAgICAgICB0aXRsZTogJ0VudGVyICcgKyBtc2d2YXIsXG4gICAgICAgICAgICBzdWJUaXRsZTogJycsXG4gICAgICAgICAgICBzY29wZTogc2NvcGUsXG4gICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjLycgKyBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICBteVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdiYWNrJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgdGV4dDogJzxiPkVudGVyPC9iPicsXG4gICAgICAgICAgICAgIHR5cGU6ICdidXR0b24tcG9zaXRpdmUnLFxuICAgICAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBteXBhc3MgPSBsb2NhbFN0b3JhZ2UuY29kZSA/IGxvY2FsU3RvcmFnZS5jb2RlIDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCkucGFzc3dvcmQ7XG4gICAgICAgICAgICAgICAgaWYgKG15cGFzcyA9PSBzY29wZS5wcm9tcHRQYXNzLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzID0ge307XG4gICAgICAgICAgICAgICAgICBzY29wZS5pc0FsbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcy5lcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzLnBhc3N3b3JkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NvcGUuaXNBbGxvdyA9IHRydWU7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBfcmVxdWVzdEVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICB9LFxuICAgIGdyb3VwaW5nOiBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgaWYgKF9kYXRhLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBtID0gW10sXG4gICAgICAgIHAgPSAnJyxcbiAgICAgICAgYyA9IC0xLFxuICAgICAgICBjaCA9IDA7XG4gICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgaWYgKHAgPT0gZC5kYXRlKSB7XG4gICAgICAgICAgbVtjXS5kYXRhW2NoXSA9IGQ7XG4gICAgICAgICAgY2grKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaCA9IDE7XG4gICAgICAgICAgYysrO1xuICAgICAgICAgIHAgPSBkLmRhdGU7XG4gICAgICAgICAgbVtjXSA9IHtcbiAgICAgICAgICAgIGRhdGU6IGQuZGF0ZSxcbiAgICAgICAgICAgIGRhdGE6IFtdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBtW2NdLmRhdGFbMF0gPSBkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtO1xuICAgIH1cbiAgfTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdsaXN0Um91dGUnLCBbXSlcblxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ2luZGV4Jywge1xuICAgICAgdXJsOiAnLycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbG9naW4uaHRtbCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdzY2hlZHVsZScsIHtcbiAgICAgIHVybDogJy9zY2hlZHVsZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2NoZWR1bGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1NjaGVkdWxlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhYm91dCcsIHtcbiAgICAgIHVybDogJy9hYm91dCcsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnYWJvdXQuaHRtbCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdmb3J1bScsIHtcbiAgICAgIHVybDogJy9mb3J1bScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnZm9ydW0uaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0ZvcnVtQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdzZXJ2aWNlcycsIHtcbiAgICAgIHVybDogJy9zZXJ2aWNlcycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvaW5kZXguaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1NlcnZpY2VzQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdteWNsYXNzJywge1xuICAgICAgdXJsOiAnL215Y2xhc3MnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ215Y2xhc3MuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ015Q2xhc3NDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ215Y2xhc3NEZXRhaWwnLCB7XG4gICAgICB1cmw6ICcvbXljbGFzcy1kZXRhaWwvOmNvZGUnLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBkYXRhc2V0OiBmdW5jdGlvbigkcSwgJHN0YXRlUGFyYW1zLCAkbG9jYXRpb24pIHtcbiAgICAgICAgICB2YXIgX2dvdCA9IGZhbHNlO1xuICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgdmFyIGNsYXNzRGF0YSA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLm15Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5teUNsYXNzKSA6IGZhbHNlKTtcbiAgICAgICAgICBmb3IgKHZhciBkIGluIGNsYXNzRGF0YSkge1xuICAgICAgICAgICAgaWYgKGNsYXNzRGF0YVtkXS5jb2RlID09ICRzdGF0ZVBhcmFtcy5jb2RlKSB7XG4gICAgICAgICAgICAgIF9nb3QgPSBkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX2dvdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfZ290KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9teWNsYXNzJykucmVwbGFjZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdteWNsYXNzSW5zaWRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUNsYXNzRGV0YWlsQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdleGFtU2NoZWR1bGUnLCB7XG4gICAgICB1cmw6ICcvZXhhbS1zY2hlZHVsZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvZXhhbS1zY2hlZHVsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRXhhbVNjaGVkdWxlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdleGFtU2NvcmUnLCB7XG4gICAgICB1cmw6ICcvZXhhbS1zY29yZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvZXhhbS1zY29yZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRXhhbVNjb3JlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdmaW5hbmNlU3RhdHVzJywge1xuICAgICAgdXJsOiAnL2ZpbmFuY2Utc3RhdHVzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9iaWxsaW5nLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdGaW5hbmNlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhYnNlbmNlJywge1xuICAgICAgdXJsOiAnL2Fic2VuY2UnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2Fic2VuY2UuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0Fic2VuY2VDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NldHRpbmdzJywge1xuICAgICAgdXJsOiAnL3NldHRpbmdzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXR0aW5ncy9pbmRleC5odG1sJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdwZXJtaXNzaW9ucycsIHtcbiAgICAgIHVybDogJy9zZXR0aW5ncy9wZXJtaXNzaW9ucycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2V0dGluZ3MvcGVybWlzc2lvbnMuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1Blcm1pc3Npb25Db250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3Bhc3N3b3JkJywge1xuICAgICAgdXJsOiAnL3NldHRpbmdzL3Bhc3N3b3JkJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXR0aW5ncy9wYXNzd29yZC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3dvcmRDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2NvbWluZycsIHtcbiAgICAgIHVybDogJy9jb21pbmcnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ2NvbWluZy5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9jb21pbmdcIik7XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcignQWJzZW5jZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGh0dHAsICRsb2NhdGlvbixcbiAgICAkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkaW9uaWNQbGF0Zm9ybSwgJHEsICRpb25pY1BvcHVwLCAkaW9uaWNMb2FkaW5nKSB7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoQWJzZW5jZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIWxvY2FsU3RvcmFnZS5hYnNlbmNlIHx8IGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYWJzZW5jZSA9IEpTT04uc3RyaW5naWZ5KGRvbmUpO1xuICAgICAgICAgICAgICAkc2NvcGUuYWJzZW5jZSA9IGRvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaEFic2VuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBfZGF0YSA9IFtdLCBjb3VudCA9IDA7XG4gICAgICAgICAgZnVuY3Rpb24gZ2V0U3RhdHVzKHN0cikge1xuXHRcdFx0XHRcdFx0aWYoL2JhaWsvLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2JhbGFuY2VkJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZigvd2FybmluZy8udGVzdChzdHIpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAnY2FsbSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoL21heGltdW0vLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2VuZXJnaXplZCc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoL292ZXJsaW1pdC8udGVzdChzdHIpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAnYXNzZXJ0aXZlJztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG4gICAgICAgICAgJChkYXRhKS5maW5kKCcjcnB0VGFibGUgdHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgICAgIHZhciBodCA9ICQodGhpcykuZmluZCgndGQnKTtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICBpZiAoaHQubGVuZ3RoID49IDgpIHtcbiAgICAgICAgICAgICAgICBfZGF0YVtjb3VudF0gPSB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBodC5lcSgwKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICBhYnNlbmNlOiBbe1xuICAgICAgICAgICAgICAgICAgICBtYXg6IGh0LmVxKDMpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IGh0LmVxKDQpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBodC5lcSgyKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogZ2V0U3RhdHVzKGh0LmVxKDUpLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSlcbiAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9kYXRhW2NvdW50IC0gMV0uYWJzZW5jZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG1heDogaHQuZXEoMikuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgdG90YWw6IGh0LmVxKDMpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogaHQuZXEoMSkudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgc3RhdHVzOiBnZXRTdGF0dXMoaHQuZXEoNCkuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIpKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIF9kYXRhO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9hYnNlbmNlLmh0bWwnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgXHRCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0Jyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDFfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfcnB0U3ViTWVudV9jdGwwMl9saW5rU3ViTWVudVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShjLnJlc3VsdCkpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEJpbnVzTWF5YS5wcm9tcHRQYXNzd29yZCgnc2VydmljZXMnLCAkc2NvcGUsICdhYnNlbmNlJylcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5hYnNlbmNlID0gZmFsc2U7XG4gICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZS5hYnNlbmNlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICRzY29wZS5hYnNlbmNlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuYWJzZW5jZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlVXJsOiAndmlld3MvbW9kdWxlL2xvYWRpbmcuaHRtbCcsbm9CYWNrZHJvcDogdHJ1ZX0pO1xuICAgICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgfSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0V4YW1TY2hlZHVsZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGh0dHAsICRsb2NhdGlvbiwgXG4gIFx0JHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgJGlvbmljTG9hZGluZykge1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaFNjaGVkdWxlKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBcdGlmKCFsb2NhbFN0b3JhZ2UuZXhhbVNjaGVkdWxlIHx8IGRvbmUubGVuZ3RoID4gMClcbiAgICAgICAgICBcdHtcblx0ICAgICAgICAgIFx0bG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSA9IEpTT04uc3RyaW5naWZ5KGRvbmUpO1xuXHQgICAgICAgICAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IGRvbmU7XG4gICAgICAgICAgXHR9XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICBcdCRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XHRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIFx0dmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgXHRcdHZhciBfZGF0YSA9IFtdO1xuICAgICAgXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgXHRcdFx0dmFyIHRlcm0gPSAkKGRhdGFbaV0pLmZpbmQoXCJ0YWJsZTplcSgyKSB0ciB0ZCBsaVwiKS50ZXh0KCk7XG5cdCAgICAgIFx0XHQkKGRhdGFbaV0pLmZpbmQoXCIudGFibGV3aXRoYm9yZGVyIHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuXHQgICAgICBcdFx0XHRpZihpID4gMCkge1xuXHRcdCAgICAgIFx0XHRcdF9kYXRhLnB1c2goe1xuXHRcdCAgICAgIFx0XHRcdFx0dGVybTogXHRcdCAgdGVybSxcblx0XHQgICAgICBcdFx0XHRcdGNvZGU6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDApLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdG5hbWU6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdHNrczogXHRcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgyKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRkYXRlOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgzKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRob3VyOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg0KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRyb29tOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg1KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRjYW1wdXM6IFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg2KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRjbGFzc05hbWU6IFx0JChkKS5maW5kKFwidGRcIikuZXEoNykudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0c2VhdDogXHRcdFx0cGFyc2VJbnQoJChkKS5maW5kKFwidGRcIikuZXEoOCkudGV4dCgpKVxuXHRcdCAgICAgIFx0XHRcdH0pO1xuXHQgICAgICBcdFx0XHR9XG5cdCAgICAgIFx0XHR9KTtcbiAgICAgIFx0XHR9XG4gICAgICBcdFx0cmV0dXJuIEJpbnVzTWF5YS5ncm91cGluZyhfLnNvcnRCeShfZGF0YSwgJ2RhdGUnKSk7XG4gICAgICBcdH07XG4gICAgICBcdHZhciBkYXRhU2NoZWR1bGUgPSBbXSxcbiAgICAgIFx0XHRcdHNjaGVkdWxlX3VybCA9IFwiXCI7XG4gICAgICBcdGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2V4YW0uaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQuZGF0YSk7XG4gICAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9leGFtLXByYWN0aWN1bS5odG1sJyk7XG4gICAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGUuZGF0YSk7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZGF0YVNjaGVkdWxlKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICBcdEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXHQvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICBcdC50aGVuKGZ1bmN0aW9uKGQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcblx0ICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDMpID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcblx0ICAgICAgICAgIH0pXG5cdCAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDJfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRzY2hlZHVsZV91cmwgPSBkLnJlc3VsdDtcbiAgICAgICAgICAgIFx0cmV0dXJuIEJpbnVzTWF5YS5hcGkoJChzY2hlZHVsZV91cmwpLmZpbmQoXCIuaXRlbUNvbnRlbnRTZXJ2aWNlIGxpOmVxKDApIGFcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZC5yZXN1bHQpO1xuICAgICAgICAgICAgXHRyZXR1cm4gQmludXNNYXlhLmFwaSgkKHNjaGVkdWxlX3VybCkuZmluZChcIi5pdGVtQ29udGVudFNlcnZpY2UgbGk6ZXEoMSkgYVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChkLnJlc3VsdCk7XG4gICAgICAgICAgICBcdHJldHVybiBCaW51c01heWEuYXBpKCQoc2NoZWR1bGVfdXJsKS5maW5kKFwiLml0ZW1Db250ZW50U2VydmljZSBsaTplcSgyKSBhXCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQucmVzdWx0KTtcbiAgICAgICAgICAgIFx0cmVzb2x2ZShyZXR1cm5SZXNwb25zZShkYXRhU2NoZWR1bGUpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IGZhbHNlO1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZXhhbVNjaGVkdWxlKSB7XG4gICAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG4gICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gIH0pOyIsImFwcC5jb250cm9sbGVyKCdFeGFtU2NvcmVDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRodHRwLCAkbG9jYXRpb24sXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgJGlvbmljTG9hZGluZykge1xuXG4gICAgdmFyIHJlZnJlc2hFeGFtU2NvcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIFx0dmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgXHRcdHZhciBfcmVkYXRhID0gW107XG4gICAgICBcdFx0JChkYXRhKS5maW5kKFwiLnRhYmxlYm9yZGVyc21hbGxlciB0clwiKS5lYWNoKGZ1bmN0aW9uIChpLCBkKSB7XG4gICAgICBcdFx0XHRpZihpID4gMCkge1xuICAgICAgXHRcdFx0XHRfcmVkYXRhLnB1c2goe1xuICAgICAgXHRcdFx0XHRcdHRlcm06ICdUaGVvcnkgU2NvcmUnLFxuICAgICAgXHRcdFx0XHRcdHllYXI6ICQoZGF0YSkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfZGRsUGVyaW9kWWVhclwiKS52YWwoKSxcbiAgICAgIFx0XHRcdFx0XHRzbWVzdGVyOiAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X2RkbFBlcmlvZFNlbWVzdGVyXCIpLnZhbCgpLFxuICAgICAgXHRcdFx0XHRcdG5hbWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgIFx0XHRcdFx0XHRkYXRhOiBbXG4gICAgICBcdFx0XHRcdFx0XHRbe1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnVE0nLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNSkuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdNSUQnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNikuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdQcmFjdGljdW0nLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNykuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9XSxbe1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnU0tTJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnRmluYWwnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoOCkuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdSZXN1bHQnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoOSkuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9XVxuICAgICAgXHRcdFx0XHRcdF1cbiAgICAgIFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHR9XG4gICAgICBcdFx0fSk7XG5cblx0XHRcdFx0XHQkKGRhdGEpLmZpbmQoXCIudGFibGV3aXRoYm9yZGVyIHRyXCIpLmVhY2goZnVuY3Rpb24gKGksIGQpIHtcbiAgICAgIFx0XHRcdGlmKGkgPiAwKSB7XG4gICAgICBcdFx0XHRcdF9yZWRhdGEucHVzaCh7XG4gICAgICBcdFx0XHRcdFx0dGVybTogJ1ByYWN0aWN1bSBTY29yZScsXG4gICAgICBcdFx0XHRcdFx0eWVhcjogJChkYXRhKS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9kZGxQZXJpb2RZZWFyXCIpLnZhbCgpLFxuICAgICAgXHRcdFx0XHRcdHNtZXN0ZXI6ICQoZGF0YSkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfZGRsUGVyaW9kU2VtZXN0ZXJcIikudmFsKCksXG4gICAgICBcdFx0XHRcdFx0bmFtZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoMSkudGV4dCgpLFxuICAgICAgXHRcdFx0XHRcdGRhdGE6IFtcbiAgICAgIFx0XHRcdFx0XHRcdFt7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdNSUQnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoMykuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdGaW5hbCcsXG4gICAgICBcdFx0XHRcdFx0XHRcdHZhbHVlOiAkKHRoaXMpLmZpbmQoXCJ0ZFwiKS5lcSg0KS5maW5kKFwiYTpmaXJzdFwiKS50ZXh0KClcbiAgICAgIFx0XHRcdFx0XHRcdH0sIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJ1Byb2plY3QnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNSkuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9XSxbe1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnUHJvamVjdCcsXG4gICAgICBcdFx0XHRcdFx0XHRcdHZhbHVlOiAkKHRoaXMpLmZpbmQoXCJ0ZFwiKS5lcSg2KS5maW5kKFwiYTpmaXJzdFwiKS50ZXh0KClcbiAgICAgIFx0XHRcdFx0XHRcdH0sIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJyAnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJyAnXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICcgJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICcgJ1xuICAgICAgXHRcdFx0XHRcdFx0fV1cbiAgICAgIFx0XHRcdFx0XHRdXG4gICAgICBcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0fVxuICAgICAgXHRcdH0pO1xuICAgICAgXHRcdHJldHVybiBfcmVkYXRhO1xuICAgICAgXHR9O1xuICAgICAgXHRpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcdFxuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2V4YW0tc2NvcmUuaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICBcdEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDMpID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDNfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRTdWJNZW51X2N0bDAxX2xpbmtTdWJNZW51XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIFx0fTtcblxuICBcdCRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hFeGFtU2NvcmUoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlIHx8IGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlID0gSlNPTi5zdHJpbmdpZnkoZG9uZSk7XG4gICAgICAgICAgICAgICRzY29wZS5leGFtU2NvcmUgPSBkb25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBbGxvdyA9IGZhbHNlO1xuICAgIEJpbnVzTWF5YS5wcm9tcHRQYXNzd29yZCgnc2VydmljZXMnLCAkc2NvcGUsICdleGFtU2NvcmUnKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JHNjb3BlLmV4YW1TY29yZSA9IGZhbHNlO1xuXHQgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdCAgICAgICRzY29wZS5leGFtU2NvcmUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5leGFtU2NvcmUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0JGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KHt0ZW1wbGF0ZVVybDogJ3ZpZXdzL21vZHVsZS9sb2FkaW5nLmh0bWwnLG5vQmFja2Ryb3A6IHRydWV9KTtcblx0ICAgICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuICAgIH0pO1xuXG4gIH0pOyIsIi8qKlxuICogRmluYW5jZSBDb250cm9sbGVyXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignRmluYW5jZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljUG9wdXAsICRxLCAkaHR0cCwgJGlvbmljTG9hZGluZykge1xuXG4gICAgJHNjb3BlLmlzQWxsb3cgPSBmYWxzZTtcbiAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBmYWxzZTtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hGaW5hbmNlKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCFsb2NhbFN0b3JhZ2UuZmluYW5jZSB8fCBkb25lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmZpbmFuY2UgPSBKU09OLnN0cmluZ2lmeShkb25lKTtcbiAgICAgICAgICAgICAgJHNjb3BlLmZpbmFuY2VMaXN0ID0gZG9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUudG9Nb25leSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoRmluYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgYmlsbGluZyA9IDA7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJpbGxpbmcgPSBwYXJzZUludCgkKGRhdGEpLmZpbmQoXCJ0YWJsZTplcSgwKSB0ciB0ZFwiKS5odG1sKCkubWF0Y2goL1swLTldKy8pWzBdKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIHZhciBoYXNpbCA9IFtdO1xuICAgICAgICAgICQoZGF0YSkuZmluZCgndGFibGUjcnB0VGFibGUgdHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgICAgIHZhciBodCA9ICQodGhpcykuZmluZCgndGQnKTtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICBoYXNpbC5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRlOiBodC5lcSgxKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICB0ZXJtOiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgZHVlOiBodC5lcSg0KS5odG1sKCksXG4gICAgICAgICAgICAgICAgY2hhcmdlOiBpc05hTihwYXJzZUludChodC5lcSg1KS5odG1sKCkpKSA9PT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg1KS5odG1sKCkpLFxuICAgICAgICAgICAgICAgIHBheW1lbnQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKSkpID09PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKS5tYXRjaCgvWzAtOV0rLykpLFxuICAgICAgICAgICAgICAgIHJlZnVuZDogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgZmluYWxfZGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGE6IEJpbnVzTWF5YS5ncm91cGluZyhoYXNpbCksXG4gICAgICAgICAgICBiaWxsaW5nOiBiaWxsaW5nLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZTogbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJylcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBmaW5hbF9kYXRhO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2ZpbmFuY2UuaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgzKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdE1haW5NZW51U3R1ZGVudF9jdGwwNl9saW5rTWVudVN0dWRlbnRcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdFN1Yk1lbnVfY3RsMDNfbGlua1N1Yk1lbnVcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoYy5yZXN1bHQpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gICAgQmludXNNYXlhLnByb21wdFBhc3N3b3JkKCdzZXJ2aWNlcycsICRzY29wZSwgJ2ZpbmFuY2UnKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5maW5hbmNlKSB7XG4gICAgICAgICRzY29wZS5maW5hbmNlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmZpbmFuY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KHt0ZW1wbGF0ZVVybDogJ3ZpZXdzL21vZHVsZS9sb2FkaW5nLmh0bWwnLG5vQmFja2Ryb3A6IHRydWV9KTtcbiAgICAgICAgJHNjb3BlLmRvUmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4pOyIsImFwcC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLFxuZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNQb3B1cCwgJHRpbWVvdXQsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCAkcm9vdFNjb3BlLCBCaW51c01heWEpIHtcblxuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSB0cnVlO1xuICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYXIoZmFsc2UpO1xuXG4gICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuXG4gICAgJGlvbmljSGlzdG9yeS5uZXh0Vmlld09wdGlvbnMoe1xuICAgICAgZGlzYWJsZUJhY2s6IHRydWVcbiAgICB9KTtcblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghKCRzY29wZS5iaW51c2lkICYmICRzY29wZS5wYXNzd29yZCkpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ1BsZWFzZSBJbnB1dCBCaW51c2lhbiBJRCBhbmQgUGFzc3dvcmQnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnb24tbG9hZGluZyc7XG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgQmludXNNYXlhLmFwaSgnLycsICdnZXQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgaWYoZC5jb2RlICE9PSAyMDApIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS50eHRVc2VySWQgPSAkc2NvcGUuYmludXNpZDtcbiAgICAgICAgICBkYXRhLnR4dFBhc3N3b3JkID0gJHNjb3BlLnBhc3N3b3JkO1xuICAgICAgICAgIGRhdGEuYnRuTG9naW4gPSBcIkxvZyBJbiBcIjtcbiAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdwb3N0JywgZGF0YSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBoYW5kbGVFcnJvcihlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBuYW1lID0gJChkLnJlc3VsdCkuZmluZChcIiNjb250ZW50ICN0b3BiYXIgLnJpZ2h0IHN0cm9uZ1wiKTtcbiAgICAgICAgICAvLyBXaGVuIFN1Y2Nlc3NcbiAgICAgICAgICBpZihkLmNvZGUgIT09IDIwMClcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIGlmKG5hbWUubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQsICQoZC5yZXN1bHQpLmZpbmQoXCIjbGJsRXJyb3JcIikudGV4dCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSSBUaGluayB0aGF0IG5vdCBiZXN0IG1ldGhvZFxuICAgICAgICAgICAgICogQHRvZG8gbWFrZSBpdCBoYXNoXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sb2dpbklkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBiaW51c2lkOiAkc2NvcGUuYmludXNpZCxcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc2xvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5mbmFtZSA9IG5hbWUudGV4dCgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2luTmFtZSA9IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICRpb25pY0hpc3RvcnkuY2xlYXJIaXN0b3J5KCk7XG4gICAgICAgICAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFja0J1dHRvbihmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0sIGhhbmRsZUVycm9yKTtcblxuICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihkYXRhLCB0ZXh0KSB7XG4gICAgICAgICAgdHlwZW9mIHRleHQgIT09IFwidW5kZWZpbmVkXCIgPyB0ZXh0IDogbnVsbDtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG4gICAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRleHQgPyB0ZXh0IDogJ1NvbWV0aGluZyB3cm9uZyAhJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cbik7XG4iLCIvKipcbiAqIE15IENsYXNzIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdNeUNsYXNzQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkbG9jYXRpb24sICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsICRpb25pY0xvYWRpbmcsICRodHRwKSB7XG4gICAgJHJvb3RTY29wZS5ub0hlYWRlciA9IGZhbHNlO1xuICAgICRyb290U2NvcGUubGVmdE1lbnUgPSB0cnVlO1xuICAgICRpb25pY1BsYXRmb3JtLm9uSGFyZHdhcmVCYWNrQnV0dG9uKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICRzY29wZS5jbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG5cbiAgICB2YXIgcmVmcmVzaE15Q2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBfcmVEYXRhID0gW107XG4gICAgICAgICAgJChkYXRhKS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sVGVvcmkgdWwgbGlcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICQoZCkuZmluZChcImFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICByZWcgPSBuYW1lLm1hdGNoKC9eKC4qKS0oLiopIFxcKCguKilcXCkvaSk7XG4gICAgICAgICAgICBfcmVEYXRhLnB1c2goe1xuICAgICAgICAgICAgICBpbmRleEl0ZW06IGksXG4gICAgICAgICAgICAgIG5hbWU6IHJlZ1syXSxcbiAgICAgICAgICAgICAgdXJsOiAkKGQpLmZpbmQoXCJhXCIpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgY29kZTogcmVnWzFdLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IHJlZ1szXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeShfcmVEYXRhKTtcbiAgICAgICAgICByZXR1cm4gX3JlRGF0YTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZih0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L215Y2xhc3MuaHRtbCcpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDApID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoYy5yZXN1bHQucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoTXlDbGFzcygpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuY2xhc3NEYXRhID0gZG9uZTtcbiAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYoISRzY29wZS5jbGFzc0RhdGEpIHtcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG4gICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgfVxuXG4gIH0pOyIsIi8qKlxuICogTXkgQ2xhc3MgSW5zaWRlXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignTXlDbGFzc0RldGFpbENvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGxvY2F0aW9uLCAkaHR0cCwgJGlvbmljU2Nyb2xsRGVsZWdhdGUsXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgZGF0YXNldCwgJHRpbWVvdXQsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRzY29wZS5jbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG4gICAgJHNjb3BlLnN0YXRlID0ge1xuICAgICAgaXNEYXRhOiBmYWxzZSxcbiAgICAgIGxvYWRpbmc6IHRydWVcbiAgICB9O1xuICAgICRzY29wZS5kYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XTtcbiAgICAkc2NvcGUuc2hvd3BhZ2UgPSAwO1xuXG4gICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50ID0gW107XG4gICAgJHNjb3BlLmxpbmtzU2V0ID0gW107XG5cbiAgICB2YXIgZ2V0Q2xhc3NEZXRhaWwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBkZXNjX21haW4gPSAkKGRhdGEpLmZpbmQoXCIjZGVzY19jb3Vyc2VfZGVzYyA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICBkZXNjX2dyYWQgPSAkKGRhdGEpLmZpbmQoXCIjZGVzY19ncmFkX2NvbXBldGUgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgY291cnNlID0gW10sIFxuICAgICAgICAgICAgICBhc3NpZ21lbnQgPSBbXTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxDb250ZW50VGhlb3J5IHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgY291cnNlLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkOmVxKDApID4gc3BhblwiKS5odG1sKCkpLFxuICAgICAgICAgICAgICAgIG1vZGU6ICQoZCkuZmluZChcInRkOmVxKDEpID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZDplcSgyKSA+IGFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGRhdGU6ICQoZCkuZmluZChcInRkOmVxKDMpID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgbGlua3M6ICQoZCkuZmluZChcInRkOmVxKDQpID4gaW5wdXRcIikuYXR0cignbmFtZScpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgICQoZGF0YSkuZmluZChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3BubE1haW5Bc3NpZ25tZW50IHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgYXNzaWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHRlcm06ICdNYWluIEFzc2lnbm1lbnQnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkXCIpLmVxKDApLnRleHQoKSksXG4gICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgxKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgdGl0bGU6ICQoZCkuZmluZChcInRkXCIpLmVxKDIpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBkZXNjOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgzKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgZGVhZGxpbmU6ICQoZCkuZmluZChcInRkXCIpLmVxKDQpLnRleHQoKSxcbiAgICAgICAgICAgICAgICB1cGxvYWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDUpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDYpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxpbms6ICQoZCkuZmluZChcInRkXCIpLmVxKDcpLmZpbmQoXCJpbnB1dDplcSgwKVwiKS5hdHRyKCduYW1lJylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYXRhKS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sQWRkaXRpb25hbEFzc2lnbm1lbnQyIHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgYXNzaWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHRlcm06ICdBZGRpdGlvbmFsIEFzc2lnbm1lbnQnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkXCIpLmVxKDApLnRleHQoKSksXG4gICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgxKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgdGl0bGU6ICQoZCkuZmluZChcInRkXCIpLmVxKDIpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBkZXNjOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgzKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgZGVhZGxpbmU6ICQoZCkuZmluZChcInRkXCIpLmVxKDQpLnRleHQoKSxcbiAgICAgICAgICAgICAgICB1cGxvYWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDUpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDYpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxpbms6ICQoZCkuZmluZChcInRkXCIpLmVxKDcpLmZpbmQoXCJpbnB1dDplcSgwKVwiKS5hdHRyKCduYW1lJylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWFpbl9kZXNjcmlwdGlvbjogZGVzY19tYWluLFxuICAgICAgICAgICAgZ3JhZF9kZXNjcmlwdGlvbjogZGVzY19ncmFkLFxuICAgICAgICAgICAgYXNzaWdtZW50OiBhc3NpZ21lbnQubGVuZ3RoID4gMCA/IGFzc2lnbWVudCA6IGZhbHNlLFxuICAgICAgICAgICAgY291cnNlOiBjb3Vyc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L215Y2xhc3MtaW5zaWRlLmh0bWwnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0Jyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShfYmltYXlfYXBpX3VybCArICcvTE1TLycgKyB1cmwsICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBteSBjbGFzc1wiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5yZXN1bHQpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gY291cnNlIHBhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWwgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZ2V0Q2xhc3NEZXRhaWwoJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS51cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbCA9IGRhdGE7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUuY2xhc3NEYXRhKTtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlLmlzRGF0YSA9ICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0sIGVyckhhbmRsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgfVxuXG4gICAgJHNjb3BlLnN3aXRjaFRhYiA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAkc2NvcGUuc2hvd3BhZ2UgPSBzdGF0ZTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnJlc2l6ZSgpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9O1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvd25sb2FkQ291cnNlID0gZnVuY3Rpb24oaW5kZXgsIGxpbmtzKSB7XG4gICAgICAkc2NvcGUubGlua3NTZXRbaW5kZXhdID0ge2lzTG9hZGluZzogdHJ1ZX07XG4gICAgICBkb3dubG9hZE1hdGVyaWFsKGxpbmtzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICB3aW5kb3cub3BlbihkLCAnX3N5c3RlbScpO1xuICAgICAgICAkc2NvcGUubGlua3NTZXRbaW5kZXhdID0ge2lzTG9hZGluZzogZmFsc2V9OyAgXG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmxpbmtzU2V0W2luZGV4XSA9IHtpc0xvYWRpbmc6IGZhbHNlfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG93bmxvYWRBc3NpZ21lbnQgPSBmdW5jdGlvbihpbmRleCwgbGlua3MpIHtcbiAgICAgICRzY29wZS5saW5rc1NldEFzc2lnbWVudFtpbmRleF0gPSB7aXNMb2FkaW5nOiB0cnVlfTtcbiAgICAgIGRvd25sb2FkTWF0ZXJpYWwobGlua3MpXG4gICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgIHdpbmRvdy5vcGVuKGQsICdfc3lzdGVtJyk7XG4gICAgICAgICRzY29wZS5saW5rc1NldEFzc2lnbWVudFtpbmRleF0gPSB7aXNMb2FkaW5nOiBmYWxzZX07XG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50W2luZGV4XSA9IHtpc0xvYWRpbmc6IGZhbHNlfTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIHZhciBkb3dubG9hZE1hdGVyaWFsID0gZnVuY3Rpb24obGlua3MpXG4gICAge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5kb3dubG9hZCgkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLnVybCwgbGlua3MpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBteSBjbGFzc1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZC5oZWFkZXIuTG9jYXRpb24pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgXG4gICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlOiAnPGlvbi1zcGlubmVyIGljb249XCJhbmRyb2lkXCIgY2xhc3M9XCJvdmVybGF5LXNwaW5uZXJcIj48L2lvbi1zcGlubmVyPiBMb2FkaW5nLi4uJ30pO1xuXG4gICAgICBnZXRDbGFzc0RldGFpbCgkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLnVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsID0gZGF0YTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UubXlDbGFzcyA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS5jbGFzc0RhdGEpO1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUucmVzaXplKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgIGVyckhhbmRsZShtc2cpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgfSk7XG4iLCIvKipcbiAqIFBhc3N3b3JkIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdQYXNzd29yZENvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljUG9wdXAsICRxLCAkaHR0cCwgJGlvbmljTG9hZGluZykge1xuXG4gIFx0JHNjb3BlLmlucHV0ID0ge307XG5cbiAgXHQkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gIFx0XHR2YXIgZGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxvZ2luSWQpLFxuICBcdFx0XHRvbGRQYXNzID0gbG9jYWxTdG9yYWdlLmNvZGUgPyBsb2NhbFN0b3JhZ2UuY29kZSA6IGRhdGEucGFzc3dvcmQ7XG4gIFx0XHRcbiAgXHRcdGlmKCRzY29wZS5pbnB1dC5vbGRQYXNzd29yZCAhPT0gb2xkUGFzcykge1xuICBcdFx0XHQkaW9uaWNQb3B1cC5hbGVydCh7dGl0bGU6ICdPb3BzICEnLHRlbXBsYXRlOiAnSW5jb3JyZWN0IENvZGUnfSk7XG4gIFx0XHR9IGVsc2UgaWYoISRzY29wZS5pbnB1dC5uZXdQYXNzd29yZCB8fCAhJHNjb3BlLmlucHV0LnJlUGFzc3dvcmQpIHtcbiAgXHRcdFx0JGlvbmljUG9wdXAuYWxlcnQoe3RpdGxlOiAnT29wcyAhJyx0ZW1wbGF0ZTogJ1BsZWFzZSBJbnNlcnQgbmV3IENvZGUnfSk7XG4gIFx0XHR9IGVsc2UgaWYoJHNjb3BlLmlucHV0Lm5ld1Bhc3N3b3JkICE9PSAkc2NvcGUuaW5wdXQucmVQYXNzd29yZCkge1xuXHRcdFx0XHQkaW9uaWNQb3B1cC5hbGVydCh7dGl0bGU6ICdPb3BzICEnLHRlbXBsYXRlOiAncmUgY29kZSBpcyBub3Qgc2FtZSBhcyBuZXcgY29kZSd9KTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdCRpb25pY1BvcHVwLmFsZXJ0KHt0aXRsZTogJ1N1Y2Nlc3MgIScsdGVtcGxhdGU6ICdDb2RlIGhhcyBiZWVuIGNoYW5nZWQnfSk7XG4gIFx0XHRcdGxvY2FsU3RvcmFnZS5jb2RlID0gJHNjb3BlLmlucHV0Lm5ld1Bhc3N3b3JkO1xuICBcdFx0XHQkc2NvcGUuaW5wdXQgPSB7fTtcbiAgXHRcdH1cbiAgXHR9O1xuXG5cblxuICB9KTsiLCIvKipcbiAqIFBlcm1pc3Npb24gQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1Blcm1pc3Npb25Db250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY1BvcHVwLCAkcSwgJGh0dHAsICRpb25pY0xvYWRpbmcpIHtcbiAgICAkc2NvcGUuaXNBbGxvdyA9IGZhbHNlO1xuICAgICRzY29wZS5wZXJtaXNzaW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UucGVybWlzc2lvbik7XG5cbiAgICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgXHRsb2NhbFN0b3JhZ2UucGVybWlzc2lvbiA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS5wZXJtaXNzaW9uKTtcbiAgICB9O1xuXG4gICAgQmludXNNYXlhLnByb21wdFBhc3N3b3JkKCdzZXR0aW5ncycsICRzY29wZSlcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIFxuICAgIH0pO1xuICB9KTsiLCIvKipcbiAqIFNjaGVkdWxlIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdTY2hlZHVsZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsICRpb25pY1BvcHVwLCAkdGltZW91dCwgJGlvbmljSGlzdG9yeSwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sIEJpbnVzTWF5YSwgJHEsICRodHRwLCAkaW9uaWNMb2FkaW5nKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gZmFsc2U7XG4gICAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IHRydWU7XG4gICAgJGlvbmljUGxhdGZvcm0ub25IYXJkd2FyZUJhY2tCdXR0b24oZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmdldFN0YXRlID0gZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHRvZGF5ID0gbW9tZW50KCk7XG4gICAgICAvL3RvZGF5XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9kYXknO1xuICAgICAgfSBlbHNlXG4gICAgICAvL3RvbW9ycm93XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheS5hZGQoMSwgJ2QnKSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9tb3Jyb3cnO1xuICAgICAgfSBlbHNlXG4gICAgICAvL2xhc3RlZFxuICAgICAgaWYgKG1vbWVudChkKSA8IHRvZGF5KSB7XG4gICAgICAgIHJldHVybiAnY29tcGxldG8nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdGUgPSBmdW5jdGlvbihkLCBtKSB7XG4gICAgICB2YXIgbm93ID0gbW9tZW50KCksXG4gICAgICAgIGdldE1vbWVudCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgZ2V0TGFzdCA9IG0uc3BsaXQoXCItXCIpWzFdLnNwbGl0KFwiOlwiKSxcbiAgICAgICAgICBnZXRIb3VyID0gcGFyc2VJbnQoZ2V0TGFzdFswXSksXG4gICAgICAgICAgZ2V0TWludXRlID0gcGFyc2VJbnQoZ2V0TGFzdFsxXSk7XG5cbiAgICAgICAgZ2V0TW9tZW50ID0gbW9tZW50KGQpLmhvdXIoZ2V0SG91cikubWludXRlKGdldE1pbnV0ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGdldE1vbWVudCA9IG1vbWVudChkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdldE1vbWVudCA8IG5vdykge1xuICAgICAgICByZXR1cm4gJ2NvbXBsZXRvJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzU2NoZWR1bGUgPSBmYWxzZTtcbiAgICAkc2NvcGUuc2NoZWR1bGUgPSBbXTtcblxuICAgIHZhciB0b0pzb24gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgaGFzaWwgPSBbXTtcbiAgICAgICQoZGF0YSkuZmluZCgndHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgdmFyIGh0ID0gJCh0aGlzKS5maW5kKCd0ZCcpO1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBodC5lcSgzKS5odG1sKCkubWF0Y2goLyguKiktKC4qKS8pO1xuICAgICAgICAgIGhhc2lsLnB1c2goe1xuICAgICAgICAgICAgZGF0ZTogaHQuZXEoMCkuaHRtbCgpLFxuICAgICAgICAgICAgdGltZTogaHQuZXEoMSkuaHRtbCgpLFxuICAgICAgICAgICAgc3RhdGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgIGNvdXJzZTogbWF0Y2hbMl0sXG4gICAgICAgICAgICBjb2RlOiBtYXRjaFsxXSxcbiAgICAgICAgICAgIG15Q2xhc3M6IGh0LmVxKDUpLmh0bWwoKSxcbiAgICAgICAgICAgIHJvb206IGh0LmVxKDYpLmh0bWwoKSxcbiAgICAgICAgICAgIGJ1aWxkaW5nOiBodC5lcSg3KS5odG1sKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaGFzaWw7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoSmFkd2FsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX3NjaGVkdWxlID0gJChkYXRhKS5maW5kKFwidGFibGVcIiksXG4gICAgICAgICAgICAgIHRvZGF5ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgwKS5odG1sKCkpLFxuICAgICAgICAgICAgICBuZXh0ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgxKS5odG1sKCkpLFxuICAgICAgICAgICAgICBza2VkdWwgPSB0b2RheS5jb25jYXQobmV4dCksXG4gICAgICAgICAgICAgIGphZHdhbCA9IEJpbnVzTWF5YS5ncm91cGluZyhza2VkdWwpO1xuICAgICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmphZHdhbCB8fCBqYWR3YWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuamFkd2FsID0gSlNPTi5zdHJpbmdpZnkoamFkd2FsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBqYWR3YWw6IGphZHdhbCwgbGFzdFVwZGF0ZTogbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9zY2hlZHVsZS5odG1sJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fSxcbiAgICAgICAgICAgICAgICBkID0gYy5yZXN1bHQ7XG4gICAgICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtkLm5hbWVdID0gZC52YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEuX19FVkVOVFRBUkdFVCA9ICdjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGJ0blNjaGVkdWxlJztcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoX2JpbWF5X2FwaV91cmwgKyAnL0xNUy9NeUNsYXNzLmFzcHgnLCAncG9zdCcsIGRhdGEsIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gc2NoZWR1bGUgcGFnZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5yZXN1bHQpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoSmFkd2FsKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgICRyb290U2NvcGUuZ2V0TGFzdFVwZGF0ZSgpO1xuICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICRzY29wZS5zY2hlZHVsZSA9IGRhdGEuamFkd2FsO1xuICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlcnJIYW5kbGUoZSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5qYWR3YWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICAgJHNjb3BlLnNjaGVkdWxlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuamFkd2FsKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlVXJsOiAndmlld3MvbW9kdWxlL2xvYWRpbmcuaHRtbCcsbm9CYWNrZHJvcDogdHJ1ZX0pO1xuICAgICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG4iLCIvKipcbiAqIFNlcnZpY2VzIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgUGVkb3ggPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NlcnZpY2VzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0JpbnVzTWF5YScsICckaW9uaWNOYXZCYXJEZWxlZ2F0ZScsXG5mdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUpIHtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
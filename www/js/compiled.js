var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya",function(t,e,a,n,o){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),e.profileImage="undefined"==typeof localStorage.profileImage?!1:localStorage.profileImage,delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){localStorage.clear(),window.location.hash="#/",a.clearHistory(),n.showBackButton(!1),location.reload()},e.getProfileImage=function(){o.getProfileImage(function(t){localStorage.profileImage=t,e.profileImage=t},function(){})},window.location.hash=e.login?"/schedule":"/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,a=JSON.parse(localStorage.loginId);return t(function(t,n){return localStorage.templogin!==!0?e.api("/","get").then(function(t){200!==t.code&&n(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=a.binusid,o.txtPassword=a.password,o.btnLogin="Log In ",e.api("/","post",o)},n).then(function(){localStorage.templogin=!0,t(!0)},n):(t(!0),void 0)})},api:function(e,a,n,o){var r=this;return void 0===localStorage.cookie?r._getCookie().then(function(){return r.api(e,a,n)}):t(function(t,i){"get"===a?httpclient.get(o?e:r._bimay_url+e,t,i,{headers:r.headers()}):httpclient.post(o?e:r._bimay_url+e,n,t,i,{headers:r.headers()})})},frame:function(e){var a=this,n="";return t(function(t,o){return a.api(e,"get").then(function(t){return a.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return n=$(t.result).find("#ifrApp").attr("src"),a.api(n,"get",{},!0)},o).then(function(e){t({url:n,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,a){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):a(e)},t)})},promptPassword:function(t,a){a.promptPass={};var n=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter Binusmaya Password",subTitle:"Please enter binusmaya password to access this page",scope:a,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+t,n.close()}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(t){var e=JSON.parse(localStorage.loginId).password;return e==a.promptPass.password?(a.promptPass={},a.isAllow=!0,!0):(a.promptPass.error=!0,a.promptPass.password="",t.preventDefault(),void 0)}}]})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],a="",n=-1,o=0;return t.forEach(function(t){a==t.date?(e[n].data[o]=t,o++):(o=1,n++,a=t.date,e[n]={date:t.date,data:[]},e[n].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,a){var n=!1,o=t.defer(),r="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var i in r)r[i].code==e.code&&(n=i);return n?o.resolve(n):a.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("ExamScheduleController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,c,s,u,p){t.doRefresh=function(){f().then(function(e){t.$applyAsync(function(){t.examScheduleList=e,t.$broadcast("scroll.refreshComplete")})},function(e){d(e),t.$broadcast("scroll.refreshComplete")})};var f=function(){return u(function(t,e){var a=function(t){return t};"undefined"==typeof httpclient&&o.get("http://localhost:2505/exam.html").then(function(e){t(a(e.data))},e)})};t.examScheduleList=!1,"undefined"!=typeof localStorage.examSchedule&&(t.examScheduleList=JSON.parse(localStorage.examSchedule));var d=function(e){p.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http",function(t,e,a,n,o){t.isAllow=!1,t.doRefresh=function(){r().then(function(e){t.$applyAsync(function(){t.financeList=e,t.$broadcast("scroll.refreshComplete")})},function(e){i(e),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var r=function(){return n(function(t,a){var n=function(t){var a=0;try{a=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(n){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:isNaN(parseInt(e.eq(5).html()))===!0?0:parseInt(e.eq(5).html()),payment:isNaN(parseInt(e.eq(6).html()))===!0?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:isNaN(parseInt(e.eq(7).html()))===!0?0:parseInt(e.eq(7).html())})});var r={data:e.grouping(o),billing:a,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return localStorage.finance=JSON.stringify(r),r};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(n(e.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(){return e.api($("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(){return e.api($("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(e){t(n(e.result))},function(){a("can't access to main frame")})})};t.financeList=!1,"undefined"!=typeof localStorage.finance&&(t.financeList=JSON.parse(localStorage.finance));var i=function(e){a.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t)}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,a,n,o,r,i){r.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",n.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,i.api("/","get").then(function(e){200!==e.code&&a(e);var n={};return $($(e.result).serializeArray()).each(function(t,e){n[e.name]=e.value}),n.txtUserId=t.binusid,n.txtPassword=t.password,n.btnLogin="Log In ",i.api("/","post",n)},a).then(function(e){var i=$(e.result).find("#content #topbar .right strong");200!==e.code&&a(e),i.length<=0?a(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=i.text(),r.login=!0,r.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,window.location.hash="#/schedule",n.clearHistory(),o.showBackButton(!1))},a);var a=function(a,n){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:n?n:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,c,s,u){l.noHeader=!1,l.leftMenu=!0,c.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var p=function(){return s(function(t,a){e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(e){var a=[];$(e.result.result).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,e){var n=$(e).find("a").html(),o=n.match(/^(.*)-(.*) \((.*)\)/i);a.push({indexItem:t,name:o[2],url:$(e).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(a),t(a)},function(){a("can't access to my class")})})};t.doRefresh=function(){p().then(function(a){a.length>0?t.classData=a:e("You don't have any class"),t.$broadcast("scroll.refreshComplete")},e);var e=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset",function(t,e,a,n,o,r,i,l,c,s,u,p){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[p],t.isPageTopic=!1;var f=function(t){return s(function(a,n){e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){n("can't access to my class")}).then(function(t){var e=t.result,n=$(e).find("#desc_course_desc > span").html(),o=$(e).find("#desc_grad_compete > span").html(),r=[];$(e).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&r.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})});var i={main_description:n,grad_description:o,course:r};a(i)},function(){n("can't access to course page")})})};"undefined"==typeof t.classData[p].detail?f(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),t.$broadcast("scroll.refreshComplete")},d):(t.state.loading=!1,t.state.isData=t.classData[p].detail),t.isPageTopic===!1?(t.infoTab="active",t.topicsTab=""):(t.infoTab="",t.topicsTab="active"),t.switchTab=function(e){0===e&&(t.isPageTopic=!1,t.infoTab="active",t.topicsTab=""),1===e&&(t.isPageTopic=!0,t.infoTab="",t.topicsTab="active")};var d=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http",function(t,e,a,n,o,r,i,l,c){if(o.noHeader=!1,o.leftMenu=!0,r.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var a=moment(),n=null;try{var o=e.split("-")[1].split(":"),r=parseInt(o[0]),i=parseInt(o[1]);n=moment(t).hour(r).minute(i)}catch(l){n=moment(t)}return a>n?"completo":void 0},t.isSchedule=!1,t.schedule=[],localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(s){}var u=function(t){var e=[];return $(t).find("tr").each(function(t){var a=$(this).find("td");if(t>0){var n=a.eq(3).html().match(/(.*)-(.*)/);e.push({date:a.eq(0).html(),time:a.eq(1).html(),state:a.eq(2).html(),course:n[2],code:n[1],myClass:a.eq(5).html(),room:a.eq(6).html(),building:a.eq(7).html()})}}),e},p=function(){return l(function(t,e){var a=function(t){var e=$(t).find("table"),a=u(e.eq(0).html()),n=u(e.eq(1).html()),o=a.concat(n);return localStorage.jadwal=JSON.stringify(i.grouping(o)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:JSON.parse(localStorage.jadwal),lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?c.get("http://localhost:2505/schedule.html").then(function(e){t(a(e.data))},e):i.checkLogin().then(function(){return i.api("/","get")},function(){e("can't re-auth your account")}).then(function(t){return i.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){e("can't access to main frame")}).then(function(t){var e={},a=t.result;return $($(a.result).serializeArray()).each(function(t,a){e[a.name]=a.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",i.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){e("can't access frame")}).then(function(e){t(a(e.result))},function(){e("can't access schedule page")})})};t.doRefresh=function(){p().then(function(e){t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),e.jadwal.length>0?(t.isSchedule=!0,t.schedule=e.jadwal):a("No Schedule found")},a);var a=function(a){e.alert({title:"Oops !",template:a}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvZXhhbVNjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9maW5hbmNlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9sb2dpbi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzcy5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzc0luc2lkZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2NoZWR1bGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NlcnZpY2VzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxXQUFBLFNBQ0EsT0FBQSxVQUNBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxJQUFBLFFBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxxQkFFQSxLQUFBLGlCQUFBLGFBQUEsZ0JBQUEsdUJBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLE1BQUEsbUJBQUEsY0FBQSxTQUFBLEVBQUEsYUFBQSxRQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLE1BQUEsS0FBQSxhQUFBLE1BQUEsY0FDQSxFQUFBLGFBQUEsbUJBQUEsY0FBQSxjQUFBLEVBQUEsYUFBQSxtQkFDQSxjQUFBLGFBQ0EsY0FBQSxVQUVBLEVBQUEsTUFBQSxXQUNBLEVBQUEsYUFDQSxRQUFBLEdBSUEsT0FBQSxTQUFBLE9BQUEsUUFBQSxRQUFBLFVBQ0EsUUFBQSxRQUFBLFNBQUEsMEJBQUEsR0FFQSxPQUFBLFdBQ0EsVUFBQSxpQkFJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFdBQUEsbUJBQUEsY0FBQSxXQUFBLFdBQUEsYUFBQSxZQUVBLEVBQUEsZ0JBQ0EsRUFBQSxPQUFBLFdBQ0EsYUFBQSxRQUNBLE9BQUEsU0FBQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FDQSxTQUFBLFVBR0EsRUFBQSxnQkFBQSxXQUVBLEVBQUEsZ0JBQ0EsU0FBQSxHQUNBLGFBQUEsYUFBQSxFQUNBLEVBQUEsYUFBQSxHQUVBLGVBTUEsT0FBQSxTQUFBLEtBREEsRUFBQSxNQUNBLFlBRUEsT0FJQSxRQUFBLHVCQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsY0FBQSxHQUNBLEVBQUEsTUFBQSxTQUFBLEtDekVBLFNBQUEsT0FBQSx1QkFFQSxRQUFBLGFBQUEsS0FBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLE9BRUEsV0FBQSwrQkFDQSxlQUFBLG9DQUVBLFFBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxRQUNBLE9BQUEsYUFBQSxPQUFBLGFBQUEsT0FBQSxLQUNBLE9BQUEsRUFBQSxXQUNBLFFBQUEsRUFBQSxhQUdBLFdBQUEsV0FDQSxHQUFBLEdBQUEsS0FDQSxFQUFBLEtBQUEsTUFBQSxhQUFBLFFBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsY0FBQSxhQUFBLEVBR0EsRUFBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLEdBQ0EsS0FBQSxXQUNBLGFBQUEsV0FBQSxFQUNBLEdBQUEsSUFDQSxJQWpCQSxHQUFBLEdBQUEsV0FxQkEsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBRUEsT0FBQSxVQUFBLGFBQUEsT0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsRUFBQSxHQUNBLFFBQUEsRUFBQSxZQUdBLFdBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLGVBT0EsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxxQkFBQSxLQUFBLE9BQUEsUUFDQSxHQUNBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLFdBQUEsS0FBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLFVBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQ0EsSUFBQSxFQUNBLE9BQUEsS0FFQSxNQUlBLFdBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsV0FBQSxJQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE1BQ0EsYUFBQSxPQUFBLEVBQUEsT0FBQSxjQUNBLEdBQUEsSUFFQSxFQUFBLElBRUEsTUFHQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxJQUFBLEdBQUEsRUFBQSxNQUNBLFNBQUEscUlBQ0EsTUFBQSwyQkFDQSxTQUFBLHNEQUNBLE1BQUEsRUFDQSxVQUNBLEtBQUEsU0FDQSxNQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsV0FHQSxLQUFBLGVBQ0EsS0FBQSxrQkFDQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxNQUFBLGFBQUEsU0FBQSxRQUNBLE9BQUEsSUFBQSxFQUFBLFdBQUEsVUFDQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEdBQ0EsSUFFQSxFQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxpQkFGQSxjQVFBLGNBQUEsYUFHQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUNBLFFBRUEsSUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxDQWdCQSxPQWZBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUNBLE1BRUEsRUFBQSxFQUNBLElBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxLQUNBLFNBRUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxLQUdBLE9DNUpBLFFBQUEsT0FBQSxnQkFFQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQ0EsTUFBQSxTQUNBLElBQUEsSUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGlCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxnQkFDQSxXQUFBLHlCQUlBLE1BQUEsU0FDQSxJQUFBLFNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsYUFDQSxXQUFBLHNCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxzQkFDQSxXQUFBLHlCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxlQUNBLFdBQUEsd0JBSUEsTUFBQSxpQkFDQSxJQUFBLHdCQUNBLFNBQ0EsU0FBQSxLQUFBLGVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBUUEsT0FMQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxZQUFBLFVBRUEsRUFBQSxXQUdBLE9BQ0EsYUFDQSxZQUFBLFVBQUEscUJBQ0EsV0FBQSw4QkFJQSxNQUFBLGdCQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSw4QkFDQSxXQUFBLDZCQUlBLE1BQUEsYUFDQSxJQUFBLGNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSwyQkFDQSxXQUFBLDBCQUlBLE1BQUEsaUJBQ0EsSUFBQSxrQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxXQUNBLElBQUEsV0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxVQUNBLElBQUEsVUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGtCQUtBLEVBQUEsVUFBQSxjQ2hJQSxJQUFBLFdBQUEsMEJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxpQkFBQSxFQUNBLEVBQUEsV0FBQSw2QkFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsV0FBQSw0QkFJQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxNQUFBLEdBRUEsb0JBQUEsYUFDQSxFQUFBLElBQUEsbUNBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxLQU9BLEdBQUEsa0JBQUEsRUFDQSxtQkFBQSxjQUFBLGVBQ0EsRUFBQSxpQkFBQSxLQUFBLE1BQUEsYUFBQSxjQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDhCQ3ZDQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLGNBQUEsS0FBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FBQSxFQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxXQUFBLDZCQUVBLFNBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxXQUFBLDZCQUdBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsSUFDQSxNQUFBLEdBQUEsUUFBQSxHQUFBLFFBQUEsc0JBQUEsT0FDQSxNQUFBLEdBQ0EsTUFBQSxJQUlBLElBQUEsR0FBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLEtBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLHFCQUFBLE9BQUEsTUFBQSxVQUFBLElBQ0EsTUFBQSxJQUNBLEdBQUEsS0FDQSxHQUFBLEdBQUEsS0FBQSxxQkFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxHQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsUUFBQSxNQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxPQUFBLE1BQUEsV0FDQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFdBSUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxTQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsU0FBQSxPQUFBLHVCQUdBLE9BREEsY0FBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBR0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsc0NBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsNkRBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsaURBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxhQUFBLEVBQ0EsbUJBQUEsY0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLE1BQUEsYUFBQSxTQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDBCQUdBLEdBQUEsZUFBQSxXQUFBLE1DdEhBLElBQUEsV0FBQSxtQkFDQSxTQUFBLGNBQUEsV0FBQSxnQkFBQSx1QkFBQSxhQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxFQUNBLEVBQUEsU0FBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQUVBLEVBQUEsaUJBQ0EsYUFBQSxJQUdBLEVBQUEsT0FBQSxXQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsU0FLQSxDQUNBLEVBQUEsV0FBQSxhQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsSUFBQSxJQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsS0FPQSxPQU5BLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxJQUFBLE9BQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGlDQUVBLE9BQUEsRUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxhQUFBLFNBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBTUEsYUFBQSxRQUFBLEtBQUEsV0FDQSxRQUFBLEVBQUEsUUFDQSxTQUFBLEVBQUEsV0FHQSxhQUFBLFNBQUEsRUFDQSxhQUFBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsVUFBQSxhQUFBLE1BQUEsY0FDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxPQUFBLFNBQUEsS0FBQSxhQUNBLEVBQUEsZUFDQSxFQUFBLGdCQUFBLEtBR0EsRUFFQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLEVBQUEsRUFBQSwyQkExREEsR0FBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLDhDQ2JBLElBQUEsV0FBQSxxQkFDQSxTQUFBLFlBQUEsdUJBQUEsU0FBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLHFCQUFBLFNBQUEsR0FDQSxFQUFBLG1CQUdBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLFFBQUEsS0FBQSxNQUFBLGFBQUEsVUFBQSxDQUVBLElBQUEsR0FBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsS0FHQSxHQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsNkNBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLHVCQUNBLEdBQUEsTUFDQSxVQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLEdBQUEsS0FBQSxLQUFBLEtBQUEsUUFDQSxLQUFBLEVBQUEsR0FDQSxVQUFBLEVBQUEsT0FHQSxhQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFBQSxJQUNBLFdBQ0EsRUFBQSxnQ0FLQSxHQUFBLFVBQUEsV0FDQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsVUFBQSxFQUVBLEVBQUEsNEJBRUEsRUFBQSxXQUFBLDJCQUNBLEVBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsK0JDbEVBLElBQUEsV0FBQSwyQkFDQSxTQUFBLFlBQUEsdUJBQUEsU0FBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLG1CQUFBLGNBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxVQUFBLEVBQ0EsRUFBQSxPQUNBLFFBQUEsRUFDQSxTQUFBLEdBRUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxHQUNBLEVBQUEsYUFBQSxDQUVBLElBQUEsR0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLGVBQUEsUUFBQSxFQUFBLFVBQUEsSUFDQSxXQUNBLEVBQUEsOEJBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLDRCQUFBLE9BQ0EsRUFBQSxFQUFBLEdBQUEsS0FBQSw2QkFBQSxPQUNBLElBRUEsR0FBQSxHQUFBLEtBQUEsOERBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQ0EsRUFBQSxNQUNBLFFBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxtQkFBQSxRQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsbUJBQUEsT0FDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLGdCQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxtQkFBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEtBQUEsb0JBQUEsS0FBQSxXQUtBLElBQUEsSUFDQSxpQkFBQSxFQUNBLGlCQUFBLEVBQ0EsT0FBQSxFQUVBLEdBQUEsSUFDQSxXQUNBLEVBQUEsbUNBS0Esb0JBQUEsR0FBQSxVQUFBLEdBQUEsT0FDQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEtBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsT0FBQSxFQUNBLGFBQUEsUUFBQSxLQUFBLFVBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxXQUNBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxVQUFBLEdBQUEsU0FFQSxFQUFBLFdBQUEsMkJBQ0EsSUFFQSxFQUFBLE1BQUEsU0FBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsVUFBQSxHQUFBLFFBR0EsRUFBQSxlQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQ0EsRUFBQSxVQUFBLEtBRUEsRUFBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLFVBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxJQUFBLElBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxRQUFBLFNBQ0EsRUFBQSxVQUFBLElBRUEsSUFBQSxJQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsVUFBQSxVQUlBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDhCQzFHQSxJQUFBLFdBQUEsc0JBQ0EsU0FBQSxjQUFBLFdBQUEsZ0JBQUEsYUFBQSxpQkFBQSxZQUFBLEtBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTZDQSxHQTNDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLHFCQUFBLFNBQUEsR0FDQSxFQUFBLG1CQUdBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBRUEsT0FBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLE9BQ0EsUUFHQSxPQUFBLEdBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLE9BQ0EsV0FHQSxPQUFBLEdBQUEsRUFDQSxXQURBLFFBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUNBLEVBQUEsSUFDQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUEsS0FDQSxFQUFBLFNBQUEsRUFBQSxJQUNBLEVBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxPQUFBLEdBQUEsS0FBQSxHQUFBLE9BQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBR0EsTUFBQSxHQUFBLEVBQ0EsV0FEQSxRQUtBLEVBQUEsWUFBQSxFQUNBLEVBQUEsWUFFQSxhQUFBLE9BQ0EsSUFDQSxLQUFBLE1BQUEsYUFBQSxRQUFBLE9BQUEsSUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxNQUFBLGFBQUEsU0FFQSxNQUFBLElBS0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEtBaUJBLE9BaEJBLEdBQUEsR0FBQSxLQUFBLE1BQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEtBQ0EsSUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsT0FBQSxNQUFBLFlBQ0EsR0FBQSxNQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxHQUNBLFFBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUlBLEdBR0EsRUFBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxTQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxRQUNBLEVBQUEsRUFBQSxPQUFBLEVBR0EsT0FGQSxjQUFBLE9BQUEsS0FBQSxVQUFBLEVBQUEsU0FBQSxJQUNBLGFBQUEsV0FBQSxTQUFBLE9BQUEsd0JBQ0EsT0FBQSxLQUFBLE1BQUEsYUFBQSxRQUFBLFdBQUEsYUFBQSxZQUdBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHVDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsTUFDQSxFQUFBLEVBQUEsTUFLQSxPQUpBLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxjQUFBLHdDQUNBLEVBQUEsSUFBQSxlQUFBLG9CQUFBLE9BQUEsR0FBQSxJQUNBLFdBQ0EsRUFBQSx3QkFFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFdBQ0EsRUFBQSxrQ0FNQSxHQUFBLFVBQUEsV0FDQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLGdCQUNBLEVBQUEsT0FBQSxPQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsUUFFQSxFQUFBLHNCQUVBLEVBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsK0JDckpBLElBQUEsV0FBQSxzQkFBQSxTQUFBLFlBQUEsdUJBQ0EiLCJmaWxlIjoid3d3L2pzL2NvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCSU5VU01BWUEgTU9EVUxFXG4gKiBAYXV0aG9yIFBlZG94IDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cblxuXG4vLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ3N0YXJ0ZXInIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG5cbnZhciB2aWV3X3BhdGggPSAndmlld3MvJyxcbiAgcGNvbG9yID0gJyMxQzUzNkYnLFxuICBfYmltYXlfdXJsID0gJ2h0dHA6Ly9iaW51c21heWEuYmludXMuYWMuaWQnLFxuICBfYmltYXlfYXBpX3VybCA9ICdodHRwOi8vYXBwcy5iaW51c21heWEuYmludXMuYWMuaWQnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0JpbnVzTWF5YScsIFsnaW9uaWMnLCAnbGlzdFJvdXRlJywgJ0JpbnVzTWF5YUZhY3RvcnknXSlcblxuLnJ1bihmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgJHJvb3RTY29wZSwgJGlvbmljSGlzdG9yeSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsIEJpbnVzTWF5YSkge1xuXG4gICRyb290U2NvcGUubG9naW4gPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5pc2xvZ2luID09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IGxvY2FsU3RvcmFnZS5pc2xvZ2luKTtcbiAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IGZhbHNlO1xuICAkcm9vdFNjb3BlLmxvZ2luTmFtZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UuZm5hbWUgPT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBsb2NhbFN0b3JhZ2UuZm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgJHJvb3RTY29wZS5wcm9maWxlSW1hZ2UgPSB0eXBlb2YgbG9jYWxTdG9yYWdlLnByb2ZpbGVJbWFnZSA9PSBcInVuZGVmaW5lZFwiID8gZmFsc2UgOiBsb2NhbFN0b3JhZ2UucHJvZmlsZUltYWdlO1xuICBkZWxldGUgbG9jYWxTdG9yYWdlLmNvb2tpZTtcbiAgZGVsZXRlIGxvY2FsU3RvcmFnZS50ZW1wbG9naW47XG5cbiAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJHJvb3RTY29wZS5vbkxvYWRTdHlsZSA9IHtcbiAgICAgIG9wYWNpdHk6IDFcbiAgICB9O1xuICAgIC8vIEhpZGUgdGhlIGFjY2Vzc29yeSBiYXIgYnkgZGVmYXVsdCAocmVtb3ZlIHRoaXMgdG8gc2hvdyB0aGUgYWNjZXNzb3J5IGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAvLyBmb3IgZm9ybSBpbnB1dHMpXG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQpIHtcbiAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5oaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIodHJ1ZSk7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuU3RhdHVzQmFyKSB7XG4gICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgfVxuICB9KTtcblxuICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAkcm9vdFNjb3BlLmxhc3RVcGRhdGUgPSB0eXBlb2YgbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGUgPT09IFwidW5kZWZpbmVkXCIgPyBcIldoYXRldmVyXCIgOiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZTtcbiAgfTtcbiAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlKCk7XG4gICRyb290U2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIy8nO1xuICAgICRpb25pY0hpc3RvcnkuY2xlYXJIaXN0b3J5KCk7XG4gICAgJGlvbmljTmF2QmFyRGVsZWdhdGUuc2hvd0JhY2tCdXR0b24oZmFsc2UpO1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9O1xuXG4gICRyb290U2NvcGUuZ2V0UHJvZmlsZUltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgLyoqIHBlZm9ybSBhdmF0YXIgKiovXG4gICAgQmludXNNYXlhLmdldFByb2ZpbGVJbWFnZShcbiAgICAgIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnByb2ZpbGVJbWFnZSA9IGRvbmU7XG4gICAgICAgICRyb290U2NvcGUucHJvZmlsZUltYWdlID0gZG9uZTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbigpIHtcblxuICAgICAgfSk7XG4gIH07XG5cbiAgaWYgKCRyb290U2NvcGUubG9naW4pIHtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcvc2NoZWR1bGUnO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJy8nO1xuICB9XG59KVxuXG4uY29uZmlnKGZ1bmN0aW9uKCRpb25pY0NvbmZpZ1Byb3ZpZGVyKSB7XG4gICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnZpZXdzLmZvcndhcmRDYWNoZShmYWxzZSk7XG4gICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnZpZXdzLm1heENhY2hlKDApO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQmludXNNYXlhRmFjdG9yeScsIFtdKVxuXG4uZmFjdG9yeSgnQmludXNNYXlhJywgZnVuY3Rpb24oJHEsICRpb25pY1BvcHVwKSB7XG4gIHJldHVybiB7XG5cbiAgICBfYmltYXlfdXJsOiAnaHR0cDovL2JpbnVzbWF5YS5iaW51cy5hYy5pZCcsXG4gICAgX2JpbWF5X2FwaV91cmw6ICdodHRwOi8vYXBwcy5iaW51c21heWEuYmludXMuYWMuaWQnLFxuXG4gICAgaGVhZGVyczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgQ29va2llOiBsb2NhbFN0b3JhZ2UuY29va2llID8gbG9jYWxTdG9yYWdlLmNvb2tpZSA6IG51bGwsXG4gICAgICAgIE9yaWdpbjogX3QuX2JpbWF5X3VybCxcbiAgICAgICAgUmVmZXJlcjogX3QuX2JpbWF5X3VybFxuICAgICAgfTtcbiAgICB9LFxuICAgIGNoZWNrTG9naW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHZhciBsb2dpbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxvZ2luSWQpO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnRlbXBsb2dpbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIF90LmFwaSgnLycsICdnZXQnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICBpZiAoZC5jb2RlICE9PSAyMDApIHJlamVjdChkKTtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS50eHRVc2VySWQgPSBsb2dpbi5iaW51c2lkO1xuICAgICAgICAgICAgICBkYXRhLnR4dFBhc3N3b3JkID0gbG9naW4ucGFzc3dvcmQ7XG4gICAgICAgICAgICAgIGRhdGEuYnRuTG9naW4gPSBcIkxvZyBJbiBcIjtcbiAgICAgICAgICAgICAgcmV0dXJuIF90LmFwaSgnLycsICdwb3N0JywgZGF0YSk7XG4gICAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS50ZW1wbG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhcGk6IGZ1bmN0aW9uKGVuZHBvaW50LCBtZXRob2QsIHBhcmFtcywgbm9FbmRwb2ludCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHR5cGVvZiBub0VuZHBvaW50ICE9PSBcInVuZGVmaW5lZFwiID8gZmFsc2UgOiB0cnVlO1xuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5jb29raWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gX3QuX2dldENvb2tpZSgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKGVuZHBvaW50LCBtZXRob2QsIHBhcmFtcyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJnZXRcIikge1xuICAgICAgICAgICAgaHR0cGNsaWVudC5nZXQoKG5vRW5kcG9pbnQgPyBlbmRwb2ludCA6IF90Ll9iaW1heV91cmwgKyBlbmRwb2ludCksIHJlc29sdmUsIHJlamVjdCwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiBfdC5oZWFkZXJzKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodHRwY2xpZW50LnBvc3QoKG5vRW5kcG9pbnQgPyBlbmRwb2ludCA6IF90Ll9iaW1heV91cmwgKyBlbmRwb2ludCksIHBhcmFtcywgcmVzb2x2ZSwgcmVqZWN0LCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IF90LmhlYWRlcnMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZnJhbWU6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgdmFyIF90ID0gdGhpcyxcbiAgICAgICAgX3VybCA9ICcnO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gX3QuYXBpKHVybCwgJ2dldCcpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaSgkKGQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwMV9pZnJBcHBcIikuYXR0cihcInNyY1wiKSwgJ2dldCcpO1xuICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBfdXJsID0gJChkLnJlc3VsdCkuZmluZChcIiNpZnJBcHBcIikuYXR0cihcInNyY1wiKTtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoX3VybCwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHVybDogX3VybCxcbiAgICAgICAgICAgICAgcmVzdWx0OiBkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIF9nZXRDb29raWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaHR0cGNsaWVudC5nZXQoX3QuX2JpbWF5X3VybCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMjAwKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY29va2llID0gZGF0YS5oZWFkZXJbJ1NldC1Db29raWUnXTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwcm9tcHRQYXNzd29yZDogZnVuY3Rpb24obG9jYXRpb24sIHNjb3BlKSB7XG4gICAgICBzY29wZS5wcm9tcHRQYXNzID0ge307XG4gICAgICB2YXIgbXlQb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgICB0ZW1wbGF0ZTogJzxwIG5nLXNob3c9XCJwcm9tcHRQYXNzLmVycm9yXCI+SW5jb3JyZWN0IFBhc3N3b3JkPC9wPjxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cInByb21wdFBhc3MtZm9ybVwiIG5nLW1vZGVsPVwicHJvbXB0UGFzcy5wYXNzd29yZFwiPicsXG4gICAgICAgIHRpdGxlOiAnRW50ZXIgQmludXNtYXlhIFBhc3N3b3JkJyxcbiAgICAgICAgc3ViVGl0bGU6ICdQbGVhc2UgZW50ZXIgYmludXNtYXlhIHBhc3N3b3JkIHRvIGFjY2VzcyB0aGlzIHBhZ2UnLFxuICAgICAgICBzY29wZTogc2NvcGUsXG4gICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgdGV4dDogJ0NhbmNlbCcsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvJyArIGxvY2F0aW9uO1xuICAgICAgICAgICAgbXlQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIHRleHQ6ICc8Yj5FbnRlcjwvYj4nLFxuICAgICAgICAgIHR5cGU6ICdidXR0b24tcG9zaXRpdmUnLFxuICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgbXlwYXNzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCkucGFzc3dvcmQ7XG4gICAgICAgICAgICBpZiAobXlwYXNzID09IHNjb3BlLnByb21wdFBhc3MucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcyA9IHt9O1xuICAgICAgICAgICAgICBzY29wZS5pc0FsbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzLmVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcy5wYXNzd29yZCA9IFwiXCI7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9LFxuICAgIF9yZXF1ZXN0RXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgIH0sXG4gICAgZ3JvdXBpbmc6IGZ1bmN0aW9uKF9kYXRhKSB7XG4gICAgICBpZiAoX2RhdGEubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIG0gPSBbXSxcbiAgICAgICAgcCA9ICcnLFxuICAgICAgICBjID0gLTEsXG4gICAgICAgIGNoID0gMDtcbiAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICBpZiAocCA9PSBkLmRhdGUpIHtcbiAgICAgICAgICBtW2NdLmRhdGFbY2hdID0gZDtcbiAgICAgICAgICBjaCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoID0gMTtcbiAgICAgICAgICBjKys7XG4gICAgICAgICAgcCA9IGQuZGF0ZTtcbiAgICAgICAgICBtW2NdID0ge1xuICAgICAgICAgICAgZGF0ZTogZC5kYXRlLFxuICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICB9O1xuICAgICAgICAgIG1bY10uZGF0YVswXSA9IGQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG07XG4gICAgfVxuICB9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2xpc3RSb3V0ZScsIFtdKVxuXG4uY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaW5kZXgnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdsb2dpbi5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NjaGVkdWxlJywge1xuICAgICAgdXJsOiAnL3NjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzY2hlZHVsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdhYm91dC5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZvcnVtJywge1xuICAgICAgdXJsOiAnL2ZvcnVtJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdmb3J1bS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRm9ydW1Db250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NlcnZpY2VzJywge1xuICAgICAgdXJsOiAnL3NlcnZpY2VzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9pbmRleC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZXNDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ215Y2xhc3MnLCB7XG4gICAgICB1cmw6ICcvbXljbGFzcycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbXljbGFzcy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTXlDbGFzc0NvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnbXljbGFzc0RldGFpbCcsIHtcbiAgICAgIHVybDogJy9teWNsYXNzLWRldGFpbC86Y29kZScsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIGRhdGFzZXQ6IGZ1bmN0aW9uKCRxLCAkc3RhdGVQYXJhbXMsICRsb2NhdGlvbikge1xuICAgICAgICAgIHZhciBfZ290ID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICB2YXIgY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuICAgICAgICAgIGZvciAodmFyIGQgaW4gY2xhc3NEYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2xhc3NEYXRhW2RdLmNvZGUgPT0gJHN0YXRlUGFyYW1zLmNvZGUpIHtcbiAgICAgICAgICAgICAgX2dvdCA9IGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfZ290KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9nb3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL215Y2xhc3MnKS5yZXBsYWNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ215Y2xhc3NJbnNpZGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ015Q2xhc3NEZXRhaWxDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY2hlZHVsZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjaGVkdWxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY29yZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjb3JlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjb3JlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NvcmVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZpbmFuY2VTdGF0dXMnLCB7XG4gICAgICB1cmw6ICcvZmluYW5jZS1zdGF0dXMnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2JpbGxpbmcuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0ZpbmFuY2VDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fic2VuY2UnLCB7XG4gICAgICB1cmw6ICcvYWJzZW5jZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvYWJzZW5jZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnQWJzZW5jZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnY29taW5nJywge1xuICAgICAgdXJsOiAnL2NvbWluZycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnY29taW5nLmh0bWwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2NvbWluZ1wiKTtcbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdFeGFtU2NoZWR1bGVDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRodHRwLCAkbG9jYXRpb24sIFxuICBcdCRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXApIHtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hTY2hlZHVsZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IGRvbmU7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlcnJIYW5kbGUoZXJyKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hTY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgXHR2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBcdFx0cmV0dXJuIGRhdGE7XG4gICAgICBcdH07XG4gICAgICBcdGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2V4YW0uaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICB9KTsiLCIvKipcbiAqIEZpbmFuY2UgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0ZpbmFuY2VDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY1BvcHVwLCAkcSwgJGh0dHApIHtcblxuICAgICRzY29wZS5pc0FsbG93ID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoRmluYW5jZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBkb25lO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUudG9Nb25leSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoRmluYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgYmlsbGluZyA9IDA7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJpbGxpbmcgPSBwYXJzZUludCgkKGRhdGEpLmZpbmQoXCJ0YWJsZTplcSgwKSB0ciB0ZFwiKS5odG1sKCkubWF0Y2goL1swLTldKy8pWzBdKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIHZhciBoYXNpbCA9IFtdO1xuICAgICAgICAgICQoZGF0YSkuZmluZCgndGFibGUjcnB0VGFibGUgdHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgICAgIHZhciBodCA9ICQodGhpcykuZmluZCgndGQnKTtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICBoYXNpbC5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRlOiBodC5lcSgxKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICB0ZXJtOiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgZHVlOiBodC5lcSg0KS5odG1sKCksXG4gICAgICAgICAgICAgICAgY2hhcmdlOiBpc05hTihwYXJzZUludChodC5lcSg1KS5odG1sKCkpKSA9PT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg1KS5odG1sKCkpLFxuICAgICAgICAgICAgICAgIHBheW1lbnQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKSkpID09PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKS5tYXRjaCgvWzAtOV0rLykpLFxuICAgICAgICAgICAgICAgIHJlZnVuZDogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgZmluYWxfZGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGE6IEJpbnVzTWF5YS5ncm91cGluZyhoYXNpbCksXG4gICAgICAgICAgICBiaWxsaW5nOiBiaWxsaW5nLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZTogbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJylcbiAgICAgICAgICB9O1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5maW5hbmNlID0gSlNPTi5zdHJpbmdpZnkoZmluYWxfZGF0YSk7XG4gICAgICAgICAgcmV0dXJuIGZpbmFsX2RhdGE7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvZmluYW5jZS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgICAkKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDZfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICAgJChcIiNjdGwwMF9jcENvbnRlbnRfcnB0U3ViTWVudV9jdGwwM19saW5rU3ViTWVudVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5maW5hbmNlTGlzdCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmZpbmFuY2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICRzY29wZS5maW5hbmNlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmZpbmFuY2UpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICAgIEJpbnVzTWF5YS5wcm9tcHRQYXNzd29yZCgnc2VydmljZXMnLCAkc2NvcGUpO1xuICB9XG4pOyIsImFwcC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLFxuZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNQb3B1cCwgJHRpbWVvdXQsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCAkcm9vdFNjb3BlLCBCaW51c01heWEpIHtcblxuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSB0cnVlO1xuICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYXIoZmFsc2UpO1xuXG4gICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuXG4gICAgJGlvbmljSGlzdG9yeS5uZXh0Vmlld09wdGlvbnMoe1xuICAgICAgZGlzYWJsZUJhY2s6IHRydWVcbiAgICB9KTtcblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghKCRzY29wZS5iaW51c2lkICYmICRzY29wZS5wYXNzd29yZCkpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ1BsZWFzZSBJbnB1dCBCaW51c2lhbiBJRCBhbmQgUGFzc3dvcmQnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnb24tbG9hZGluZyc7XG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgQmludXNNYXlhLmFwaSgnLycsICdnZXQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgaWYoZC5jb2RlICE9PSAyMDApIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS50eHRVc2VySWQgPSAkc2NvcGUuYmludXNpZDtcbiAgICAgICAgICBkYXRhLnR4dFBhc3N3b3JkID0gJHNjb3BlLnBhc3N3b3JkO1xuICAgICAgICAgIGRhdGEuYnRuTG9naW4gPSBcIkxvZyBJbiBcIjtcbiAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdwb3N0JywgZGF0YSk7XG4gICAgICAgIH0sIGhhbmRsZUVycm9yKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSAkKGQucmVzdWx0KS5maW5kKFwiI2NvbnRlbnQgI3RvcGJhciAucmlnaHQgc3Ryb25nXCIpO1xuICAgICAgICAgIC8vIFdoZW4gU3VjY2Vzc1xuICAgICAgICAgIGlmKGQuY29kZSAhPT0gMjAwKVxuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZCk7XG4gICAgICAgICAgaWYobmFtZS5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZCwgJChkLnJlc3VsdCkuZmluZChcIiNsYmxFcnJvclwiKS50ZXh0KCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJIFRoaW5rIHRoYXQgbm90IGJlc3QgbWV0aG9kXG4gICAgICAgICAgICAgKiBAdG9kbyBtYWtlIGl0IGhhc2hcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxvZ2luSWQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGJpbnVzaWQ6ICRzY29wZS5iaW51c2lkLFxuICAgICAgICAgICAgICBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzbG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmZuYW1lID0gbmFtZS50ZXh0KCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgICRyb290U2NvcGUubG9naW5OYW1lID0gbG9jYWxTdG9yYWdlLmZuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvc2NoZWR1bGUnO1xuICAgICAgICAgICAgJGlvbmljSGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYWNrQnV0dG9uKGZhbHNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xuXG4gICAgICAgIHZhciBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uKGRhdGEsIHRleHQpIHtcbiAgICAgICAgICB0eXBlb2YgdGV4dCAhPT0gXCJ1bmRlZmluZWRcIiA/IHRleHQgOiBudWxsO1xuICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcbiAgICAgICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGV4dCA/IHRleHQgOiAnU29tZXRoaW5nIHdyb25nICEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuKTtcbiIsIi8qKlxuICogTXkgQ2xhc3MgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ015Q2xhc3NDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRsb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCkge1xuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gdHJ1ZTtcbiAgICAkaW9uaWNQbGF0Zm9ybS5vbkhhcmR3YXJlQmFja0J1dHRvbihmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuXG4gICAgdmFyIHJlZnJlc2hNeUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICApO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICB2YXIgX3JlRGF0YSA9IFtdLFxuICAgICAgICAgICAgICBfcHJvbWlzZXNZb3UgPSBbXSxcbiAgICAgICAgICAgICAgX3Byb21pc2VzQ291bnQgPSAwO1xuICAgICAgICAgICAgJChjLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxUZW9yaSB1bCBsaVwiKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGQpLmZpbmQoXCJhXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICByZWcgPSBuYW1lLm1hdGNoKC9eKC4qKS0oLiopIFxcKCguKilcXCkvaSk7XG4gICAgICAgICAgICAgIF9yZURhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5kZXhJdGVtOiBpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlZ1syXSxcbiAgICAgICAgICAgICAgICB1cmw6ICQoZCkuZmluZChcImFcIikuYXR0cignaHJlZicpLFxuICAgICAgICAgICAgICAgIGNvZGU6IHJlZ1sxXSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHJlZ1szXVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeShfcmVEYXRhKTtcbiAgICAgICAgICAgIHJlc29sdmUoX3JlRGF0YSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbXkgY2xhc3NcIik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaE15Q2xhc3MoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgaWYgKGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YSA9IGRvbmU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyckhhbmRsZShcIllvdSBkb24ndCBoYXZlIGFueSBjbGFzc1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgfSk7IiwiLyoqXG4gKiBNeSBDbGFzcyBJbnNpZGVcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdNeUNsYXNzRGV0YWlsQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkbG9jYXRpb24sXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgZGF0YXNldCkge1xuXG4gICAgJHNjb3BlLmNsYXNzRGF0YSA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLm15Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5teUNsYXNzKSA6IGZhbHNlKTtcbiAgICAkc2NvcGUuc3RhdGUgPSB7XG4gICAgICBpc0RhdGE6IGZhbHNlLFxuICAgICAgbG9hZGluZzogdHJ1ZVxuICAgIH07XG4gICAgJHNjb3BlLmRhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdO1xuICAgICRzY29wZS5pc1BhZ2VUb3BpYyA9IGZhbHNlO1xuXG4gICAgdmFyIGdldENsYXNzRGV0YWlsID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDApID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoX2JpbWF5X2FwaV91cmwgKyAnL0xNUy8nICsgdXJsLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdmFyIGRvbmUgPSBkLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBkZXNjX21haW4gPSAkKGRvbmUpLmZpbmQoXCIjZGVzY19jb3Vyc2VfZGVzYyA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICBkZXNjX2dyYWQgPSAkKGRvbmUpLmZpbmQoXCIjZGVzY19ncmFkX2NvbXBldGUgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgY291cnNlID0gW107XG5cbiAgICAgICAgICAgICQoZG9uZSkuZmluZChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3BubENvbnRlbnRUaGVvcnkgdGFibGUgdGJvZHkgdHJcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgY291cnNlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2Vzc2lvbjogcGFyc2VJbnQoJChkKS5maW5kKFwidGQ6ZXEoMCkgPiBzcGFuXCIpLmh0bWwoKSksXG4gICAgICAgICAgICAgICAgICBtb2RlOiAkKGQpLmZpbmQoXCJ0ZDplcSgxKSA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZDplcSgyKSA+IGFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgZGF0ZTogJChkKS5maW5kKFwidGQ6ZXEoMykgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIGxpbmtzOiAkKGQpLmZpbmQoXCJ0ZDplcSg0KSA+IGlucHV0XCIpLmF0dHIoJ25hbWUnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIF9yZURhdGEgPSB7XG4gICAgICAgICAgICAgIG1haW5fZGVzY3JpcHRpb246IGRlc2NfbWFpbixcbiAgICAgICAgICAgICAgZ3JhZF9kZXNjcmlwdGlvbjogZGVzY19ncmFkLFxuICAgICAgICAgICAgICBjb3Vyc2U6IGNvdXJzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc29sdmUoX3JlRGF0YSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gY291cnNlIHBhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnZXRDbGFzc0RldGFpbCgkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLnVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsID0gZGF0YTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UubXlDbGFzcyA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS5jbGFzc0RhdGEpO1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICB9XG5cbiAgICBpZiAoJHNjb3BlLmlzUGFnZVRvcGljID09PSBmYWxzZSkge1xuICAgICAgJHNjb3BlLmluZm9UYWIgPSAnYWN0aXZlJztcbiAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLmluZm9UYWIgPSAnJztcbiAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnYWN0aXZlJztcbiAgICB9XG5cbiAgICAkc2NvcGUuc3dpdGNoVGFiID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAkc2NvcGUuaXNQYWdlVG9waWMgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmluZm9UYWIgPSAnYWN0aXZlJztcbiAgICAgICAgJHNjb3BlLnRvcGljc1RhYiA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlID09PSAxKSB7XG4gICAgICAgICRzY29wZS5pc1BhZ2VUb3BpYyA9IHRydWU7XG4gICAgICAgICRzY29wZS5pbmZvVGFiID0gJyc7XG4gICAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnYWN0aXZlJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG5cbiAgfSk7XG4iLCIvKipcbiAqIFNjaGVkdWxlIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdTY2hlZHVsZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsICRpb25pY1BvcHVwLCAkdGltZW91dCwgJGlvbmljSGlzdG9yeSwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sIEJpbnVzTWF5YSwgJHEsICRodHRwKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gZmFsc2U7XG4gICAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IHRydWU7XG4gICAgJGlvbmljUGxhdGZvcm0ub25IYXJkd2FyZUJhY2tCdXR0b24oZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmdldFN0YXRlID0gZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHRvZGF5ID0gbW9tZW50KCk7XG4gICAgICAvL3RvZGF5XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9kYXknO1xuICAgICAgfSBlbHNlXG4gICAgICAvL3RvbW9ycm93XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheS5hZGQoMSwgJ2QnKSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9tb3Jyb3cnO1xuICAgICAgfSBlbHNlXG4gICAgICAvL2xhc3RlZFxuICAgICAgaWYgKG1vbWVudChkKSA8IHRvZGF5KSB7XG4gICAgICAgIHJldHVybiAnY29tcGxldG8nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdGUgPSBmdW5jdGlvbihkLCBtKSB7XG4gICAgICB2YXIgbm93ID0gbW9tZW50KCksXG4gICAgICAgIGdldE1vbWVudCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgZ2V0TGFzdCA9IG0uc3BsaXQoXCItXCIpWzFdLnNwbGl0KFwiOlwiKSxcbiAgICAgICAgICBnZXRIb3VyID0gcGFyc2VJbnQoZ2V0TGFzdFswXSksXG4gICAgICAgICAgZ2V0TWludXRlID0gcGFyc2VJbnQoZ2V0TGFzdFsxXSk7XG5cbiAgICAgICAgZ2V0TW9tZW50ID0gbW9tZW50KGQpLmhvdXIoZ2V0SG91cikubWludXRlKGdldE1pbnV0ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGdldE1vbWVudCA9IG1vbWVudChkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdldE1vbWVudCA8IG5vdykge1xuICAgICAgICByZXR1cm4gJ2NvbXBsZXRvJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzU2NoZWR1bGUgPSBmYWxzZTtcbiAgICAkc2NvcGUuc2NoZWR1bGUgPSBbXTtcblxuICAgIGlmIChsb2NhbFN0b3JhZ2UuamFkd2FsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuamFkd2FsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmlzU2NoZWR1bGUgPSB0cnVlO1xuICAgICAgICAgICRzY29wZS5zY2hlZHVsZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmphZHdhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0b0pzb24gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgaGFzaWwgPSBbXTtcbiAgICAgICQoZGF0YSkuZmluZCgndHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgdmFyIGh0ID0gJCh0aGlzKS5maW5kKCd0ZCcpO1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBodC5lcSgzKS5odG1sKCkubWF0Y2goLyguKiktKC4qKS8pO1xuICAgICAgICAgIGhhc2lsLnB1c2goe1xuICAgICAgICAgICAgZGF0ZTogaHQuZXEoMCkuaHRtbCgpLFxuICAgICAgICAgICAgdGltZTogaHQuZXEoMSkuaHRtbCgpLFxuICAgICAgICAgICAgc3RhdGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgIGNvdXJzZTogbWF0Y2hbMl0sXG4gICAgICAgICAgICBjb2RlOiBtYXRjaFsxXSxcbiAgICAgICAgICAgIG15Q2xhc3M6IGh0LmVxKDUpLmh0bWwoKSxcbiAgICAgICAgICAgIHJvb206IGh0LmVxKDYpLmh0bWwoKSxcbiAgICAgICAgICAgIGJ1aWxkaW5nOiBodC5lcSg3KS5odG1sKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaGFzaWw7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoSmFkd2FsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX3NjaGVkdWxlID0gJChkYXRhKS5maW5kKFwidGFibGVcIiksXG4gICAgICAgICAgICAgIHRvZGF5ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgwKS5odG1sKCkpLFxuICAgICAgICAgICAgICBuZXh0ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgxKS5odG1sKCkpLFxuICAgICAgICAgICAgICBza2VkdWwgPSB0b2RheS5jb25jYXQobmV4dCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuamFkd2FsID0gSlNPTi5zdHJpbmdpZnkoQmludXNNYXlhLmdyb3VwaW5nKHNrZWR1bCkpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0QgTU1NTSBZWVlZIGg6bW06c3MnKTtcbiAgICAgICAgICAgIHJldHVybiB7amFkd2FsOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpLCBsYXN0VXBkYXRlOiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9zY2hlZHVsZS5odG1sJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge30sXG4gICAgICAgICAgICAgICAgZCA9IGMucmVzdWx0O1xuICAgICAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLl9fRVZFTlRUQVJHRVQgPSAnY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRidG5TY2hlZHVsZSc7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvTXlDbGFzcy5hc3B4JywgJ3Bvc3QnLCBkYXRhLCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHNjaGVkdWxlIHBhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hKYWR3YWwoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUoKTtcbiAgICAgICAgaWYgKGRhdGEuamFkd2FsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICAgJHNjb3BlLnNjaGVkdWxlID0gZGF0YS5qYWR3YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJySGFuZGxlKFwiTm8gU2NoZWR1bGUgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgIH0sIGVyckhhbmRsZSk7XG5cbiAgICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gIH0pO1xuIiwiLyoqXG4gKiBTZXJ2aWNlcyBDb250cm9sbGVyXG4gKiBAYXV0aG9yIFBlZG94IDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdTZXJ2aWNlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICdCaW51c01heWEnLCAnJGlvbmljTmF2QmFyRGVsZWdhdGUnLFxuZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlKSB7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
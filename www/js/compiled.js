var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya","$timeout","$ionicPopup",function(t,e,n,a,o,i,r){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.profilePicture=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.StatusBar&&StatusBar.styleDefault(),localStorage.islogin&&l()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){r.confirm({title:"Confirm",template:"Are you sure to logout ?"}).then(function(t){return t?(localStorage.clear(),window.location.hash="#/",n.clearHistory(),a.showBackButton(!1),location.reload(),void 0):!1})};var l=function(){localStorage.profilePicture?e.profilePicture=localStorage.profilePicture:"undefined"==typeof httpclient||o.profilePicture().then(function(t){i(function(){localStorage.profilePicture=t,e.profilePicture=t})},function(){})};e.login?(localStorage.permission||(localStorage.permission=JSON.stringify({examScore:!0,absence:!0,finance:!0})),window.location.hash="/schedule"):window.location.hash="/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,n=localStorage.loginId?JSON.parse(localStorage.loginId):!1;return t(function(t,a){if(localStorage.templogin===!0)t(!0);else{if(n!==!1)return e.api("/","get").then(function(t){200!==t.code&&a(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=n.binusid,o.txtPassword=n.password,o.btnLogin="Log In ",e.api("/","post",o)},a).then(function(){localStorage.templogin=!0,t(!0)},a);a("please login")}})},api:function(e,n,a,o,i){var r=this,l={headers:r.headers()};return"undefined"!=typeof i&&(l.noRedirect=!0),"none"==navigator.connection.type?t(function(t,e){e("No internet connection")}):void 0===localStorage.cookie?r._getCookie().then(function(){return r.api(e,n,a)}):t(function(t,i){"get"===n?httpclient.get(o?e:r._bimay_url+e,function(e){t(e)},function(t){i(t)},l):httpclient.post(o?e:r._bimay_url+e,a,function(e){t(e)},function(t){i(t)},l)})},download:function(e,n){var a=this;return t(function(t,o){return a.api(a._bimay_api_url+"/LMS/"+e,"get",{},!0).then(function(t){var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o[n+".x"]=1,o[n+".y"]=1,a.api(a._bimay_api_url+"/LMS/"+e,"post",o,!0,!0)},o).then(function(t){o(t)},function(e){302==e.code?t(e):o(e)})})},frame:function(e){var n=this,a="";return t(function(t,o){return n.api(e,"get").then(function(t){return n.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return a=$(t.result).find("#ifrApp").attr("src"),n.api(a,"get",{},!0)},o).then(function(e){t({url:a,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,n){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):n(e)},n)})},profilePicture:function(){var e=this;return t(function(t,n){e.checkLogin().then(function(){return e.frame("/")},n).then(function(a){var o=$(a.result.result).find("#ctl00_cpRight_ucPhoto_imgProfilePic").attr("src");httpclient.image(e._bimay_api_url+"/home/"+o,function(e){t("data:image/jpeg;base64,"+e.result.replace(/(\r\n|\n|\r)/gm,""))},n,{headers:e.headers()})},n)})},promptPassword:function(n,a,o){a.promptPass={};var i=localStorage.code;return permission=JSON.parse(localStorage.permission),msgvar=i?"Secret Code":"Binusmaya Password",t(function(t,i){if(1==permission[o]||"undefined"==typeof o)var r=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter "+msgvar,subTitle:"",scope:a,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+n,r.close(),i("back")}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(e){var n=localStorage.code?localStorage.code:JSON.parse(localStorage.loginId).password;return n==a.promptPass.password?(a.promptPass={},a.isAllow=!0,t(!0),!0):(a.promptPass.error=!0,a.promptPass.password="",e.preventDefault(),void 0)}}]});else a.isAllow=!0,t(!0)})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],n="",a=-1,o=0;return t.forEach(function(t){n==t.date?(e[a].data[o]=t,o++):(o=1,a++,n=t.date,e[a]={date:t.date,data:[]},e[a].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,n){var a=!1,o=t.defer(),i="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var r in i)i[r].code==e.code&&(a=r);return a?o.resolve(a):n.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("settings",{url:"/settings",views:{"main-view":{templateUrl:view_path+"settings/index.html"}}}).state("permissions",{url:"/settings/permissions",views:{"main-view":{templateUrl:view_path+"settings/permissions.html",controller:"PermissionController"}}}).state("password",{url:"/settings/password",views:{"main-view":{templateUrl:view_path+"settings/password.html",controller:"PasswordController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("AbsenceController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){e.length>0&&(localStorage.absence=JSON.stringify(e),t.absence=e),t.$broadcast("scroll.refreshComplete"),f.hide()})},function(e){m(e),t.$broadcast("scroll.refreshComplete"),f.hide()})};var p=function(){return u(function(t,n){var a=function(t){function e(t){return/baik/.test(t)?"balanced":/warning/.test(t)?"calm":/maximum/.test(t)?"energized":/overlimit/.test(t)?"assertive":void 0}var n=[],a=0;return $(t).find("#rptTable tr").each(function(t){var o=$(this).find("td");t>0&&(o.length>=8?(n[a]={name:o.eq(0).html(),absence:[{max:o.eq(3).html(),total:o.eq(4).html(),component:o.eq(2).text(),status:e(o.eq(5).find("img").attr("src"))}]},a++):n[a-1].absence.push({max:o.eq(2).html(),total:o.eq(3).html(),component:o.eq(1).text(),status:e(o.eq(4).find("img").attr("src"))}))}),n};"undefined"==typeof httpclient?o.get("http://localhost:2505/absence.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return u.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl01_linkMenuStudent").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl02_linkSubMenu").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(e){t(a(e.result))},function(t){n(t)})})};e.promptPassword("services",t,"absence").then(function(){t.absence=!1,"undefined"!=typeof localStorage.absence?t.absence=JSON.parse(localStorage.absence):(f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())});var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScheduleController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){(!localStorage.examSchedule||e.length>0)&&(localStorage.examSchedule=JSON.stringify(e),t.examScheduleList=e),f.hide(),t.$broadcast("scroll.refreshComplete")})},function(e){m(e),f.hide(),t.$broadcast("scroll.refreshComplete")})};var p=function(){return u(function(t,n){var a=function(t){for(var n=[],a=0;a<t.length;a++){var o=$(t[a]).find("table:eq(2) tr td li").text();$(t[a]).find(".tablewithborder tr").each(function(t,e){t>0&&n.push({term:o,code:$(e).find("td").eq(0).text(),name:$(e).find("td").eq(1).text(),sks:$(e).find("td").eq(2).text(),date:$(e).find("td").eq(3).text(),hour:$(e).find("td").eq(4).text(),room:$(e).find("td").eq(5).text(),campus:$(e).find("td").eq(6).text(),className:$(e).find("td").eq(7).text(),seat:parseInt($(e).find("td").eq(8).text())})})}return e.grouping(_.sortBy(n,"date"))},i=[],r="";"undefined"==typeof httpclient?o.get("http://localhost:2505/exam.html").then(function(t){return i.push(t.data),o.get("http://localhost:2505/exam-practicum.html")},n).then(function(e){i.push(e.data),t(a(i))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return u.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return u.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl02_linkMenuStudent").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return r=t.result,e.api($(r).find(".itemContentService li:eq(0) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(1) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(2) a").attr("href"),"get",{},!0)},function(){return u.reject("can't access to main frame")}).then(function(e){i.push(e.result),t(a(i))},function(t){n(t)})})};t.examScheduleList=!1,localStorage.examSchedule?t.examScheduleList=JSON.parse(localStorage.examSchedule):(f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh());var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScoreController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f){var p=function(){return u(function(t,e){var n=function(t){var e=[];return $(t).find(".tablebordersmaller tr").each(function(n){n>0&&e.push({term:"Theory Score",year:$(t).find("#ctl00_cpContent_ddlPeriodYear").val(),smester:$(t).find("#ctl00_cpContent_ddlPeriodSemester").val(),name:$(this).find("td").eq(1).text(),data:[[{name:"TM",value:$(this).find("td").eq(5).find("a:first").text()},{name:"MID",value:$(this).find("td").eq(6).find("a:first").text()},{name:"Practicum",value:$(this).find("td").eq(7).find("a:first").text()}],[{name:"SKS",value:$(this).find("td").eq(2).text()},{name:"Final",value:$(this).find("td").eq(8).find("a:first").text()},{name:"Result",value:$(this).find("td").eq(9).find("a:first").text()}]]})}),$(t).find(".tablewithborder tr").each(function(n){n>0&&e.push({term:"Practicum Score",year:$(t).find("#ctl00_cpContent_ddlPeriodYear").val(),smester:$(t).find("#ctl00_cpContent_ddlPeriodSemester").val(),name:$(this).find("td").eq(1).text(),data:[[{name:"MID",value:$(this).find("td").eq(3).find("a:first").text()},{name:"Final",value:$(this).find("td").eq(4).find("a:first").text()},{name:"Project",value:$(this).find("td").eq(5).find("a:first").text()}],[{name:"Project",value:$(this).find("td").eq(6).find("a:first").text()},{name:" ",value:" "},{name:" ",value:" "}]]})}),e};"undefined"==typeof httpclient&&o.get("http://localhost:2505/exam-score.html").then(function(e){t(n(e.data))},e)})};t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){("undefined"!=typeof localStorage.examScore||e.length>0)&&(localStorage.examScore=JSON.stringify(e),t.examScore=e),t.$broadcast("scroll.refreshComplete"),f.hide()})},function(e){m(e),t.$broadcast("scroll.refreshComplete"),f.hide()})};var m=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};t.isAllow=!1,e.promptPassword("services",t,"examScore").then(function(){t.examScore=!1,"undefined"!=typeof localStorage.examScore?t.examScore=JSON.parse(localStorage.examScore):s.ready(function(){f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh()})})}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e,n,a,o,i){t.isAllow=!1,t.financeList=!1,t.doRefresh=function(){r().then(function(e){t.$applyAsync(function(){(!localStorage.finance||e.length>0)&&(localStorage.finance=JSON.stringify(e),t.financeList=e),i.hide(),t.$broadcast("scroll.refreshComplete")})},function(e){l(e),i.hide(),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var r=function(){return a(function(t,n){var i=function(t){var n=0;try{n=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(a){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:isNaN(parseInt(e.eq(5).html()))===!0?0:parseInt(e.eq(5).html()),payment:isNaN(parseInt(e.eq(6).html()))===!0?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:isNaN(parseInt(e.eq(7).html()))===!0?0:parseInt(e.eq(7).html())})});var i={data:e.grouping(o),billing:n,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return i};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(i(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return a.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){return a.reject("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){return a.reject("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){return a.reject("can't access to main frame")}).then(function(e){t(i(e.result))},function(){n("can't access to main frame")})})},l=function(e){n.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t,"finance").then(function(){localStorage.finance?(t.financeList=JSON.parse(localStorage.finance),console.log(t.financeList)):(i.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())})}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,n,a,o,i,r){i.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",a.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,r.api("/","get").then(function(e){200!==e.code&&n(e);var a={};return $($(e.result).serializeArray()).each(function(t,e){a[e.name]=e.value}),a.txtUserId=t.binusid,a.txtPassword=t.password,a.btnLogin="Log In ",r.api("/","post",a)},function(t){n(t)}).then(function(e){var r=$(e.result).find("#content #topbar .right strong");200!==e.code&&n(e),r.length<=0?n(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=r.text(),i.login=!0,i.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,location.reload(),a.clearHistory(),o.showBackButton(!1))},n);var n=function(n,a){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:a?a:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading","$http",function(t,e,n,a,o,i,r,l,c,s,u,d,f){l.noHeader=!1,l.leftMenu=!0,c.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var p=function(){return s(function(t,n){var a=function(t){var e=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,n){var a=$(n).find("a").html(),o=a.match(/^(.*)-(.*) \((.*)\)/i);e.push({indexItem:t,name:o[2],url:$(n).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(e),e};"undefined"==typeof httpclient?f.get("http://localhost:2505/myclass.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){return s.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return s.reject("can't access to main frame")}).then(function(e){t(a(e.result.result))},function(){n("can't access to my class")})})};t.doRefresh=function(){p().then(function(e){t.classData=e,d.hide(),t.$broadcast("scroll.refreshComplete")},function(t){e(t)});var e=function(e){d.hide(),u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}},t.classData||(d.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$http","$ionicScrollDelegate","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset","$timeout","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,d,f,p,c,m){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[p],t.showpage=0,t.linksSetAssigment=[],t.linksSet=[];var h=function(t){return d(function(n,a){var o=function(t){var e=$(t).find("#desc_course_desc > span").html(),n=$(t).find("#desc_grad_compete > span").html(),a=[],o=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&a.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlMainAssignment table tbody tr").each(function(t,e){0!==t&&o.push({term:"Main Assigment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlAdditionalAssignment2 table tbody tr").each(function(t,e){0!==t&&o.push({term:"Additional Assigment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),{main_description:e,grad_description:n,assigment:o.length>0?o:!1,course:a}};"undefined"==typeof httpclient?i.get("http://localhost:2505/myclass-inside.html").then(function(t){n(o(t.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){return d.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return d.reject("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){return d.reject("can't access to my class")}).then(function(t){n(o(t.result))},function(){a("can't access to course page")})})};"undefined"==typeof t.classData[p].detail?h(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),t.$broadcast("scroll.refreshComplete")},g):(t.state.loading=!1,t.state.isData=t.classData[p].detail),t.switchTab=function(e){t.showpage=e,setTimeout(function(){r.resize()},100)};var g=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};t.downloadCourse=function(e,n){t.linksSet[e]={isLoading:!0},v(n).then(function(n){window.open(n,"_system"),t.linksSet[e]={isLoading:!1}},function(){t.linksSet[e]={isLoading:!1}})},t.downloadAssigment=function(e,n){t.linksSetAssigment[e]={isLoading:!0},v(n).then(function(n){window.open(n,"_system"),t.linksSetAssigment[e]={isLoading:!1}},function(){t.linksSetAssigment[e]={isLoading:!1}})};var v=function(n){return d(function(a,o){e.checkLogin().then(function(){return e.api("/","get")},function(){return d.reject("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return d.reject("can't access to main frame")}).then(function(){return e.download(t.classData[p].url,n)},function(){return d.reject("can't access to my class")}).then(function(t){a(t.header.Location)},function(t){o(t)})})};t.refresh=function(){m.show({template:'<ion-spinner icon="android" class="overlay-spinner"></ion-spinner> Loading...'}),h(t.classData[p].url).then(function(e){console.log(e),t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),m.hide(),r.resize()},function(t){m.hide(),g(t)})}}]),app.controller("PasswordController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e,n){t.input={},t.change=function(){var e=JSON.parse(localStorage.loginId),a=localStorage.code?localStorage.code:e.password;t.input.oldPassword!==a?n.alert({title:"Oops !",template:"Incorrect Code"}):t.input.newPassword&&t.input.rePassword?t.input.newPassword!==t.input.rePassword?n.alert({title:"Oops !",template:"re code is not same as new code"}):(n.alert({title:"Success !",template:"Code has been changed"}),localStorage.code=t.input.newPassword,t.input={}):n.alert({title:"Oops !",template:"Please Insert new Code"})}}]),app.controller("PermissionController",["$scope","BinusMaya","$ionicPopup","$q","$http","$ionicLoading",function(t,e){t.isAllow=!1,t.permission=JSON.parse(localStorage.permission),t.change=function(){localStorage.permission=JSON.stringify(t.permission)},e.promptPassword("settings",t).then(function(){})}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s){o.noHeader=!1,o.leftMenu=!0,i.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var n=moment(),a=null;try{var o=e.split("-")[1].split(":"),i=parseInt(o[0]),r=parseInt(o[1]);a=moment(t).hour(i).minute(r)}catch(l){a=moment(t)}return n>a?"completo":void 0},t.isSchedule=!1,t.schedule=[];var u=function(t){var e=[];return $(t).find("tr").each(function(t){var n=$(this).find("td");if(t>0){var a=n.eq(3).html().match(/(.*)-(.*)/);e.push({date:n.eq(0).html(),time:n.eq(1).html(),state:n.eq(2).html(),course:a[2],code:a[1],myClass:n.eq(5).html(),room:n.eq(6).html(),building:n.eq(7).html()})}}),e},d=function(){return l(function(t,e){var n=function(t){var e=$(t).find("table"),n=u(e.eq(0).html()),a=u(e.eq(1).html()),o=n.concat(a),i=r.grouping(o);return i.length>0&&(localStorage.jadwal=JSON.stringify(i)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:i,lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?c.get("http://localhost:2505/schedule.html").then(function(e){t(n(e.data))},e):r.checkLogin().then(function(){return r.api("/","get")},function(){return l.reject("can't re-auth your account")}).then(function(t){return r.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){return l.reject("can't access to main frame")}).then(function(t){var e={},n=t.result;return $($(n.result).serializeArray()).each(function(t,n){e[n.name]=n.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",r.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){return l.reject("can't access to schedule page")}).then(function(e){t(n(e.result))},function(t){e(t)})})};if(t.doRefresh=function(){d().then(function(e){s.hide(),t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),t.isSchedule=!0,t.schedule=e.jadwal},function(t){n(t)});var n=function(n){s.hide(),e.alert({title:"Oops !",template:n}),t.$broadcast("scroll.refreshComplete")}},localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(f){}else i.ready(function(){s.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh()})}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvYWJzZW5jZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvZXhhbVNjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9leGFtU2NvcmUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2ZpbmFuY2UuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9teWNsYXNzLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9teWNsYXNzSW5zaWRlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9wYXNzd29yZC5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGVybWlzc2lvbi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2NoZWR1bGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NlcnZpY2VzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxXQUFBLFNBQ0EsT0FBQSxVQUNBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxJQUFBLFFBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxxQkFFQSxLQUFBLGlCQUFBLGFBQUEsZ0JBQUEsdUJBQUEsWUFBQSxXQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsTUFBQSxtQkFBQSxjQUFBLFNBQUEsRUFBQSxhQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxnQkFBQSxFQUNBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLE1BQUEsS0FBQSxhQUFBLE1BQUEsb0JBQ0EsY0FBQSxhQUNBLGNBQUEsVUFFQSxFQUFBLE1BQUEsV0FDQSxFQUFBLGFBQ0EsUUFBQSxHQU9BLE9BQUEsV0FDQSxVQUFBLGVBRUEsYUFBQSxTQUNBLE1BSUEsRUFBQSxjQUFBLFdBQ0EsRUFBQSxXQUFBLG1CQUFBLGNBQUEsV0FBQSxXQUFBLGFBQUEsWUFFQSxFQUFBLGdCQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsU0FDQSxNQUFBLFVBQ0EsU0FBQSw2QkFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLElBQ0EsYUFBQSxRQUNBLE9BQUEsU0FBQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FDQSxTQUFBLFNBSkEsU0FNQSxJQUtBLElBQUEsR0FBQSxXQUVBLGFBQUEsZUFDQSxFQUFBLGVBQUEsYUFBQSxlQUVBLG1CQUFBLGFBRUEsRUFBQSxpQkFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFdBQ0EsYUFBQSxlQUFBLEVBQ0EsRUFBQSxlQUFBLEtBRUEsY0FRQSxHQUFBLE9BQ0EsYUFBQSxhQUNBLGFBQUEsV0FBQSxLQUFBLFdBQ0EsV0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEtBR0EsT0FBQSxTQUFBLEtBQUEsYUFFQSxPQUFBLFNBQUEsS0FBQSxPQUlBLFFBQUEsdUJBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxjQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsS0NyR0EsU0FBQSxPQUFBLHVCQUVBLFFBQUEsYUFBQSxLQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsT0FFQSxXQUFBLCtCQUNBLGVBQUEsb0NBRUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLFFBQ0EsT0FBQSxhQUFBLE9BQUEsYUFBQSxPQUFBLEtBQ0EsT0FBQSxFQUFBLFdBQ0EsUUFBQSxFQUFBLGFBR0EsV0FBQSxXQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsYUFBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxhQUFBLGFBQUEsRUFDQSxHQUFBLE9BQ0EsQ0FBQSxHQUFBLEtBQUEsRUFHQSxNQUFBLEdBQUEsSUFBQSxJQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsS0FPQSxPQU5BLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxJQUFBLE9BQUEsSUFDQSxHQUNBLEtBQUEsV0FDQSxhQUFBLFdBQUEsRUFDQSxHQUFBLElBQ0EsRUFqQkEsR0FBQSxvQkFxQkEsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FHQSxHQUNBLFFBQUEsRUFBQSxVQUtBLE9BSEEsbUJBQUEsS0FDQSxFQUFBLFlBQUEsR0FFQSxRQUFBLFVBQUEsV0FBQSxLQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSw0QkFFQSxTQUFBLGFBQUEsT0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsSUFDQSxTQUFBLEdBQ0EsRUFBQSxJQUNBLEdBRUEsV0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLElBQ0EsU0FBQSxHQUNBLEVBQUEsSUFDQSxNQU1BLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsZUFBQSxRQUFBLEVBQUEsVUFBQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGVBQUEsUUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLElBQ0EsU0FBQSxHQUNBLEtBQUEsRUFBQSxLQUNBLEVBQUEsR0FFQSxFQUFBLFFBTUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxxQkFBQSxLQUFBLE9BQUEsUUFDQSxHQUNBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLFdBQUEsS0FBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLFVBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQ0EsSUFBQSxFQUNBLE9BQUEsS0FFQSxNQUlBLFdBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsV0FBQSxJQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE1BQ0EsYUFBQSxPQUFBLEVBQUEsT0FBQSxjQUNBLEdBQUEsSUFFQSxFQUFBLElBRUEsTUFHQSxlQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsTUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsd0NBQUEsS0FBQSxNQUNBLFlBQUEsTUFBQSxFQUFBLGVBQUEsU0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLDBCQUFBLEVBQUEsT0FBQSxRQUFBLGlCQUFBLE1BQ0EsR0FFQSxRQUFBLEVBQUEsYUFFQSxNQUdBLGVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLGFBQUEsSUFHQSxPQUZBLFlBQUEsS0FBQSxNQUFBLGFBQUEsWUFDQSxPQUFBLEVBQUEsY0FBQSxxQkFDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxXQUFBLElBQUEsbUJBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLFNBQUEscUlBQ0EsTUFBQSxTQUFBLE9BQ0EsU0FBQSxHQUNBLE1BQUEsRUFDQSxVQUNBLEtBQUEsU0FDQSxNQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsUUFDQSxFQUFBLFdBR0EsS0FBQSxlQUNBLEtBQUEsa0JBQ0EsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLGFBQUEsS0FBQSxhQUFBLEtBQUEsS0FBQSxNQUFBLGFBQUEsU0FBQSxRQUNBLE9BQUEsSUFBQSxFQUFBLFdBQUEsVUFDQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEVBQ0EsR0FBQSxJQUNBLElBRUEsRUFBQSxXQUFBLE9BQUEsRUFDQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsaUJBRkEsaUJBUUEsR0FBQSxTQUFBLEVBQ0EsR0FBQSxNQUlBLGNBQUEsYUFHQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUNBLFFBRUEsSUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxDQWdCQSxPQWZBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUNBLE1BRUEsRUFBQSxFQUNBLElBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxLQUNBLFNBRUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxLQUdBLE9DcE9BLFFBQUEsT0FBQSxnQkFFQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQ0EsTUFBQSxTQUNBLElBQUEsSUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGlCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxnQkFDQSxXQUFBLHlCQUlBLE1BQUEsU0FDQSxJQUFBLFNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsYUFDQSxXQUFBLHNCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxzQkFDQSxXQUFBLHlCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxlQUNBLFdBQUEsd0JBSUEsTUFBQSxpQkFDQSxJQUFBLHdCQUNBLFNBQ0EsU0FBQSxLQUFBLGVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBUUEsT0FMQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxZQUFBLFVBRUEsRUFBQSxXQUdBLE9BQ0EsYUFDQSxZQUFBLFVBQUEscUJBQ0EsV0FBQSw4QkFJQSxNQUFBLGdCQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSw4QkFDQSxXQUFBLDZCQUlBLE1BQUEsYUFDQSxJQUFBLGNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSwyQkFDQSxXQUFBLDBCQUlBLE1BQUEsaUJBQ0EsSUFBQSxrQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxXQUNBLElBQUEsV0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxZQUNBLElBQUEsWUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLDBCQUlBLE1BQUEsZUFDQSxJQUFBLHdCQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsNEJBQ0EsV0FBQSwyQkFJQSxNQUFBLFlBQ0EsSUFBQSxxQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHlCQUNBLFdBQUEseUJBSUEsTUFBQSxVQUNBLElBQUEsVUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGtCQUtBLEVBQUEsVUFBQSxjQzFKQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsV0FDQSxFQUFBLE9BQUEsSUFDQSxhQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFBQSxRQUFBLEdBRUEsRUFBQSxXQUFBLDBCQUNBLEVBQUEsVUFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLFNBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBRUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxPQUFBLEtBQUEsR0FDQSxXQUNBLFVBQUEsS0FBQSxHQUNBLE9BQ0EsVUFBQSxLQUFBLEdBQ0EsWUFDQSxZQUFBLEtBQUEsR0FDQSxZQURBLE9BUkEsR0FBQSxNQUFBLEVBQUEsQ0FvQ0EsT0F4QkEsR0FBQSxHQUFBLEtBQUEsZ0JBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEtBQ0EsR0FBQSxJQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsSUFDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsVUFDQSxJQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLFVBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLEtBQUEsV0FHQSxLQUVBLEVBQUEsRUFBQSxHQUFBLFFBQUEsTUFDQSxJQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLFVBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLEtBQUEsYUFLQSxFQUVBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHNDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLE1BQUEsR0FBQSxPQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsUUFBQSxLQUFBLDZEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGlEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFNBQUEsR0FDQSxFQUFBLE9BTUEsR0FBQSxlQUFBLFdBQUEsRUFBQSxXQUNBLEtBQUEsV0FDQSxFQUFBLFNBQUEsRUFDQSxtQkFBQSxjQUFBLFFBQ0EsRUFBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBRUEsRUFBQSxNQUFBLFlBQUEsNEJBQUEsWUFBQSxJQUNBLEVBQUEsY0FJQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSw4QkMzSEEsSUFBQSxXQUFBLDBCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFFBQUEsWUFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLGFBQ0EsYUFBQSxjQUFBLEVBQUEsT0FBQSxLQUVBLGFBQUEsYUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLGlCQUFBLEdBRUEsRUFBQSxPQUNBLEVBQUEsV0FBQSw2QkFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLFdBQUEsNEJBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSx3QkFBQSxNQUNBLEdBQUEsRUFBQSxJQUFBLEtBQUEsdUJBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsRUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLElBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxZQUtBLE1BQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLFVBRUEsS0FDQSxFQUFBLEVBQ0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsbUNBQ0EsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSw4Q0FDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLE1BQUEsR0FBQSxPQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsUUFBQSxLQUFBLDZEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxLQUFBLFFBQUEsVUFBQSxJQUNBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsRUFBQSxRQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxLQUFBLFFBQUEsVUFBQSxJQUNBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsRUFBQSxRQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxLQUFBLFFBQUEsVUFBQSxJQUNBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsS0FDQSxTQUFBLEdBQ0EsRUFBQSxPQU1BLEdBQUEsa0JBQUEsRUFDQSxhQUFBLGFBQ0EsRUFBQSxpQkFBQSxLQUFBLE1BQUEsYUFBQSxlQUVBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLFlBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsOEJDNUhBLElBQUEsV0FBQSx1QkFDQSxTQUFBLFlBQUEsdUJBQUEsU0FBQSxRQUFBLFlBQUEsZUFBQSxXQUFBLGFBQUEsaUJBQUEsS0FBQSxjQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEtBZ0VBLE9BL0RBLEdBQUEsR0FBQSxLQUFBLDBCQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxlQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsTUFDQSxRQUFBLEVBQUEsR0FBQSxLQUFBLHNDQUFBLE1BQ0EsS0FBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLFFBRUEsS0FBQSxLQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxNQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFNBRUEsS0FBQSxZQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFdBRUEsS0FBQSxNQUNBLE1BQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsU0FFQSxLQUFBLFFBQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsU0FFQSxLQUFBLFNBQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsY0FPQSxFQUFBLEdBQUEsS0FBQSx1QkFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsa0JBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxNQUNBLFFBQUEsRUFBQSxHQUFBLEtBQUEsc0NBQUEsTUFDQSxLQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsUUFFQSxLQUFBLE1BQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsU0FFQSxLQUFBLFFBQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsU0FFQSxLQUFBLFVBQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsV0FFQSxLQUFBLFVBQ0EsTUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLFdBQUEsU0FFQSxLQUFBLElBQ0EsTUFBQSxNQUVBLEtBQUEsSUFDQSxNQUFBLFdBTUEsRUFFQSxvQkFBQSxhQUNBLEVBQUEsSUFBQSx5Q0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEtBT0EsR0FBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsWUFDQSxtQkFBQSxjQUFBLFdBQUEsRUFBQSxPQUFBLEtBQ0EsYUFBQSxVQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsVUFBQSxHQUVBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLFVBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsMEJBQ0EsRUFBQSxTQUlBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDBCQUdBLEdBQUEsU0FBQSxFQUNBLEVBQUEsZUFBQSxXQUFBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsRUFBQSxXQUFBLEVBQ0EsbUJBQUEsY0FBQSxVQUNBLEVBQUEsVUFBQSxLQUFBLE1BQUEsYUFBQSxXQUVBLEVBQUEsTUFBQSxXQUNBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLG1CQ25IQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLGNBQUEsS0FBQSxRQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxhQUFBLEVBRUEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsYUFDQSxhQUFBLFNBQUEsRUFBQSxPQUFBLEtBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsWUFBQSxHQUVBLEVBQUEsT0FDQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDZCQUdBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsSUFDQSxNQUFBLEdBQUEsUUFBQSxHQUFBLFFBQUEsc0JBQUEsT0FDQSxNQUFBLEdBQ0EsTUFBQSxJQUlBLElBQUEsR0FBQSxXQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUNBLEtBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLHFCQUFBLE9BQUEsTUFBQSxVQUFBLElBQ0EsTUFBQSxJQUNBLEdBQUEsS0FDQSxHQUFBLEdBQUEsS0FBQSxxQkFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxHQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsUUFBQSxNQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFBQSxFQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxPQUFBLE1BQUEsV0FDQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFdBSUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxTQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsU0FBQSxPQUFBLHVCQUdBLE9BQUEsR0FHQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSxzQ0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2REFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxpREFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsbUNBTUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDBCQUdBLEdBQUEsZUFBQSxXQUFBLEVBQUEsV0FDQSxLQUFBLFdBQ0EsYUFBQSxTQUNBLEVBQUEsWUFBQSxLQUFBLE1BQUEsYUFBQSxTQUNBLFFBQUEsSUFBQSxFQUFBLGVBRUEsRUFBQSxNQUFBLFlBQUEsNEJBQUEsWUFBQSxJQUNBLEVBQUEsa0JDOUhBLElBQUEsV0FBQSxtQkFDQSxTQUFBLGNBQUEsV0FBQSxnQkFBQSx1QkFBQSxhQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxFQUNBLEVBQUEsU0FBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQUVBLEVBQUEsaUJBQ0EsYUFBQSxJQUdBLEVBQUEsT0FBQSxXQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsU0FLQSxDQUNBLEVBQUEsV0FBQSxhQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsSUFBQSxJQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsS0FPQSxPQU5BLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxJQUFBLE9BQUEsSUFDQSxTQUFBLEdBQ0EsRUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGlDQUVBLE9BQUEsRUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxhQUFBLFNBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBTUEsYUFBQSxRQUFBLEtBQUEsV0FDQSxRQUFBLEVBQUEsUUFDQSxTQUFBLEVBQUEsV0FHQSxhQUFBLFNBQUEsRUFDQSxhQUFBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsVUFBQSxhQUFBLE1BQUEsY0FDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxTQUFBLFNBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsS0FHQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsRUFBQSxFQUFBLDJCQTVEQSxHQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsOENDYkEsSUFBQSxXQUFBLHFCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFlBQUEsZUFBQSxXQUFBLGFBQUEsaUJBQUEsS0FBQSxjQUFBLGdCQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsbUJBR0EsRUFBQSxVQUFBLG1CQUFBLGNBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxVQUFBLENBRUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxLQWFBLE9BWkEsR0FBQSxHQUFBLEtBQUEsNkNBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLHVCQUNBLEdBQUEsTUFDQSxVQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLEdBQUEsS0FBQSxLQUFBLEtBQUEsUUFDQSxLQUFBLEVBQUEsR0FDQSxVQUFBLEVBQUEsT0FHQSxhQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFHQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSxzQ0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxNQUFBLEdBQUEsT0FBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLE1BQUEsR0FBQSxPQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsVUFDQSxXQUNBLEVBQUEsZ0NBTUEsR0FBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDJCQUNBLFNBQUEsR0FDQSxFQUFBLElBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDRCQUlBLEVBQUEsWUFDQSxFQUFBLE1BQUEsWUFBQSw0QkFBQSxZQUFBLElBQ0EsRUFBQSxnQkNqRkEsSUFBQSxXQUFBLDJCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFlBQUEsUUFBQSx1QkFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsVUFBQSxXQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsRUFDQSxFQUFBLE9BQ0EsUUFBQSxFQUNBLFNBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxTQUFBLEVBRUEsRUFBQSxxQkFDQSxFQUFBLFdBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsNEJBQUEsT0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLDZCQUFBLE9BQ0EsS0FDQSxJQTJDQSxPQTFDQSxHQUFBLEdBQUEsS0FBQSw4REFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsUUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLFFBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxtQkFBQSxPQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsZ0JBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxvQkFBQSxLQUFBLFlBSUEsRUFBQSxHQUFBLEtBQUEsK0RBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsaUJBQ0EsUUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLFFBQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLFFBQUEsR0FBQSxFQUNBLFFBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLFFBQUEsR0FBQSxFQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxlQUFBLEtBQUEsWUFJQSxFQUFBLEdBQUEsS0FBQSxzRUFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSx1QkFDQSxRQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsUUFDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsUUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLGVBQUEsS0FBQSxhQU1BLGlCQUFBLEVBQ0EsaUJBQUEsRUFDQSxVQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFDQSxPQUFBLEdBSUEsb0JBQUEsWUFDQSxFQUFBLElBQUEsNkNBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsTUFBQSxHQUFBLE9BQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsZUFBQSxRQUFBLEVBQUEsVUFBQSxJQUNBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsOEJBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsbUNBTUEsb0JBQUEsR0FBQSxVQUFBLEdBQUEsT0FDQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEtBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsT0FBQSxFQUNBLGFBQUEsUUFBQSxLQUFBLFVBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxXQUNBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxVQUFBLEdBQUEsU0FFQSxFQUFBLFdBQUEsMkJBQ0EsSUFFQSxFQUFBLE1BQUEsU0FBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsVUFBQSxHQUFBLFFBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxXQUFBLFdBQ0EsRUFBQSxVQUNBLEtBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsMEJBR0EsR0FBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxJQUFBLFdBQUEsR0FDQSxFQUFBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsT0FBQSxLQUFBLEVBQUEsV0FDQSxFQUFBLFNBQUEsSUFBQSxXQUFBLElBQ0EsV0FDQSxFQUFBLFNBQUEsSUFBQSxXQUFBLE1BSUEsRUFBQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGtCQUFBLElBQUEsV0FBQSxHQUNBLEVBQUEsR0FDQSxLQUFBLFNBQUEsR0FDQSxPQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsa0JBQUEsSUFBQSxXQUFBLElBQ0EsV0FDQSxFQUFBLGtCQUFBLElBQUEsV0FBQSxLQUtBLElBQUEsR0FBQSxTQUFBLEdBR0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsTUFBQSxHQUFBLE9BQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxNQUFBLEdBQUEsT0FBQSxnQ0FFQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxVQUFBLEdBQUEsSUFBQSxJQUNBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsOEJBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQUEsV0FDQSxTQUFBLEdBQ0EsRUFBQSxPQUtBLEdBQUEsUUFBQSxXQUVBLEVBQUEsTUFBQSxTQUFBLGtGQUVBLEVBQUEsRUFBQSxVQUFBLEdBQUEsS0FDQSxLQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxPQUFBLEVBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsR0FBQSxTQUVBLEVBQUEsT0FDQSxFQUFBLFVBQ0EsU0FBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLFNDbE5BLElBQUEsV0FBQSxzQkFDQSxTQUFBLFlBQUEsY0FBQSxLQUFBLFFBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFNBRUEsRUFBQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsTUFBQSxhQUFBLFNBQ0EsRUFBQSxhQUFBLEtBQUEsYUFBQSxLQUFBLEVBQUEsUUFFQSxHQUFBLE1BQUEsY0FBQSxFQUNBLEVBQUEsT0FBQSxNQUFBLFNBQUEsU0FBQSxtQkFDQSxFQUFBLE1BQUEsYUFBQSxFQUFBLE1BQUEsV0FFQSxFQUFBLE1BQUEsY0FBQSxFQUFBLE1BQUEsV0FDQSxFQUFBLE9BQUEsTUFBQSxTQUFBLFNBQUEscUNBRUEsRUFBQSxPQUFBLE1BQUEsWUFBQSxTQUFBLDBCQUNBLGFBQUEsS0FBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLFVBTkEsRUFBQSxPQUFBLE1BQUEsU0FBQSxTQUFBLCtCQ1pBLElBQUEsV0FBQSx3QkFDQSxTQUFBLFlBQUEsY0FBQSxLQUFBLFFBQUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEtBQUEsTUFBQSxhQUFBLFlBRUEsRUFBQSxPQUFBLFdBQ0EsYUFBQSxXQUFBLEtBQUEsVUFBQSxFQUFBLGFBR0EsRUFBQSxlQUFBLFdBQUEsR0FDQSxLQUFBLGlCQ1ZBLElBQUEsV0FBQSxzQkFDQSxTQUFBLGNBQUEsV0FBQSxnQkFBQSxhQUFBLGlCQUFBLFlBQUEsS0FBQSxRQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLHFCQUFBLFNBQUEsR0FDQSxFQUFBLG1CQUdBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBRUEsT0FBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLE9BQ0EsUUFHQSxPQUFBLEdBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLE9BQ0EsV0FHQSxPQUFBLEdBQUEsRUFDQSxXQURBLFFBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUNBLEVBQUEsSUFDQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUEsS0FDQSxFQUFBLFNBQUEsRUFBQSxJQUNBLEVBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxPQUFBLEdBQUEsS0FBQSxHQUFBLE9BQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBR0EsTUFBQSxHQUFBLEVBQ0EsV0FEQSxRQUtBLEVBQUEsWUFBQSxFQUNBLEVBQUEsV0FFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsS0FpQkEsT0FoQkEsR0FBQSxHQUFBLEtBQUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxJQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxPQUFBLE1BQUEsWUFDQSxHQUFBLE1BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBSUEsR0FHQSxFQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxFQUtBLE9BSkEsR0FBQSxPQUFBLElBQ0EsYUFBQSxPQUFBLEtBQUEsVUFBQSxJQUVBLGFBQUEsV0FBQSxTQUFBLE9BQUEsd0JBRUEsT0FBQSxFQUFBLFdBQUEsYUFBQSxZQUlBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHVDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLE1BQUEsR0FBQSxPQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsTUFBQSxHQUFBLE9BQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxNQUNBLEVBQUEsRUFBQSxNQUtBLE9BSkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLGNBQUEsd0NBQ0EsRUFBQSxJQUFBLGVBQUEsb0JBQUEsT0FBQSxHQUFBLElBQ0EsV0FDQSxNQUFBLEdBQUEsT0FBQSxtQ0FFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFNBQUEsR0FDQSxFQUFBLE9BNEJBLElBdEJBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsV0FBQSwwQkFDQSxFQUFBLGdCQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsU0FBQSxHQUNBLEVBQUEsSUFHQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsNEJBSUEsYUFBQSxPQUNBLElBQ0EsS0FBQSxNQUFBLGFBQUEsUUFBQSxPQUFBLElBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxhQUFBLFNBRUEsTUFBQSxRQUlBLEdBQUEsTUFBQSxXQUNBLEVBQUEsTUFBQSxZQUFBLDRCQUFBLFlBQUEsSUFDQSxFQUFBLGlCQy9KQSxJQUFBLFdBQUEsc0JBQUEsU0FBQSxZQUFBLHVCQUNBIiwiZmlsZSI6Ind3dy9qcy9jb21waWxlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQklOVVNNQVlBIE1PRFVMRVxuICogQGF1dGhvciBQZWRveCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5cblxuLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdzdGFydGVyJyBpcyB0aGUgbmFtZSBvZiB0aGlzIGFuZ3VsYXIgbW9kdWxlIGV4YW1wbGUgKGFsc28gc2V0IGluIGEgPGJvZHk+IGF0dHJpYnV0ZSBpbiBpbmRleC5odG1sKVxuLy8gdGhlIDJuZCBwYXJhbWV0ZXIgaXMgYW4gYXJyYXkgb2YgJ3JlcXVpcmVzJ1xuXG52YXIgdmlld19wYXRoID0gJ3ZpZXdzLycsXG4gIHBjb2xvciA9ICcjMUM1MzZGJyxcbiAgX2JpbWF5X3VybCA9ICdodHRwOi8vYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcbiAgX2JpbWF5X2FwaV91cmwgPSAnaHR0cDovL2FwcHMuYmludXNtYXlhLmJpbnVzLmFjLmlkJztcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdCaW51c01heWEnLCBbJ2lvbmljJywgJ2xpc3RSb3V0ZScsICdCaW51c01heWFGYWN0b3J5J10pXG5cbi5ydW4oZnVuY3Rpb24oJGlvbmljUGxhdGZvcm0sICRyb290U2NvcGUsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCBCaW51c01heWEsICR0aW1lb3V0LCAkaW9uaWNQb3B1cCkge1xuXG4gICRyb290U2NvcGUubG9naW4gPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5pc2xvZ2luID09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IGxvY2FsU3RvcmFnZS5pc2xvZ2luKTtcbiAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IGZhbHNlO1xuICAkcm9vdFNjb3BlLnByb2ZpbGVQaWN0dXJlID0gZmFsc2U7XG4gICRyb290U2NvcGUubG9naW5OYW1lID0gdHlwZW9mIGxvY2FsU3RvcmFnZS5mbmFtZSA9PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICBkZWxldGUgbG9jYWxTdG9yYWdlLmNvb2tpZTtcbiAgZGVsZXRlIGxvY2FsU3RvcmFnZS50ZW1wbG9naW47XG5cbiAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJHJvb3RTY29wZS5vbkxvYWRTdHlsZSA9IHtcbiAgICAgIG9wYWNpdHk6IDFcbiAgICB9O1xuICAgIC8vIEhpZGUgdGhlIGFjY2Vzc29yeSBiYXIgYnkgZGVmYXVsdCAocmVtb3ZlIHRoaXMgdG8gc2hvdyB0aGUgYWNjZXNzb3J5IGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAvLyBmb3IgZm9ybSBpbnB1dHMpXG4gICAgLyppZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcih0cnVlKTtcbiAgICB9Ki9cbiAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgU3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpO1xuICAgIH1cbiAgICBpZihsb2NhbFN0b3JhZ2UuaXNsb2dpbikge1xuICAgICAgZ2V0UHJvZmlsZUltYWdlKCk7ICBcbiAgICB9XG4gIH0pO1xuXG4gICRyb290U2NvcGUuZ2V0TGFzdFVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICRyb290U2NvcGUubGFzdFVwZGF0ZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwiV2hhdGV2ZXJcIiA6IGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlO1xuICB9O1xuICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUoKTtcbiAgJHJvb3RTY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgIHRpdGxlOiAnQ29uZmlybScsXG4gICAgICB0ZW1wbGF0ZTogJ0FyZSB5b3Ugc3VyZSB0byBsb2dvdXQgPycsXG4gICAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmKHJlcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIy8nO1xuICAgICAgICAkaW9uaWNIaXN0b3J5LmNsZWFySGlzdG9yeSgpO1xuICAgICAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFja0J1dHRvbihmYWxzZSk7XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRQcm9maWxlSW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAvKiogcGVmb3JtIGF2YXRhciAqKi9cbiAgICBpZihsb2NhbFN0b3JhZ2UucHJvZmlsZVBpY3R1cmUpIHtcbiAgICAgICRyb290U2NvcGUucHJvZmlsZVBpY3R1cmUgPSBsb2NhbFN0b3JhZ2UucHJvZmlsZVBpY3R1cmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQmludXNNYXlhLnByb2ZpbGVQaWN0dXJlKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucHJvZmlsZVBpY3R1cmUgPSBkb25lO1xuICAgICAgICAgICAgICAkcm9vdFNjb3BlLnByb2ZpbGVQaWN0dXJlID0gZG9uZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBcblxuICBpZiAoJHJvb3RTY29wZS5sb2dpbikge1xuICAgIGlmKCFsb2NhbFN0b3JhZ2UucGVybWlzc2lvbikge1xuICAgICAgbG9jYWxTdG9yYWdlLnBlcm1pc3Npb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGV4YW1TY29yZTogdHJ1ZSxcbiAgICAgICAgYWJzZW5jZTogdHJ1ZSxcbiAgICAgICAgZmluYW5jZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJy9zY2hlZHVsZSc7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnLyc7XG4gIH1cbn0pXG5cbi5jb25maWcoZnVuY3Rpb24oJGlvbmljQ29uZmlnUHJvdmlkZXIpIHtcbiAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MuZm9yd2FyZENhY2hlKGZhbHNlKTtcbiAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MubWF4Q2FjaGUoMCk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdCaW51c01heWFGYWN0b3J5JywgW10pXG5cbi5mYWN0b3J5KCdCaW51c01heWEnLCBmdW5jdGlvbigkcSwgJGlvbmljUG9wdXApIHtcbiAgcmV0dXJuIHtcblxuICAgIF9iaW1heV91cmw6ICdodHRwOi8vYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcbiAgICBfYmltYXlfYXBpX3VybDogJ2h0dHA6Ly9hcHBzLmJpbnVzbWF5YS5iaW51cy5hYy5pZCcsXG5cbiAgICBoZWFkZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBDb29raWU6IGxvY2FsU3RvcmFnZS5jb29raWUgPyBsb2NhbFN0b3JhZ2UuY29va2llIDogbnVsbCxcbiAgICAgICAgT3JpZ2luOiBfdC5fYmltYXlfdXJsLFxuICAgICAgICBSZWZlcmVyOiBfdC5fYmltYXlfdXJsXG4gICAgICB9O1xuICAgIH0sXG4gICAgY2hlY2tMb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgdmFyIGxvZ2luID0gbG9jYWxTdG9yYWdlLmxvZ2luSWQgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5sb2dpbklkKSA6IGZhbHNlO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnRlbXBsb2dpbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZihsb2dpbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZWplY3QoXCJwbGVhc2UgbG9naW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIF90LmFwaSgnLycsICdnZXQnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICBpZiAoZC5jb2RlICE9PSAyMDApIHJlamVjdChkKTtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS50eHRVc2VySWQgPSBsb2dpbi5iaW51c2lkO1xuICAgICAgICAgICAgICBkYXRhLnR4dFBhc3N3b3JkID0gbG9naW4ucGFzc3dvcmQ7XG4gICAgICAgICAgICAgIGRhdGEuYnRuTG9naW4gPSBcIkxvZyBJbiBcIjtcbiAgICAgICAgICAgICAgcmV0dXJuIF90LmFwaSgnLycsICdwb3N0JywgZGF0YSk7XG4gICAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS50ZW1wbG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhcGk6IGZ1bmN0aW9uKGVuZHBvaW50LCBtZXRob2QsIHBhcmFtcywgbm9FbmRwb2ludCwgbm9SZWRpcmVjdCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIC8qanNoaW50IC1XMDMwICovXG4gICAgICB0eXBlb2Ygbm9FbmRwb2ludCAhPT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBoZWFkZXJzOiBfdC5oZWFkZXJzKCksXG4gICAgICB9O1xuICAgICAgaWYodHlwZW9mIG5vUmVkaXJlY3QgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgb3B0aW9ucy5ub1JlZGlyZWN0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmKG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGUgPT0gXCJub25lXCIpIHtcbiAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChcIk5vIGludGVybmV0IGNvbm5lY3Rpb25cIik7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChsb2NhbFN0b3JhZ2UuY29va2llID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIF90Ll9nZXRDb29raWUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaShlbmRwb2ludCwgbWV0aG9kLCBwYXJhbXMpO1xuICAgICAgICAgIH0pOyBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpZiAobWV0aG9kID09PSBcImdldFwiKSB7XG4gICAgICAgICAgICBodHRwY2xpZW50LmdldCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKGQpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHR0cGNsaWVudC5wb3N0KChub0VuZHBvaW50ID8gZW5kcG9pbnQgOiBfdC5fYmltYXlfdXJsICsgZW5kcG9pbnQpLCBwYXJhbXMsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShkKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZG93bmxvYWQ6IGZ1bmN0aW9uKHVybCwgZm9ybU5hbWUpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiBfdC5hcGkoX3QuX2JpbWF5X2FwaV91cmwgKycvTE1TLycrIHVybCwgJ2dldCcsIHt9LCB0cnVlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZSkge1xuICAgICAgICAgICAgZGF0YVtlLm5hbWVdID0gZS52YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkYXRhW2Zvcm1OYW1lKycueCddID0gMTtcbiAgICAgICAgICBkYXRhW2Zvcm1OYW1lKycueSddID0gMTtcbiAgICAgICAgICByZXR1cm4gX3QuYXBpKF90Ll9iaW1heV9hcGlfdXJsICsnL0xNUy8nKyB1cmwsICdwb3N0JywgZGF0YSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJlamVjdChkKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIGlmKGQuY29kZSA9PSAzMDIpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGZyYW1lOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgIHZhciBfdCA9IHRoaXMsXG4gICAgICAgIF91cmwgPSAnJztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIF90LmFwaSh1cmwsICdnZXQnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoJChkLnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcDFfaWZyQXBwXCIpLmF0dHIoXCJzcmNcIiksICdnZXQnKTtcbiAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgX3VybCA9ICQoZC5yZXN1bHQpLmZpbmQoXCIjaWZyQXBwXCIpLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKF91cmwsICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICB1cmw6IF91cmwsXG4gICAgICAgICAgICAgIHJlc3VsdDogZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBfZ2V0Q29va2llOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGh0dHBjbGllbnQuZ2V0KF90Ll9iaW1heV91cmwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDIwMCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNvb2tpZSA9IGRhdGEuaGVhZGVyWydTZXQtQ29va2llJ107XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwcm9maWxlUGljdHVyZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBfdC5jaGVja0xvZ2luKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90LmZyYW1lKCcvJyk7XG4gICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkgeyBcbiAgICAgICAgICB2YXIgdXJsID0gJChkLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BSaWdodF91Y1Bob3RvX2ltZ1Byb2ZpbGVQaWNcIikuYXR0cihcInNyY1wiKTtcbiAgICAgICAgICBodHRwY2xpZW50LmltYWdlKF90Ll9iaW1heV9hcGlfdXJsICsgXCIvaG9tZS9cIiArIHVybCwgZnVuY3Rpb24oZCkgeyBcbiAgICAgICAgICAgIHJlc29sdmUoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGQucmVzdWx0LnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sXCJcIikpO1xuICAgICAgICAgIH0sIHJlamVjdCwgXG4gICAgICAgICAge1xuICAgICAgICAgICAgaGVhZGVyczogX3QuaGVhZGVycygpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHByb21wdFBhc3N3b3JkOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NvcGUsIHBlcm1pc3Npb25LZXkpIHtcbiAgICAgIHNjb3BlLnByb21wdFBhc3MgPSB7fTtcbiAgICAgIHZhciBjb2RlID0gbG9jYWxTdG9yYWdlLmNvZGVcbiAgICAgICAgICBwZXJtaXNzaW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UucGVybWlzc2lvbiksXG4gICAgICAgICAgbXNndmFyID0gY29kZSA/ICdTZWNyZXQgQ29kZScgOiAnQmludXNtYXlhIFBhc3N3b3JkJztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYocGVybWlzc2lvbltwZXJtaXNzaW9uS2V5XSA9PSB0cnVlIHx8IHR5cGVvZiBwZXJtaXNzaW9uS2V5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdmFyIG15UG9wdXAgPSAkaW9uaWNQb3B1cC5zaG93KHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHAgbmctc2hvdz1cInByb21wdFBhc3MuZXJyb3JcIj5JbmNvcnJlY3QgUGFzc3dvcmQ8L3A+PGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwicHJvbXB0UGFzcy1mb3JtXCIgbmctbW9kZWw9XCJwcm9tcHRQYXNzLnBhc3N3b3JkXCI+JyxcbiAgICAgICAgICAgIHRpdGxlOiAnRW50ZXIgJyArIG1zZ3ZhcixcbiAgICAgICAgICAgIHN1YlRpdGxlOiAnJyxcbiAgICAgICAgICAgIHNjb3BlOiBzY29wZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgIHRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvJyArIGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgIG15UG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZWplY3QoJ2JhY2snKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICB0ZXh0OiAnPGI+RW50ZXI8L2I+JyxcbiAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG15cGFzcyA9IGxvY2FsU3RvcmFnZS5jb2RlID8gbG9jYWxTdG9yYWdlLmNvZGUgOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5sb2dpbklkKS5wYXNzd29yZDtcbiAgICAgICAgICAgICAgICBpZiAobXlwYXNzID09IHNjb3BlLnByb21wdFBhc3MucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLnByb21wdFBhc3MgPSB7fTtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLmlzQWxsb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzLmVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLnByb21wdFBhc3MucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY29wZS5pc0FsbG93ID0gdHJ1ZTtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIF9yZXF1ZXN0RXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgIH0sXG4gICAgZ3JvdXBpbmc6IGZ1bmN0aW9uKF9kYXRhKSB7XG4gICAgICBpZiAoX2RhdGEubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIG0gPSBbXSxcbiAgICAgICAgcCA9ICcnLFxuICAgICAgICBjID0gLTEsXG4gICAgICAgIGNoID0gMDtcbiAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICBpZiAocCA9PSBkLmRhdGUpIHtcbiAgICAgICAgICBtW2NdLmRhdGFbY2hdID0gZDtcbiAgICAgICAgICBjaCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoID0gMTtcbiAgICAgICAgICBjKys7XG4gICAgICAgICAgcCA9IGQuZGF0ZTtcbiAgICAgICAgICBtW2NdID0ge1xuICAgICAgICAgICAgZGF0ZTogZC5kYXRlLFxuICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICB9O1xuICAgICAgICAgIG1bY10uZGF0YVswXSA9IGQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG07XG4gICAgfVxuICB9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2xpc3RSb3V0ZScsIFtdKVxuXG4uY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaW5kZXgnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdsb2dpbi5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NjaGVkdWxlJywge1xuICAgICAgdXJsOiAnL3NjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzY2hlZHVsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdhYm91dC5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZvcnVtJywge1xuICAgICAgdXJsOiAnL2ZvcnVtJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdmb3J1bS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRm9ydW1Db250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NlcnZpY2VzJywge1xuICAgICAgdXJsOiAnL3NlcnZpY2VzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9pbmRleC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZXNDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ215Y2xhc3MnLCB7XG4gICAgICB1cmw6ICcvbXljbGFzcycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbXljbGFzcy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTXlDbGFzc0NvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnbXljbGFzc0RldGFpbCcsIHtcbiAgICAgIHVybDogJy9teWNsYXNzLWRldGFpbC86Y29kZScsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIGRhdGFzZXQ6IGZ1bmN0aW9uKCRxLCAkc3RhdGVQYXJhbXMsICRsb2NhdGlvbikge1xuICAgICAgICAgIHZhciBfZ290ID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICB2YXIgY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuICAgICAgICAgIGZvciAodmFyIGQgaW4gY2xhc3NEYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2xhc3NEYXRhW2RdLmNvZGUgPT0gJHN0YXRlUGFyYW1zLmNvZGUpIHtcbiAgICAgICAgICAgICAgX2dvdCA9IGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfZ290KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9nb3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL215Y2xhc3MnKS5yZXBsYWNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ215Y2xhc3NJbnNpZGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ015Q2xhc3NEZXRhaWxDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY2hlZHVsZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjaGVkdWxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY29yZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjb3JlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjb3JlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NvcmVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZpbmFuY2VTdGF0dXMnLCB7XG4gICAgICB1cmw6ICcvZmluYW5jZS1zdGF0dXMnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2JpbGxpbmcuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0ZpbmFuY2VDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fic2VuY2UnLCB7XG4gICAgICB1cmw6ICcvYWJzZW5jZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvYWJzZW5jZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnQWJzZW5jZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnc2V0dGluZ3MnLCB7XG4gICAgICB1cmw6ICcvc2V0dGluZ3MnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NldHRpbmdzL2luZGV4Lmh0bWwnLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3Blcm1pc3Npb25zJywge1xuICAgICAgdXJsOiAnL3NldHRpbmdzL3Blcm1pc3Npb25zJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXR0aW5ncy9wZXJtaXNzaW9ucy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnUGVybWlzc2lvbkNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgncGFzc3dvcmQnLCB7XG4gICAgICB1cmw6ICcvc2V0dGluZ3MvcGFzc3dvcmQnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NldHRpbmdzL3Bhc3N3b3JkLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQYXNzd29yZENvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnY29taW5nJywge1xuICAgICAgdXJsOiAnL2NvbWluZycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnY29taW5nLmh0bWwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2NvbWluZ1wiKTtcbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdBYnNlbmNlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkaHR0cCwgJGxvY2F0aW9uLFxuICAgICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hBYnNlbmNlKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChkb25lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmFic2VuY2UgPSBKU09OLnN0cmluZ2lmeShkb25lKTtcbiAgICAgICAgICAgICAgJHNjb3BlLmFic2VuY2UgPSBkb25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlcnJIYW5kbGUoZXJyKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hBYnNlbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX2RhdGEgPSBbXSwgY291bnQgPSAwO1xuICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YXR1cyhzdHIpIHtcblx0XHRcdFx0XHRcdGlmKC9iYWlrLy50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdiYWxhbmNlZCc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoL3dhcm5pbmcvLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2NhbG0nO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKC9tYXhpbXVtLy50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdlbmVyZ2l6ZWQnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKC9vdmVybGltaXQvLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2Fzc2VydGl2ZSc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuICAgICAgICAgICQoZGF0YSkuZmluZCgnI3JwdFRhYmxlIHRyJykuZWFjaChmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgaWYgKGh0Lmxlbmd0aCA+PSA4KSB7XG4gICAgICAgICAgICAgICAgX2RhdGFbY291bnRdID0ge1xuICAgICAgICAgICAgICAgICAgbmFtZTogaHQuZXEoMCkuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgYWJzZW5jZTogW3tcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBodC5lcSg0KS5odG1sKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogaHQuZXEoMikudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGdldFN0YXR1cyhodC5lcSg1KS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIikpXG4gICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZGF0YVtjb3VudCAtIDFdLmFic2VuY2UucHVzaCh7XG4gICAgICAgICAgICAgICAgICBtYXg6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIHRvdGFsOiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGh0LmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogZ2V0U3RhdHVzKGh0LmVxKDQpLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvYWJzZW5jZS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIFx0QmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDMpID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0LnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfcnB0TWFpbk1lbnVTdHVkZW50X2N0bDAxX2xpbmtNZW51U3R1ZGVudFwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdFN1Yk1lbnVfY3RsMDJfbGlua1N1Yk1lbnVcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoYy5yZXN1bHQpKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCaW51c01heWEucHJvbXB0UGFzc3dvcmQoJ3NlcnZpY2VzJywgJHNjb3BlLCAnYWJzZW5jZScpXG4gICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUuYWJzZW5jZSA9IGZhbHNlO1xuICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UuYWJzZW5jZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAkc2NvcGUuYWJzZW5jZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmFic2VuY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KHt0ZW1wbGF0ZVVybDogJ3ZpZXdzL21vZHVsZS9sb2FkaW5nLmh0bWwnLG5vQmFja2Ryb3A6IHRydWV9KTtcbiAgICAgICAgJHNjb3BlLmRvUmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gIH0pOyIsImFwcC5jb250cm9sbGVyKCdFeGFtU2NoZWR1bGVDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRodHRwLCAkbG9jYXRpb24sIFxuICBcdCRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hTY2hlZHVsZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgXHRpZighbG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSB8fCBkb25lLmxlbmd0aCA+IDApXG4gICAgICAgICAgXHR7XG5cdCAgICAgICAgICBcdGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUgPSBKU09OLnN0cmluZ2lmeShkb25lKTtcblx0ICAgICAgICAgICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBkb25lO1xuICAgICAgICAgIFx0fVxuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgXHQkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1x0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaFNjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBcdHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIFx0XHR2YXIgX2RhdGEgPSBbXTtcbiAgICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIFx0XHRcdHZhciB0ZXJtID0gJChkYXRhW2ldKS5maW5kKFwidGFibGU6ZXEoMikgdHIgdGQgbGlcIikudGV4dCgpO1xuXHQgICAgICBcdFx0JChkYXRhW2ldKS5maW5kKFwiLnRhYmxld2l0aGJvcmRlciB0clwiKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcblx0ICAgICAgXHRcdFx0aWYoaSA+IDApIHtcblx0XHQgICAgICBcdFx0XHRfZGF0YS5wdXNoKHtcblx0XHQgICAgICBcdFx0XHRcdHRlcm06IFx0XHQgIHRlcm0sXG5cdFx0ICAgICAgXHRcdFx0XHRjb2RlOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgwKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRuYW1lOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgxKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRza3M6IFx0XHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoMikudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0ZGF0ZTogXHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoMykudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0aG91cjogXHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoNCkudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0cm9vbTogXHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoNSkudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0Y2FtcHVzOiBcdFx0JChkKS5maW5kKFwidGRcIikuZXEoNikudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0Y2xhc3NOYW1lOiBcdCQoZCkuZmluZChcInRkXCIpLmVxKDcpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdHNlYXQ6IFx0XHRcdHBhcnNlSW50KCQoZCkuZmluZChcInRkXCIpLmVxKDgpLnRleHQoKSlcblx0XHQgICAgICBcdFx0XHR9KTtcblx0ICAgICAgXHRcdFx0fVxuXHQgICAgICBcdFx0fSk7XG4gICAgICBcdFx0fVxuICAgICAgXHRcdHJldHVybiBCaW51c01heWEuZ3JvdXBpbmcoXy5zb3J0QnkoX2RhdGEsICdkYXRlJykpO1xuICAgICAgXHR9O1xuICAgICAgXHR2YXIgZGF0YVNjaGVkdWxlID0gW10sXG4gICAgICBcdFx0XHRzY2hlZHVsZV91cmwgPSBcIlwiO1xuICAgICAgXHRpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9leGFtLmh0bWwnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChkLmRhdGEpO1xuICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvZXhhbS1wcmFjdGljdW0uaHRtbCcpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChlLmRhdGEpO1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGRhdGFTY2hlZHVsZSkpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgXHRCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0Jyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIFx0Ly8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgXHQudGhlbihmdW5jdGlvbihkKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG5cdCAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgzKSA+IGFcIikuYXR0cihcImhyZWZcIilcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG5cdCAgICAgICAgICB9KVxuXHQgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0LnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfcnB0TWFpbk1lbnVTdHVkZW50X2N0bDAyX2xpbmtNZW51U3R1ZGVudFwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0c2NoZWR1bGVfdXJsID0gZC5yZXN1bHQ7XG4gICAgICAgICAgICBcdHJldHVybiBCaW51c01heWEuYXBpKCQoc2NoZWR1bGVfdXJsKS5maW5kKFwiLml0ZW1Db250ZW50U2VydmljZSBsaTplcSgwKSBhXCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQucmVzdWx0KTtcbiAgICAgICAgICAgIFx0cmV0dXJuIEJpbnVzTWF5YS5hcGkoJChzY2hlZHVsZV91cmwpLmZpbmQoXCIuaXRlbUNvbnRlbnRTZXJ2aWNlIGxpOmVxKDEpIGFcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZC5yZXN1bHQpO1xuICAgICAgICAgICAgXHRyZXR1cm4gQmludXNNYXlhLmFwaSgkKHNjaGVkdWxlX3VybCkuZmluZChcIi5pdGVtQ29udGVudFNlcnZpY2UgbGk6ZXEoMikgYVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChkLnJlc3VsdCk7XG4gICAgICAgICAgICBcdHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZGF0YVNjaGVkdWxlKSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBmYWxzZTtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSkge1xuICAgICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlVXJsOiAndmlld3MvbW9kdWxlL2xvYWRpbmcuaHRtbCcsbm9CYWNrZHJvcDogdHJ1ZX0pO1xuICAgICAgJHNjb3BlLmRvUmVmcmVzaCgpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICB9KTsiLCJhcHAuY29udHJvbGxlcignRXhhbVNjb3JlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkaHR0cCwgJGxvY2F0aW9uLFxuICAgICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgIHZhciByZWZyZXNoRXhhbVNjb3JlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBcdHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIFx0XHR2YXIgX3JlZGF0YSA9IFtdO1xuICAgICAgXHRcdCQoZGF0YSkuZmluZChcIi50YWJsZWJvcmRlcnNtYWxsZXIgdHJcIikuZWFjaChmdW5jdGlvbiAoaSwgZCkge1xuICAgICAgXHRcdFx0aWYoaSA+IDApIHtcbiAgICAgIFx0XHRcdFx0X3JlZGF0YS5wdXNoKHtcbiAgICAgIFx0XHRcdFx0XHR0ZXJtOiAnVGhlb3J5IFNjb3JlJyxcbiAgICAgIFx0XHRcdFx0XHR5ZWFyOiAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X2RkbFBlcmlvZFllYXJcIikudmFsKCksXG4gICAgICBcdFx0XHRcdFx0c21lc3RlcjogJChkYXRhKS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9kZGxQZXJpb2RTZW1lc3RlclwiKS52YWwoKSxcbiAgICAgIFx0XHRcdFx0XHRuYW1lOiAkKHRoaXMpLmZpbmQoXCJ0ZFwiKS5lcSgxKS50ZXh0KCksXG4gICAgICBcdFx0XHRcdFx0ZGF0YTogW1xuICAgICAgXHRcdFx0XHRcdFx0W3tcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJ1RNJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDUpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnTUlEJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDYpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnUHJhY3RpY3VtJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDcpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fV0sW3tcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJ1NLUycsXG4gICAgICBcdFx0XHRcdFx0XHRcdHZhbHVlOiAkKHRoaXMpLmZpbmQoXCJ0ZFwiKS5lcSgyKS50ZXh0KClcbiAgICAgIFx0XHRcdFx0XHRcdH0sIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJ0ZpbmFsJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDgpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnUmVzdWx0JyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDkpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fV1cbiAgICAgIFx0XHRcdFx0XHRdXG4gICAgICBcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0fVxuICAgICAgXHRcdH0pO1xuXG5cdFx0XHRcdFx0JChkYXRhKS5maW5kKFwiLnRhYmxld2l0aGJvcmRlciB0clwiKS5lYWNoKGZ1bmN0aW9uIChpLCBkKSB7XG4gICAgICBcdFx0XHRpZihpID4gMCkge1xuICAgICAgXHRcdFx0XHRfcmVkYXRhLnB1c2goe1xuICAgICAgXHRcdFx0XHRcdHRlcm06ICdQcmFjdGljdW0gU2NvcmUnLFxuICAgICAgXHRcdFx0XHRcdHllYXI6ICQoZGF0YSkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfZGRsUGVyaW9kWWVhclwiKS52YWwoKSxcbiAgICAgIFx0XHRcdFx0XHRzbWVzdGVyOiAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X2RkbFBlcmlvZFNlbWVzdGVyXCIpLnZhbCgpLFxuICAgICAgXHRcdFx0XHRcdG5hbWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgIFx0XHRcdFx0XHRkYXRhOiBbXG4gICAgICBcdFx0XHRcdFx0XHRbe1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnTUlEJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDMpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnRmluYWwnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNCkuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICdQcm9qZWN0JyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICQodGhpcykuZmluZChcInRkXCIpLmVxKDUpLmZpbmQoXCJhOmZpcnN0XCIpLnRleHQoKVxuICAgICAgXHRcdFx0XHRcdFx0fV0sW3tcbiAgICAgIFx0XHRcdFx0XHRcdFx0bmFtZTogJ1Byb2plY3QnLFxuICAgICAgXHRcdFx0XHRcdFx0XHR2YWx1ZTogJCh0aGlzKS5maW5kKFwidGRcIikuZXEoNikuZmluZChcImE6Zmlyc3RcIikudGV4dCgpXG4gICAgICBcdFx0XHRcdFx0XHR9LCB7XG4gICAgICBcdFx0XHRcdFx0XHRcdG5hbWU6ICcgJyxcbiAgICAgIFx0XHRcdFx0XHRcdFx0dmFsdWU6ICcgJ1xuICAgICAgXHRcdFx0XHRcdFx0fSwge1xuICAgICAgXHRcdFx0XHRcdFx0XHRuYW1lOiAnICcsXG4gICAgICBcdFx0XHRcdFx0XHRcdHZhbHVlOiAnICdcbiAgICAgIFx0XHRcdFx0XHRcdH1dXG4gICAgICBcdFx0XHRcdFx0XVxuICAgICAgXHRcdFx0XHR9KTtcbiAgICAgIFx0XHRcdH1cbiAgICAgIFx0XHR9KTtcbiAgICAgIFx0XHRyZXR1cm4gX3JlZGF0YTtcbiAgICAgIFx0fTtcbiAgICAgIFx0aWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHRcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9leGFtLXNjb3JlLmh0bWwnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgXHRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIFx0fTtcblxuICBcdCRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hFeGFtU2NvcmUoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlICE9PSBcInVuZGVmaW5lZFwiIHx8IGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlID0gSlNPTi5zdHJpbmdpZnkoZG9uZSk7XG4gICAgICAgICAgICAgICRzY29wZS5leGFtU2NvcmUgPSBkb25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlcnJIYW5kbGUoZXJyKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQWxsb3cgPSBmYWxzZTtcbiAgICBCaW51c01heWEucHJvbXB0UGFzc3dvcmQoJ3NlcnZpY2VzJywgJHNjb3BlLCAnZXhhbVNjb3JlJylcbiAgICAudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRzY29wZS5leGFtU2NvcmUgPSBmYWxzZTtcblx0ICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmV4YW1TY29yZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHQgICAgICAkc2NvcGUuZXhhbVNjb3JlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZXhhbVNjb3JlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdCRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG5cdCAgICAgICAgJHNjb3BlLmRvUmVmcmVzaCgpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cbiAgICB9KTtcblxuICB9KTsiLCIvKipcbiAqIEZpbmFuY2UgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0ZpbmFuY2VDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY1BvcHVwLCAkcSwgJGh0dHAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRzY29wZS5pc0FsbG93ID0gZmFsc2U7XG4gICAgJHNjb3BlLmZpbmFuY2VMaXN0ID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoRmluYW5jZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZighbG9jYWxTdG9yYWdlLmZpbmFuY2UgfHwgZG9uZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5maW5hbmNlID0gSlNPTi5zdHJpbmdpZnkoZG9uZSk7XG4gICAgICAgICAgICAgICRzY29wZS5maW5hbmNlTGlzdCA9IGRvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLnRvTW9uZXkgPSBmdW5jdGlvbihuKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gbi50b0ZpeGVkKDIpLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrXFwuKS9nLCAnJDEsJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaEZpbmFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICB2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIGJpbGxpbmcgPSAwO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBiaWxsaW5nID0gcGFyc2VJbnQoJChkYXRhKS5maW5kKFwidGFibGU6ZXEoMCkgdHIgdGRcIikuaHRtbCgpLm1hdGNoKC9bMC05XSsvKVswXSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICB2YXIgaGFzaWwgPSBbXTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoJ3RhYmxlI3JwdFRhYmxlIHRyJykuZWFjaChmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgaGFzaWwucHVzaCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogaHQuZXEoMSkuaHRtbCgpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBodC5lcSgyKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdGVybTogaHQuZXEoMykuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGR1ZTogaHQuZXEoNCkuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGNoYXJnZTogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNSkuaHRtbCgpKSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNSkuaHRtbCgpKSxcbiAgICAgICAgICAgICAgICBwYXltZW50OiBpc05hTihwYXJzZUludChodC5lcSg2KS5odG1sKCkpKSA9PT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg2KS5odG1sKCkubWF0Y2goL1swLTldKy8pKSxcbiAgICAgICAgICAgICAgICByZWZ1bmQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDcpLmh0bWwoKSkpID09PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDcpLmh0bWwoKSlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGZpbmFsX2RhdGEgPSB7XG4gICAgICAgICAgICBkYXRhOiBCaW51c01heWEuZ3JvdXBpbmcoaGFzaWwpLFxuICAgICAgICAgICAgYmlsbGluZzogYmlsbGluZyxcbiAgICAgICAgICAgIGxhc3RVcGRhdGU6IG1vbWVudCgpLmZvcm1hdCgnRCBNTU1NIFlZWVkgaDptbTpzcycpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gZmluYWxfZGF0YTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9maW5hbmNlLmh0bWwnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0Jyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDZfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRTdWJNZW51X2N0bDAzX2xpbmtTdWJNZW51XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICAgIEJpbnVzTWF5YS5wcm9tcHRQYXNzd29yZCgnc2VydmljZXMnLCAkc2NvcGUsICdmaW5hbmNlJylcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZmluYW5jZSkge1xuICAgICAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5maW5hbmNlKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmZpbmFuY2VMaXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG4gICAgICAgICRzY29wZS5kb1JlZnJlc2goKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuKTsiLCJhcHAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJyxcbmZ1bmN0aW9uKCRzY29wZSwgJGlvbmljUG9wdXAsICR0aW1lb3V0LCAkaW9uaWNIaXN0b3J5LCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHJvb3RTY29wZSwgQmludXNNYXlhKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gdHJ1ZTtcbiAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFyKGZhbHNlKTtcblxuICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcblxuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoISgkc2NvcGUuYmludXNpZCAmJiAkc2NvcGUucGFzc3dvcmQpKSB7XG4gICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgdGVtcGxhdGU6ICdQbGVhc2UgSW5wdXQgQmludXNpYW4gSUQgYW5kIFBhc3N3b3JkJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJ29uLWxvYWRpbmcnO1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0JylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIGlmKGQuY29kZSAhPT0gMjAwKSBoYW5kbGVFcnJvcihkKTtcbiAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGEudHh0VXNlcklkID0gJHNjb3BlLmJpbnVzaWQ7XG4gICAgICAgICAgZGF0YS50eHRQYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcbiAgICAgICAgICBkYXRhLmJ0bkxvZ2luID0gXCJMb2cgSW4gXCI7XG4gICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAncG9zdCcsIGRhdGEpO1xuICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaGFuZGxlRXJyb3IoZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9ICQoZC5yZXN1bHQpLmZpbmQoXCIjY29udGVudCAjdG9wYmFyIC5yaWdodCBzdHJvbmdcIik7XG4gICAgICAgICAgLy8gV2hlbiBTdWNjZXNzXG4gICAgICAgICAgaWYoZC5jb2RlICE9PSAyMDApXG4gICAgICAgICAgICBoYW5kbGVFcnJvcihkKTtcbiAgICAgICAgICBpZihuYW1lLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICBoYW5kbGVFcnJvcihkLCAkKGQucmVzdWx0KS5maW5kKFwiI2xibEVycm9yXCIpLnRleHQoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEkgVGhpbmsgdGhhdCBub3QgYmVzdCBtZXRob2RcbiAgICAgICAgICAgICAqIEB0b2RvIG1ha2UgaXQgaGFzaFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UubG9naW5JZCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgYmludXNpZDogJHNjb3BlLmJpbnVzaWQsXG4gICAgICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuaXNsb2dpbiA9IHRydWU7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZm5hbWUgPSBuYW1lLnRleHQoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUubG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sb2dpbk5hbWUgPSBsb2NhbFN0b3JhZ2UuZm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAkaW9uaWNIaXN0b3J5LmNsZWFySGlzdG9yeSgpO1xuICAgICAgICAgICAgJGlvbmljTmF2QmFyRGVsZWdhdGUuc2hvd0JhY2tCdXR0b24oZmFsc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9LCBoYW5kbGVFcnJvcik7XG5cbiAgICAgICAgdmFyIGhhbmRsZUVycm9yID0gZnVuY3Rpb24oZGF0YSwgdGV4dCkge1xuICAgICAgICAgIHR5cGVvZiB0ZXh0ICE9PSBcInVuZGVmaW5lZFwiID8gdGV4dCA6IG51bGw7XG4gICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuICAgICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZXh0ID8gdGV4dCA6ICdTb21ldGhpbmcgd3JvbmcgISdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4pO1xuIiwiLyoqXG4gKiBNeSBDbGFzcyBDb250cm9sbGVyXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignTXlDbGFzc0NvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGxvY2F0aW9uLCAkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkaW9uaWNQbGF0Zm9ybSwgJHEsICRpb25pY1BvcHVwLCAkaW9uaWNMb2FkaW5nLCAkaHR0cCkge1xuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gdHJ1ZTtcbiAgICAkaW9uaWNQbGF0Zm9ybS5vbkhhcmR3YXJlQmFja0J1dHRvbihmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuXG4gICAgdmFyIHJlZnJlc2hNeUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX3JlRGF0YSA9IFtdO1xuICAgICAgICAgICQoZGF0YSkuZmluZChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3BubFRlb3JpIHVsIGxpXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGQpLmZpbmQoXCJhXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgcmVnID0gbmFtZS5tYXRjaCgvXiguKiktKC4qKSBcXCgoLiopXFwpL2kpO1xuICAgICAgICAgICAgX3JlRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgaW5kZXhJdGVtOiBpLFxuICAgICAgICAgICAgICBuYW1lOiByZWdbMl0sXG4gICAgICAgICAgICAgIHVybDogJChkKS5maW5kKFwiYVwiKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgIGNvZGU6IHJlZ1sxXSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiByZWdbM11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5teUNsYXNzID0gSlNPTi5zdHJpbmdpZnkoX3JlRGF0YSk7XG4gICAgICAgICAgcmV0dXJuIF9yZURhdGE7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9teWNsYXNzLmh0bWwnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0Jyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0LnJlc3VsdCkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBteSBjbGFzc1wiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaE15Q2xhc3MoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YSA9IGRvbmU7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIGVyckhhbmRsZShlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIGlmKCEkc2NvcGUuY2xhc3NEYXRhKSB7XG4gICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlVXJsOiAndmlld3MvbW9kdWxlL2xvYWRpbmcuaHRtbCcsbm9CYWNrZHJvcDogdHJ1ZX0pO1xuICAgICAgJHNjb3BlLmRvUmVmcmVzaCgpO1xuICAgIH1cblxuICB9KTsiLCIvKipcbiAqIE15IENsYXNzIEluc2lkZVxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ015Q2xhc3NEZXRhaWxDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRsb2NhdGlvbiwgJGh0dHAsICRpb25pY1Njcm9sbERlbGVnYXRlLFxuICAgICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsIGRhdGFzZXQsICR0aW1lb3V0LCAkaW9uaWNMb2FkaW5nKSB7XG5cbiAgICAkc2NvcGUuY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuICAgICRzY29wZS5zdGF0ZSA9IHtcbiAgICAgIGlzRGF0YTogZmFsc2UsXG4gICAgICBsb2FkaW5nOiB0cnVlXG4gICAgfTtcbiAgICAkc2NvcGUuZGF0YSA9ICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF07XG4gICAgJHNjb3BlLnNob3dwYWdlID0gMDtcblxuICAgICRzY29wZS5saW5rc1NldEFzc2lnbWVudCA9IFtdO1xuICAgICRzY29wZS5saW5rc1NldCA9IFtdO1xuXG4gICAgdmFyIGdldENsYXNzRGV0YWlsID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgZGVzY19tYWluID0gJChkYXRhKS5maW5kKFwiI2Rlc2NfY291cnNlX2Rlc2MgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgZGVzY19ncmFkID0gJChkYXRhKS5maW5kKFwiI2Rlc2NfZ3JhZF9jb21wZXRlID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgIGNvdXJzZSA9IFtdLCBcbiAgICAgICAgICAgICAgYXNzaWdtZW50ID0gW107XG4gICAgICAgICAgJChkYXRhKS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sQ29udGVudFRoZW9yeSB0YWJsZSB0Ym9keSB0clwiKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvdXJzZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiBwYXJzZUludCgkKGQpLmZpbmQoXCJ0ZDplcSgwKSA+IHNwYW5cIikuaHRtbCgpKSxcbiAgICAgICAgICAgICAgICBtb2RlOiAkKGQpLmZpbmQoXCJ0ZDplcSgxKSA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgIHRvcGljczogJChkKS5maW5kKFwidGQ6ZXEoMikgPiBhXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICBkYXRlOiAkKGQpLmZpbmQoXCJ0ZDplcSgzKSA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGxpbmtzOiAkKGQpLmZpbmQoXCJ0ZDplcSg0KSA+IGlucHV0XCIpLmF0dHIoJ25hbWUnKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxNYWluQXNzaWdubWVudCB0YWJsZSB0Ym9keSB0clwiKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgIGFzc2lnbWVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0ZXJtOiAnTWFpbiBBc3NpZ21lbnQnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkXCIpLmVxKDApLnRleHQoKSksXG4gICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgxKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgdGl0bGU6ICQoZCkuZmluZChcInRkXCIpLmVxKDIpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBkZXNjOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgzKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgZGVhZGxpbmU6ICQoZCkuZmluZChcInRkXCIpLmVxKDQpLnRleHQoKSxcbiAgICAgICAgICAgICAgICB1cGxvYWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDUpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6ICQoZCkuZmluZChcInRkXCIpLmVxKDYpLmZpbmQoXCJpbWdcIikubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxpbms6ICQoZCkuZmluZChcInRkXCIpLmVxKDcpLmZpbmQoXCJpbnB1dDplcSgwKVwiKS5hdHRyKCduYW1lJylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYXRhKS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sQWRkaXRpb25hbEFzc2lnbm1lbnQyIHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgYXNzaWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHRlcm06ICdBZGRpdGlvbmFsIEFzc2lnbWVudCcsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogcGFyc2VJbnQoJChkKS5maW5kKFwidGRcIikuZXEoMCkudGV4dCgpKSxcbiAgICAgICAgICAgICAgICB0b3BpY3M6ICQoZCkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJChkKS5maW5kKFwidGRcIikuZXEoMikudGV4dCgpLFxuICAgICAgICAgICAgICAgIGRlc2M6ICQoZCkuZmluZChcInRkXCIpLmVxKDMpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBkZWFkbGluZTogJChkKS5maW5kKFwidGRcIikuZXEoNCkudGV4dCgpLFxuICAgICAgICAgICAgICAgIHVwbG9hZDogJChkKS5maW5kKFwidGRcIikuZXEoNSkuZmluZChcImltZ1wiKS5sZW5ndGggPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2hlY2tlZDogJChkKS5maW5kKFwidGRcIikuZXEoNikuZmluZChcImltZ1wiKS5sZW5ndGggPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbGluazogJChkKS5maW5kKFwidGRcIikuZXEoNykuZmluZChcImlucHV0OmVxKDApXCIpLmF0dHIoJ25hbWUnKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYWluX2Rlc2NyaXB0aW9uOiBkZXNjX21haW4sXG4gICAgICAgICAgICBncmFkX2Rlc2NyaXB0aW9uOiBkZXNjX2dyYWQsXG4gICAgICAgICAgICBhc3NpZ21lbnQ6IGFzc2lnbWVudC5sZW5ndGggPiAwID8gYXNzaWdtZW50IDogZmFsc2UsXG4gICAgICAgICAgICBjb3Vyc2U6IGNvdXJzZVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvbXljbGFzcy1pbnNpZGUuaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCByZS1hdXRoIHlvdXIgYWNjb3VudFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDApID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvJyArIHVybCwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLnJlc3VsdCkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBjb3Vyc2UgcGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnZXRDbGFzc0RldGFpbCgkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLnVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsID0gZGF0YTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UubXlDbGFzcyA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS5jbGFzc0RhdGEpO1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICB9XG5cbiAgICAkc2NvcGUuc3dpdGNoVGFiID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICRzY29wZS5zaG93cGFnZSA9IHN0YXRlO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUucmVzaXplKCk7XG4gICAgICB9LCAxMDApO1xuICAgIH07XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG93bmxvYWRDb3Vyc2UgPSBmdW5jdGlvbihpbmRleCwgbGlua3MpIHtcbiAgICAgICRzY29wZS5saW5rc1NldFtpbmRleF0gPSB7aXNMb2FkaW5nOiB0cnVlfTtcbiAgICAgIGRvd25sb2FkTWF0ZXJpYWwobGlua3MpXG4gICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgIHdpbmRvdy5vcGVuKGQsICdfc3lzdGVtJyk7XG4gICAgICAgICRzY29wZS5saW5rc1NldFtpbmRleF0gPSB7aXNMb2FkaW5nOiBmYWxzZX07ICBcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUubGlua3NTZXRbaW5kZXhdID0ge2lzTG9hZGluZzogZmFsc2V9O1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb3dubG9hZEFzc2lnbWVudCA9IGZ1bmN0aW9uKGluZGV4LCBsaW5rcykge1xuICAgICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50W2luZGV4XSA9IHtpc0xvYWRpbmc6IHRydWV9O1xuICAgICAgZG93bmxvYWRNYXRlcmlhbChsaW5rcylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgd2luZG93Lm9wZW4oZCwgJ19zeXN0ZW0nKTtcbiAgICAgICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50W2luZGV4XSA9IHtpc0xvYWRpbmc6IGZhbHNlfTtcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUubGlua3NTZXRBc3NpZ21lbnRbaW5kZXhdID0ge2lzTG9hZGluZzogZmFsc2V9O1xuICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgdmFyIGRvd25sb2FkTWF0ZXJpYWwgPSBmdW5jdGlvbihsaW5rcylcbiAgICB7XG4gICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0udXJsLCBsaW5rcyk7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmRvd25sb2FkKCRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0udXJsLCBsaW5rcyk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmVzb2x2ZShkLmhlYWRlci5Mb2NhdGlvbik7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGU6ICc8aW9uLXNwaW5uZXIgaWNvbj1cImFuZHJvaWRcIiBjbGFzcz1cIm92ZXJsYXktc3Bpbm5lclwiPjwvaW9uLXNwaW5uZXI+IExvYWRpbmcuLi4nfSk7XG5cbiAgICAgIGdldENsYXNzRGV0YWlsKCRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0udXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWwgPSBkYXRhO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5teUNsYXNzID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLmNsYXNzRGF0YSk7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS5yZXNpemUoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgZXJySGFuZGxlKG1zZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICB9KTtcbiIsIi8qKlxuICogUGFzc3dvcmQgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1Bhc3N3b3JkQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNQb3B1cCwgJHEsICRodHRwLCAkaW9uaWNMb2FkaW5nKSB7XG5cbiAgXHQkc2NvcGUuaW5wdXQgPSB7fTtcblxuICBcdCRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgXHRcdHZhciBkYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCksXG4gIFx0XHRcdG9sZFBhc3MgPSBsb2NhbFN0b3JhZ2UuY29kZSA/IGxvY2FsU3RvcmFnZS5jb2RlIDogZGF0YS5wYXNzd29yZDtcbiAgXHRcdFxuICBcdFx0aWYoJHNjb3BlLmlucHV0Lm9sZFBhc3N3b3JkICE9PSBvbGRQYXNzKSB7XG4gIFx0XHRcdCRpb25pY1BvcHVwLmFsZXJ0KHt0aXRsZTogJ09vcHMgIScsdGVtcGxhdGU6ICdJbmNvcnJlY3QgQ29kZSd9KTtcbiAgXHRcdH0gZWxzZSBpZighJHNjb3BlLmlucHV0Lm5ld1Bhc3N3b3JkIHx8ICEkc2NvcGUuaW5wdXQucmVQYXNzd29yZCkge1xuICBcdFx0XHQkaW9uaWNQb3B1cC5hbGVydCh7dGl0bGU6ICdPb3BzICEnLHRlbXBsYXRlOiAnUGxlYXNlIEluc2VydCBuZXcgQ29kZSd9KTtcbiAgXHRcdH0gZWxzZSBpZigkc2NvcGUuaW5wdXQubmV3UGFzc3dvcmQgIT09ICRzY29wZS5pbnB1dC5yZVBhc3N3b3JkKSB7XG5cdFx0XHRcdCRpb25pY1BvcHVwLmFsZXJ0KHt0aXRsZTogJ09vcHMgIScsdGVtcGxhdGU6ICdyZSBjb2RlIGlzIG5vdCBzYW1lIGFzIG5ldyBjb2RlJ30pO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0JGlvbmljUG9wdXAuYWxlcnQoe3RpdGxlOiAnU3VjY2VzcyAhJyx0ZW1wbGF0ZTogJ0NvZGUgaGFzIGJlZW4gY2hhbmdlZCd9KTtcbiAgXHRcdFx0bG9jYWxTdG9yYWdlLmNvZGUgPSAkc2NvcGUuaW5wdXQubmV3UGFzc3dvcmQ7XG4gIFx0XHRcdCRzY29wZS5pbnB1dCA9IHt9O1xuICBcdFx0fVxuICBcdH07XG5cblxuXG4gIH0pOyIsIi8qKlxuICogUGVybWlzc2lvbiBDb250cm9sbGVyXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignUGVybWlzc2lvbkNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljUG9wdXAsICRxLCAkaHR0cCwgJGlvbmljTG9hZGluZykge1xuICAgICRzY29wZS5pc0FsbG93ID0gZmFsc2U7XG4gICAgJHNjb3BlLnBlcm1pc3Npb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5wZXJtaXNzaW9uKTtcblxuICAgICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBcdGxvY2FsU3RvcmFnZS5wZXJtaXNzaW9uID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnBlcm1pc3Npb24pO1xuICAgIH07XG5cbiAgICBCaW51c01heWEucHJvbXB0UGFzc3dvcmQoJ3NldHRpbmdzJywgJHNjb3BlKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgXG4gICAgfSk7XG4gIH0pOyIsIi8qKlxuICogU2NoZWR1bGUgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NjaGVkdWxlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGlvbmljUG9wdXAsICR0aW1lb3V0LCAkaW9uaWNIaXN0b3J5LCAkcm9vdFNjb3BlLCAkaW9uaWNQbGF0Zm9ybSwgQmludXNNYXlhLCAkcSwgJGh0dHAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gdHJ1ZTtcbiAgICAkaW9uaWNQbGF0Zm9ybS5vbkhhcmR3YXJlQmFja0J1dHRvbihmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZ2V0U3RhdGUgPSBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgdG9kYXkgPSBtb21lbnQoKTtcbiAgICAgIC8vdG9kYXlcbiAgICAgIGlmIChtb21lbnQoZCkuaXNTYW1lKHRvZGF5LCAnZGF5JykpIHtcbiAgICAgICAgcmV0dXJuICd0b2RheSc7XG4gICAgICB9IGVsc2VcbiAgICAgIC8vdG9tb3Jyb3dcbiAgICAgIGlmIChtb21lbnQoZCkuaXNTYW1lKHRvZGF5LmFkZCgxLCAnZCcpLCAnZGF5JykpIHtcbiAgICAgICAgcmV0dXJuICd0b21vcnJvdyc7XG4gICAgICB9IGVsc2VcbiAgICAgIC8vbGFzdGVkXG4gICAgICBpZiAobW9tZW50KGQpIDwgdG9kYXkpIHtcbiAgICAgICAgcmV0dXJuICdjb21wbGV0byc7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRDb3Vyc2VTdGF0ZSA9IGZ1bmN0aW9uKGQsIG0pIHtcbiAgICAgIHZhciBub3cgPSBtb21lbnQoKSxcbiAgICAgICAgZ2V0TW9tZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBnZXRMYXN0ID0gbS5zcGxpdChcIi1cIilbMV0uc3BsaXQoXCI6XCIpLFxuICAgICAgICAgIGdldEhvdXIgPSBwYXJzZUludChnZXRMYXN0WzBdKSxcbiAgICAgICAgICBnZXRNaW51dGUgPSBwYXJzZUludChnZXRMYXN0WzFdKTtcblxuICAgICAgICBnZXRNb21lbnQgPSBtb21lbnQoZCkuaG91cihnZXRIb3VyKS5taW51dGUoZ2V0TWludXRlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZ2V0TW9tZW50ID0gbW9tZW50KGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2V0TW9tZW50IDwgbm93KSB7XG4gICAgICAgIHJldHVybiAnY29tcGxldG8nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IGZhbHNlO1xuICAgICRzY29wZS5zY2hlZHVsZSA9IFtdO1xuXG4gICAgdmFyIHRvSnNvbiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBoYXNpbCA9IFtdO1xuICAgICAgJChkYXRhKS5maW5kKCd0cicpLmVhY2goZnVuY3Rpb24oaSwgYSkge1xuICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGh0LmVxKDMpLmh0bWwoKS5tYXRjaCgvKC4qKS0oLiopLyk7XG4gICAgICAgICAgaGFzaWwucHVzaCh7XG4gICAgICAgICAgICBkYXRlOiBodC5lcSgwKS5odG1sKCksXG4gICAgICAgICAgICB0aW1lOiBodC5lcSgxKS5odG1sKCksXG4gICAgICAgICAgICBzdGF0ZTogaHQuZXEoMikuaHRtbCgpLFxuICAgICAgICAgICAgY291cnNlOiBtYXRjaFsyXSxcbiAgICAgICAgICAgIGNvZGU6IG1hdGNoWzFdLFxuICAgICAgICAgICAgbXlDbGFzczogaHQuZXEoNSkuaHRtbCgpLFxuICAgICAgICAgICAgcm9vbTogaHQuZXEoNikuaHRtbCgpLFxuICAgICAgICAgICAgYnVpbGRpbmc6IGh0LmVxKDcpLmh0bWwoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBoYXNpbDtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hKYWR3YWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBfc2NoZWR1bGUgPSAkKGRhdGEpLmZpbmQoXCJ0YWJsZVwiKSxcbiAgICAgICAgICAgICAgdG9kYXkgPSB0b0pzb24oX3NjaGVkdWxlLmVxKDApLmh0bWwoKSksXG4gICAgICAgICAgICAgIG5leHQgPSB0b0pzb24oX3NjaGVkdWxlLmVxKDEpLmh0bWwoKSksXG4gICAgICAgICAgICAgIHNrZWR1bCA9IHRvZGF5LmNvbmNhdChuZXh0KSxcbiAgICAgICAgICAgICAgamFkd2FsID0gQmludXNNYXlhLmdyb3VwaW5nKHNrZWR1bCk7XG4gICAgICAgICAgICBpZihqYWR3YWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuamFkd2FsID0gSlNPTi5zdHJpbmdpZnkoamFkd2FsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBqYWR3YWw6IGphZHdhbCwgbGFzdFVwZGF0ZTogbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9zY2hlZHVsZS5odG1sJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fSxcbiAgICAgICAgICAgICAgICBkID0gYy5yZXN1bHQ7XG4gICAgICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtkLm5hbWVdID0gZC52YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEuX19FVkVOVFRBUkdFVCA9ICdjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGJ0blNjaGVkdWxlJztcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoX2JpbWF5X2FwaV91cmwgKyAnL0xNUy9NeUNsYXNzLmFzcHgnLCAncG9zdCcsIGRhdGEsIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gc2NoZWR1bGUgcGFnZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5yZXN1bHQpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoSmFkd2FsKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgICRyb290U2NvcGUuZ2V0TGFzdFVwZGF0ZSgpO1xuICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICRzY29wZS5zY2hlZHVsZSA9IGRhdGEuamFkd2FsO1xuICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlcnJIYW5kbGUoZSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5qYWR3YWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICAgJHNjb3BlLnNjaGVkdWxlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuamFkd2FsKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coe3RlbXBsYXRlVXJsOiAndmlld3MvbW9kdWxlL2xvYWRpbmcuaHRtbCcsbm9CYWNrZHJvcDogdHJ1ZX0pO1xuICAgICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG4iLCIvKipcbiAqIFNlcnZpY2VzIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgUGVkb3ggPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NlcnZpY2VzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0JpbnVzTWF5YScsICckaW9uaWNOYXZCYXJEZWxlZ2F0ZScsXG5mdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUpIHtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
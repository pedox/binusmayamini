var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya",function(t,e,a,n,o){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),e.profileImage="undefined"==typeof localStorage.profileImage?!1:localStorage.profileImage,delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){localStorage.clear(),window.location.hash="#/",a.clearHistory(),n.showBackButton(!1),location.reload()},e.getProfileImage=function(){o.getProfileImage(function(t){localStorage.profileImage=t,e.profileImage=t},function(){})},window.location.hash=e.login?"/schedule":"/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,a=JSON.parse(localStorage.loginId);return t(function(t,n){return localStorage.templogin!==!0?e.api("/","get").then(function(t){200!==t.code&&n(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=a.binusid,o.txtPassword=a.password,o.btnLogin="Log In ",e.api("/","post",o)},n).then(function(){localStorage.templogin=!0,t(!0)},n):(t(!0),void 0)})},api:function(e,a,n,o){var r=this;return void 0===localStorage.cookie?r._getCookie().then(function(){return r.api(e,a,n)}):t(function(t,i){"get"===a?httpclient.get(o?e:r._bimay_url+e,t,i,{headers:r.headers()}):httpclient.post(o?e:r._bimay_url+e,n,t,i,{headers:r.headers()})})},frame:function(e){var a=this,n="";return t(function(t,o){return a.api(e,"get").then(function(t){return a.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return n=$(t.result).find("#ifrApp").attr("src"),a.api(n,"get",{},!0)},o).then(function(e){t({url:n,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,a){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):a(e)},t)})},promptPassword:function(t,a){a.promptPass={};var n=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter Binusmaya Password",subTitle:"Please enter binusmaya password to access this page",scope:a,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+t,n.close()}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(t){var e=JSON.parse(localStorage.loginId).password;return e==a.promptPass.password?(a.promptPass={},a.isAllow=!0,!0):(a.promptPass.error=!0,a.promptPass.password="",t.preventDefault(),void 0)}}]})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],a="",n=-1,o=0;return t.forEach(function(t){a==t.date?(e[n].data[o]=t,o++):(o=1,n++,a=t.date,e[n]={date:t.date,data:[]},e[n].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,a){var n=!1,o=t.defer(),r="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var i in r)r[i].code==e.code&&(n=i);return n?o.resolve(n):a.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("AbsenceController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,c,s,u,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){e.length>0&&(localStorage.absence=JSON.stringify(e),t.absence=e),t.$broadcast("scroll.refreshComplete")})},function(e){d(e),t.$broadcast("scroll.refreshComplete")})};var p=function(){return u(function(t,a){var n=function(t){function e(t){return/baik/.test(t)?"balanced":/warning/.test(t)?"calm":/maximum/.test(t)?"energized":/overlimit/.test(t)?"assertive":void 0}var a=[],n=0;return $(t).find("#rptTable tr").each(function(t){var o=$(this).find("td");t>0&&(o.length>=8?(a[n]={name:o.eq(0).html(),absence:[{max:o.eq(3).html(),total:o.eq(4).html(),component:o.eq(2).text(),status:e(o.eq(5).find("img").attr("src"))}]},n++):a[n-1].absence.push({max:o.eq(2).html(),total:o.eq(3).html(),component:o.eq(1).text(),status:e(o.eq(4).find("img").attr("src"))}))}),a};"undefined"==typeof httpclient?o.get("http://localhost:2505/absence.html").then(function(e){t(n(e.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl01_linkMenuStudent").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl02_linkSubMenu").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(e){t(n(e.result))},function(){a("can't access to main frame")})})};t.absence=!1,"undefined"!=typeof localStorage.absence&&(t.absence=JSON.parse(localStorage.absence));var d=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScheduleController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,c,s,u,f){t.doRefresh=function(){p().then(function(e){t.$applyAsync(function(){e.length>0&&(localStorage.examSchedule=JSON.stringify(e),t.examScheduleList=e),t.$broadcast("scroll.refreshComplete")})},function(e){d(e),t.$broadcast("scroll.refreshComplete")})};var p=function(){return u(function(t,a){var n=function(t){for(var a=[],n=0;n<t.length;n++){var o=$(t[n]).find("table:eq(2) tr td li").text();$(t[n]).find(".tablewithborder tr").each(function(t,e){t>0&&a.push({term:o,code:$(e).find("td").eq(0).text(),name:$(e).find("td").eq(1).text(),sks:$(e).find("td").eq(2).text(),date:$(e).find("td").eq(3).text(),hour:$(e).find("td").eq(4).text(),room:$(e).find("td").eq(5).text(),campus:$(e).find("td").eq(6).text(),className:$(e).find("td").eq(7).text(),seat:parseInt($(e).find("td").eq(8).text())})})}return e.grouping(_.sortBy(a,"date"))},r=[],i="";"undefined"==typeof httpclient?o.get("http://localhost:2505/exam.html").then(function(t){return r.push(t.data),o.get("http://localhost:2505/exam-practicum.html")},a).then(function(e){r.push(e.data),t(n(r))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl02_linkMenuStudent").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(t){return i=t.result,e.api($(i).find(".itemContentService li:eq(0) a").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(t){return r.push(t.result),e.api($(i).find(".itemContentService li:eq(1) a").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(t){return r.push(t.result),e.api($(i).find(".itemContentService li:eq(2) a").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(e){r.push(e.result),t(n(r))},function(){a("can't access to main frame")})})};t.examScheduleList=!1,"undefined"!=typeof localStorage.examSchedule&&(t.examScheduleList=JSON.parse(localStorage.examSchedule));var d=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http",function(t,e,a,n,o){t.isAllow=!1,t.doRefresh=function(){r().then(function(e){t.$applyAsync(function(){t.financeList=e,t.$broadcast("scroll.refreshComplete")})},function(e){i(e),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var r=function(){return n(function(t,a){var n=function(t){var a=0;try{a=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(n){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:isNaN(parseInt(e.eq(5).html()))===!0?0:parseInt(e.eq(5).html()),payment:isNaN(parseInt(e.eq(6).html()))===!0?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:isNaN(parseInt(e.eq(7).html()))===!0?0:parseInt(e.eq(7).html())})});var r={data:e.grouping(o),billing:a,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return localStorage.finance=JSON.stringify(r),r};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(n(e.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(e){t(n(e.result))},function(){a("can't access to main frame")})})};t.financeList=!1,"undefined"!=typeof localStorage.finance&&(t.financeList=JSON.parse(localStorage.finance));var i=function(e){a.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t)}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,a,n,o,r,i){r.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",n.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,i.api("/","get").then(function(e){200!==e.code&&a(e);var n={};return $($(e.result).serializeArray()).each(function(t,e){n[e.name]=e.value}),n.txtUserId=t.binusid,n.txtPassword=t.password,n.btnLogin="Log In ",i.api("/","post",n)},a).then(function(e){var i=$(e.result).find("#content #topbar .right strong");200!==e.code&&a(e),i.length<=0?a(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=i.text(),r.login=!0,r.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,window.location.hash="#/schedule",n.clearHistory(),o.showBackButton(!1))},a);var a=function(a,n){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:n?n:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,c,s,u){l.noHeader=!1,l.leftMenu=!0,c.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var f=function(){return s(function(t,a){e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(e){var a=[];$(e.result.result).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,e){var n=$(e).find("a").html(),o=n.match(/^(.*)-(.*) \((.*)\)/i);a.push({indexItem:t,name:o[2],url:$(e).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(a),t(a)},function(){a("can't access to my class")})})};t.doRefresh=function(){f().then(function(a){a.length>0?t.classData=a:e("You don't have any class"),t.$broadcast("scroll.refreshComplete")},e);var e=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset",function(t,e,a,n,o,r,i,l,c,s,u,f){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[f],t.isPageTopic=!1;var p=function(t){return s(function(a,n){e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){n("can't access to my class")}).then(function(t){var e=t.result,n=$(e).find("#desc_course_desc > span").html(),o=$(e).find("#desc_grad_compete > span").html(),r=[];$(e).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&r.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})});var i={main_description:n,grad_description:o,course:r};a(i)},function(){n("can't access to course page")})})};"undefined"==typeof t.classData[f].detail?p(t.classData[f].url).then(function(e){t.classData[f].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[f].detail}),t.$broadcast("scroll.refreshComplete")},d):(t.state.loading=!1,t.state.isData=t.classData[f].detail),t.isPageTopic===!1?(t.infoTab="active",t.topicsTab=""):(t.infoTab="",t.topicsTab="active"),t.switchTab=function(e){0===e&&(t.isPageTopic=!1,t.infoTab="active",t.topicsTab=""),1===e&&(t.isPageTopic=!0,t.infoTab="",t.topicsTab="active")};var d=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http",function(t,e,a,n,o,r,i,l,c){if(o.noHeader=!1,o.leftMenu=!0,r.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var a=moment(),n=null;try{var o=e.split("-")[1].split(":"),r=parseInt(o[0]),i=parseInt(o[1]);n=moment(t).hour(r).minute(i)}catch(l){n=moment(t)}return a>n?"completo":void 0},t.isSchedule=!1,t.schedule=[],localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(s){}var u=function(t){var e=[];return $(t).find("tr").each(function(t){var a=$(this).find("td");if(t>0){var n=a.eq(3).html().match(/(.*)-(.*)/);e.push({date:a.eq(0).html(),time:a.eq(1).html(),state:a.eq(2).html(),course:n[2],code:n[1],myClass:a.eq(5).html(),room:a.eq(6).html(),building:a.eq(7).html()})}}),e},f=function(){return l(function(t,e){var a=function(t){var e=$(t).find("table"),a=u(e.eq(0).html()),n=u(e.eq(1).html()),o=a.concat(n);return localStorage.jadwal=JSON.stringify(i.grouping(o)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:JSON.parse(localStorage.jadwal),lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?c.get("http://localhost:2505/schedule.html").then(function(e){t(a(e.data))},e):i.checkLogin().then(function(){return i.api("/","get")},function(){e("can't re-auth your account")}).then(function(t){return i.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){e("can't access to main frame")}).then(function(t){var e={},a=t.result;return $($(a.result).serializeArray()).each(function(t,a){e[a.name]=a.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",i.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){e("can't access frame")}).then(function(e){t(a(e.result))},function(){e("can't access schedule page")})})};t.doRefresh=function(){f().then(function(e){t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),e.jadwal.length>0?(t.isSchedule=!0,t.schedule=e.jadwal):a("No Schedule found")},a);var a=function(a){e.alert({title:"Oops !",template:a}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvYWJzZW5jZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvZXhhbVNjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9maW5hbmNlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9sb2dpbi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzcy5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzc0luc2lkZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2NoZWR1bGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NlcnZpY2VzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxXQUFBLFNBQ0EsT0FBQSxVQUNBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxJQUFBLFFBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxxQkFFQSxLQUFBLGlCQUFBLGFBQUEsZ0JBQUEsdUJBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLE1BQUEsbUJBQUEsY0FBQSxTQUFBLEVBQUEsYUFBQSxRQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLE1BQUEsS0FBQSxhQUFBLE1BQUEsY0FDQSxFQUFBLGFBQUEsbUJBQUEsY0FBQSxjQUFBLEVBQUEsYUFBQSxtQkFDQSxjQUFBLGFBQ0EsY0FBQSxVQUVBLEVBQUEsTUFBQSxXQUNBLEVBQUEsYUFDQSxRQUFBLEdBSUEsT0FBQSxTQUFBLE9BQUEsUUFBQSxRQUFBLFVBQ0EsUUFBQSxRQUFBLFNBQUEsMEJBQUEsR0FFQSxPQUFBLFdBQ0EsVUFBQSxpQkFJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFdBQUEsbUJBQUEsY0FBQSxXQUFBLFdBQUEsYUFBQSxZQUVBLEVBQUEsZ0JBQ0EsRUFBQSxPQUFBLFdBQ0EsYUFBQSxRQUNBLE9BQUEsU0FBQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FDQSxTQUFBLFVBR0EsRUFBQSxnQkFBQSxXQUVBLEVBQUEsZ0JBQ0EsU0FBQSxHQUNBLGFBQUEsYUFBQSxFQUNBLEVBQUEsYUFBQSxHQUVBLGVBTUEsT0FBQSxTQUFBLEtBREEsRUFBQSxNQUNBLFlBRUEsT0FJQSxRQUFBLHVCQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsY0FBQSxHQUNBLEVBQUEsTUFBQSxTQUFBLEtDekVBLFNBQUEsT0FBQSx1QkFFQSxRQUFBLGFBQUEsS0FBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLE9BRUEsV0FBQSwrQkFDQSxlQUFBLG9DQUVBLFFBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxRQUNBLE9BQUEsYUFBQSxPQUFBLGFBQUEsT0FBQSxLQUNBLE9BQUEsRUFBQSxXQUNBLFFBQUEsRUFBQSxhQUdBLFdBQUEsV0FDQSxHQUFBLEdBQUEsS0FDQSxFQUFBLEtBQUEsTUFBQSxhQUFBLFFBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsY0FBQSxhQUFBLEVBR0EsRUFBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLEdBQ0EsS0FBQSxXQUNBLGFBQUEsV0FBQSxFQUNBLEdBQUEsSUFDQSxJQWpCQSxHQUFBLEdBQUEsV0FxQkEsSUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLElBRUEsT0FBQSxVQUFBLGFBQUEsT0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUNBLFdBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsRUFBQSxHQUNBLFFBQUEsRUFBQSxZQUdBLFdBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLGVBT0EsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxxQkFBQSxLQUFBLE9BQUEsUUFDQSxHQUNBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLFdBQUEsS0FBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLFVBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEdBQ0EsSUFBQSxFQUNBLE9BQUEsS0FFQSxNQUlBLFdBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsV0FBQSxJQUFBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE1BQ0EsYUFBQSxPQUFBLEVBQUEsT0FBQSxjQUNBLEdBQUEsSUFFQSxFQUFBLElBRUEsTUFHQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxJQUFBLEdBQUEsRUFBQSxNQUNBLFNBQUEscUlBQ0EsTUFBQSwyQkFDQSxTQUFBLHNEQUNBLE1BQUEsRUFDQSxVQUNBLEtBQUEsU0FDQSxNQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsV0FHQSxLQUFBLGVBQ0EsS0FBQSxrQkFDQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxNQUFBLGFBQUEsU0FBQSxRQUNBLE9BQUEsSUFBQSxFQUFBLFdBQUEsVUFDQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEdBQ0EsSUFFQSxFQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxpQkFGQSxjQVFBLGNBQUEsYUFHQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUNBLFFBRUEsSUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxDQWdCQSxPQWZBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUNBLE1BRUEsRUFBQSxFQUNBLElBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxLQUNBLFNBRUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxLQUdBLE9DNUpBLFFBQUEsT0FBQSxnQkFFQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQ0EsTUFBQSxTQUNBLElBQUEsSUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGlCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxnQkFDQSxXQUFBLHlCQUlBLE1BQUEsU0FDQSxJQUFBLFNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsYUFDQSxXQUFBLHNCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxzQkFDQSxXQUFBLHlCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxlQUNBLFdBQUEsd0JBSUEsTUFBQSxpQkFDQSxJQUFBLHdCQUNBLFNBQ0EsU0FBQSxLQUFBLGVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBUUEsT0FMQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxZQUFBLFVBRUEsRUFBQSxXQUdBLE9BQ0EsYUFDQSxZQUFBLFVBQUEscUJBQ0EsV0FBQSw4QkFJQSxNQUFBLGdCQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSw4QkFDQSxXQUFBLDZCQUlBLE1BQUEsYUFDQSxJQUFBLGNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSwyQkFDQSxXQUFBLDBCQUlBLE1BQUEsaUJBQ0EsSUFBQSxrQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxXQUNBLElBQUEsV0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxVQUNBLElBQUEsVUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGtCQUtBLEVBQUEsVUFBQSxjQ2hJQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLElBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsV0FBQSw2QkFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsV0FBQSw0QkFJQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxNQUFBLE9BQUEsS0FBQSxHQUNBLFdBQ0EsVUFBQSxLQUFBLEdBQ0EsT0FDQSxVQUFBLEtBQUEsR0FDQSxZQUNBLFlBQUEsS0FBQSxHQUNBLFlBREEsT0FSQSxHQUFBLE1BQUEsRUFBQSxDQW9DQSxPQXhCQSxHQUFBLEdBQUEsS0FBQSxnQkFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxHQUFBLElBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxVQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FBQSxXQUdBLEtBRUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxNQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FBQSxhQUtBLEVBRUEsb0JBQUEsWUFDQSxFQUFBLElBQUEsc0NBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsUUFBQSxLQUFBLDZEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaURBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxTQUFBLEVBQ0EsbUJBQUEsY0FBQSxVQUNBLEVBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxTQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDhCQ25IQSxJQUFBLFdBQUEsMEJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLElBRUEsYUFBQSxhQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsaUJBQUEsR0FFQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsNEJBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSx3QkFBQSxNQUNBLEdBQUEsRUFBQSxJQUFBLEtBQUEsdUJBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsRUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLElBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxZQUtBLE1BQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLFVBRUEsS0FDQSxFQUFBLEVBQ0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsbUNBQ0EsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSw4Q0FDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2REFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxLQUFBLFFBQUEsVUFBQSxJQUNBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxFQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLGtDQUFBLEtBQUEsUUFBQSxVQUFBLElBQ0EsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsS0FBQSxRQUFBLFVBQUEsSUFDQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsS0FDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxrQkFBQSxFQUNBLG1CQUFBLGNBQUEsZUFDQSxFQUFBLGlCQUFBLEtBQUEsTUFBQSxhQUFBLGNBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsOEJDbkhBLElBQUEsV0FBQSxxQkFDQSxTQUFBLFlBQUEsY0FBQSxLQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUFBLEVBRUEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsV0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsNkJBR0EsRUFBQSxRQUFBLFNBQUEsR0FDQSxJQUNBLE1BQUEsR0FBQSxRQUFBLEdBQUEsUUFBQSxzQkFBQSxPQUNBLE1BQUEsR0FDQSxNQUFBLElBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBQ0EsS0FDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEscUJBQUEsT0FBQSxNQUFBLFVBQUEsSUFDQSxNQUFBLElBQ0EsR0FBQSxLQUNBLEdBQUEsR0FBQSxLQUFBLHFCQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxLQUNBLEdBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsSUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsTUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxRQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLE9BQUEsTUFBQSxXQUNBLE9BQUEsTUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsV0FJQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFNBQUEsR0FDQSxRQUFBLEVBQ0EsV0FBQSxTQUFBLE9BQUEsdUJBR0EsT0FEQSxjQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFHQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSxzQ0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxFQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsNkRBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxpREFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFdBQ0EsRUFBQSxrQ0FNQSxHQUFBLGFBQUEsRUFDQSxtQkFBQSxjQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFBQSxhQUFBLFNBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsMEJBR0EsR0FBQSxlQUFBLFdBQUEsTUN0SEEsSUFBQSxXQUFBLG1CQUNBLFNBQUEsY0FBQSxXQUFBLGdCQUFBLHVCQUFBLGFBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEdBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBRUEsRUFBQSxpQkFDQSxhQUFBLElBR0EsRUFBQSxPQUFBLFdBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxTQUtBLENBQ0EsRUFBQSxXQUFBLGFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaUNBRUEsT0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGFBQUEsU0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FNQSxhQUFBLFFBQUEsS0FBQSxXQUNBLFFBQUEsRUFBQSxRQUNBLFNBQUEsRUFBQSxXQUdBLGFBQUEsU0FBQSxFQUNBLGFBQUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxVQUFBLGFBQUEsTUFBQSxjQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLE9BQUEsU0FBQSxLQUFBLGFBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsS0FHQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsRUFBQSxFQUFBLDJCQTFEQSxHQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsOENDYkEsSUFBQSxXQUFBLHFCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFlBQUEsZUFBQSxXQUFBLGFBQUEsaUJBQUEsS0FBQSxjQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsbUJBR0EsRUFBQSxVQUFBLG1CQUFBLGNBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxVQUFBLENBRUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxLQUdBLEdBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2Q0FBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsdUJBQ0EsR0FBQSxNQUNBLFVBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQSxRQUNBLEtBQUEsRUFBQSxHQUNBLFVBQUEsRUFBQSxPQUdBLGFBQUEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLElBQ0EsV0FDQSxFQUFBLGdDQUtBLEdBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxVQUFBLEVBRUEsRUFBQSw0QkFFQSxFQUFBLFdBQUEsMkJBQ0EsRUFFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwrQkNsRUEsSUFBQSxXQUFBLDJCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFlBQUEsZUFBQSxXQUFBLGFBQUEsaUJBQUEsS0FBQSxjQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsRUFDQSxFQUFBLE9BQ0EsUUFBQSxFQUNBLFNBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxhQUFBLENBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxFQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsZUFBQSxRQUFBLEVBQUEsVUFBQSxJQUNBLFdBQ0EsRUFBQSw4QkFFQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsNEJBQUEsT0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLDZCQUFBLE9BQ0EsSUFFQSxHQUFBLEdBQUEsS0FBQSw4REFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsUUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLFFBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxtQkFBQSxPQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsZ0JBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxvQkFBQSxLQUFBLFdBS0EsSUFBQSxJQUNBLGlCQUFBLEVBQ0EsaUJBQUEsRUFDQSxPQUFBLEVBRUEsR0FBQSxJQUNBLFdBQ0EsRUFBQSxtQ0FLQSxvQkFBQSxHQUFBLFVBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxVQUFBLEdBQUEsS0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxPQUFBLEVBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsR0FBQSxTQUVBLEVBQUEsV0FBQSwyQkFDQSxJQUVBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxVQUFBLEdBQUEsUUFHQSxFQUFBLGVBQUEsR0FDQSxFQUFBLFFBQUEsU0FDQSxFQUFBLFVBQUEsS0FFQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFVBQUEsVUFHQSxFQUFBLFVBQUEsU0FBQSxHQUNBLElBQUEsSUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFFBQUEsU0FDQSxFQUFBLFVBQUEsSUFFQSxJQUFBLElBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLFVBSUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsOEJDMUdBLElBQUEsV0FBQSxzQkFDQSxTQUFBLGNBQUEsV0FBQSxnQkFBQSxhQUFBLGlCQUFBLFlBQUEsS0FBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBNkNBLEdBM0NBLEVBQUEsVUFBQSxFQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsbUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFFQSxPQUFBLFFBQUEsR0FBQSxPQUFBLEVBQUEsT0FDQSxRQUdBLE9BQUEsR0FBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsT0FDQSxXQUdBLE9BQUEsR0FBQSxFQUNBLFdBREEsUUFLQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQ0EsRUFBQSxJQUNBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSxLQUNBLEVBQUEsU0FBQSxFQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLE9BQUEsR0FBQSxLQUFBLEdBQUEsT0FBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLE9BQUEsR0FHQSxNQUFBLEdBQUEsRUFDQSxXQURBLFFBS0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxZQUVBLGFBQUEsT0FDQSxJQUNBLEtBQUEsTUFBQSxhQUFBLFFBQUEsT0FBQSxJQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLE1BQUEsYUFBQSxTQUVBLE1BQUEsSUFLQSxHQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsS0FpQkEsT0FoQkEsR0FBQSxHQUFBLEtBQUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxJQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxPQUFBLE1BQUEsWUFDQSxHQUFBLE1BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBSUEsR0FHQSxFQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLE9BQUEsRUFHQSxPQUZBLGNBQUEsT0FBQSxLQUFBLFVBQUEsRUFBQSxTQUFBLElBQ0EsYUFBQSxXQUFBLFNBQUEsT0FBQSx3QkFDQSxPQUFBLEtBQUEsTUFBQSxhQUFBLFFBQUEsV0FBQSxhQUFBLFlBR0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsdUNBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxNQUNBLEVBQUEsRUFBQSxNQUtBLE9BSkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLGNBQUEsd0NBQ0EsRUFBQSxJQUFBLGVBQUEsb0JBQUEsT0FBQSxHQUFBLElBQ0EsV0FDQSxFQUFBLHdCQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsV0FDQSxFQUFBLGtDQU1BLEdBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLDBCQUNBLEVBQUEsZ0JBQ0EsRUFBQSxPQUFBLE9BQUEsR0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxRQUVBLEVBQUEsc0JBRUEsRUFFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwrQkNySkEsSUFBQSxXQUFBLHNCQUFBLFNBQUEsWUFBQSx1QkFDQSIsImZpbGUiOiJ3d3cvanMvY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJJTlVTTUFZQSBNT0RVTEVcbiAqIEBhdXRob3IgUGVkb3ggPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuXG5cbi8vIGFuZ3VsYXIubW9kdWxlIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhciBtb2R1bGVzXG4vLyAnc3RhcnRlcicgaXMgdGhlIG5hbWUgb2YgdGhpcyBhbmd1bGFyIG1vZHVsZSBleGFtcGxlIChhbHNvIHNldCBpbiBhIDxib2R5PiBhdHRyaWJ1dGUgaW4gaW5kZXguaHRtbClcbi8vIHRoZSAybmQgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9mICdyZXF1aXJlcydcblxudmFyIHZpZXdfcGF0aCA9ICd2aWV3cy8nLFxuICBwY29sb3IgPSAnIzFDNTM2RicsXG4gIF9iaW1heV91cmwgPSAnaHR0cDovL2JpbnVzbWF5YS5iaW51cy5hYy5pZCcsXG4gIF9iaW1heV9hcGlfdXJsID0gJ2h0dHA6Ly9hcHBzLmJpbnVzbWF5YS5iaW51cy5hYy5pZCc7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQmludXNNYXlhJywgWydpb25pYycsICdsaXN0Um91dGUnLCAnQmludXNNYXlhRmFjdG9yeSddKVxuXG4ucnVuKGZ1bmN0aW9uKCRpb25pY1BsYXRmb3JtLCAkcm9vdFNjb3BlLCAkaW9uaWNIaXN0b3J5LCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgQmludXNNYXlhKSB7XG5cbiAgJHJvb3RTY29wZS5sb2dpbiA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLmlzbG9naW4gPT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogbG9jYWxTdG9yYWdlLmlzbG9naW4pO1xuICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gZmFsc2U7XG4gICRyb290U2NvcGUubG9naW5OYW1lID0gdHlwZW9mIGxvY2FsU3RvcmFnZS5mbmFtZSA9PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAkcm9vdFNjb3BlLnByb2ZpbGVJbWFnZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UucHJvZmlsZUltYWdlID09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IGxvY2FsU3RvcmFnZS5wcm9maWxlSW1hZ2U7XG4gIGRlbGV0ZSBsb2NhbFN0b3JhZ2UuY29va2llO1xuICBkZWxldGUgbG9jYWxTdG9yYWdlLnRlbXBsb2dpbjtcblxuICAkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkcm9vdFNjb3BlLm9uTG9hZFN0eWxlID0ge1xuICAgICAgb3BhY2l0eTogMVxuICAgIH07XG4gICAgLy8gSGlkZSB0aGUgYWNjZXNzb3J5IGJhciBieSBkZWZhdWx0IChyZW1vdmUgdGhpcyB0byBzaG93IHRoZSBhY2Nlc3NvcnkgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgIC8vIGZvciBmb3JtIGlucHV0cylcbiAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcih0cnVlKTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gIH0pO1xuXG4gICRyb290U2NvcGUuZ2V0TGFzdFVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICRyb290U2NvcGUubGFzdFVwZGF0ZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwiV2hhdGV2ZXJcIiA6IGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlO1xuICB9O1xuICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUoKTtcbiAgJHJvb3RTY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjLyc7XG4gICAgJGlvbmljSGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcbiAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFja0J1dHRvbihmYWxzZSk7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH07XG5cbiAgJHJvb3RTY29wZS5nZXRQcm9maWxlSW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAvKiogcGVmb3JtIGF2YXRhciAqKi9cbiAgICBCaW51c01heWEuZ2V0UHJvZmlsZUltYWdlKFxuICAgICAgZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucHJvZmlsZUltYWdlID0gZG9uZTtcbiAgICAgICAgJHJvb3RTY29wZS5wcm9maWxlSW1hZ2UgPSBkb25lO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKCkge1xuXG4gICAgICB9KTtcbiAgfTtcblxuICBpZiAoJHJvb3RTY29wZS5sb2dpbikge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJy9zY2hlZHVsZSc7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnLyc7XG4gIH1cbn0pXG5cbi5jb25maWcoZnVuY3Rpb24oJGlvbmljQ29uZmlnUHJvdmlkZXIpIHtcbiAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MuZm9yd2FyZENhY2hlKGZhbHNlKTtcbiAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MubWF4Q2FjaGUoMCk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdCaW51c01heWFGYWN0b3J5JywgW10pXG5cbi5mYWN0b3J5KCdCaW51c01heWEnLCBmdW5jdGlvbigkcSwgJGlvbmljUG9wdXApIHtcbiAgcmV0dXJuIHtcblxuICAgIF9iaW1heV91cmw6ICdodHRwOi8vYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcbiAgICBfYmltYXlfYXBpX3VybDogJ2h0dHA6Ly9hcHBzLmJpbnVzbWF5YS5iaW51cy5hYy5pZCcsXG5cbiAgICBoZWFkZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBDb29raWU6IGxvY2FsU3RvcmFnZS5jb29raWUgPyBsb2NhbFN0b3JhZ2UuY29va2llIDogbnVsbCxcbiAgICAgICAgT3JpZ2luOiBfdC5fYmltYXlfdXJsLFxuICAgICAgICBSZWZlcmVyOiBfdC5fYmltYXlfdXJsXG4gICAgICB9O1xuICAgIH0sXG4gICAgY2hlY2tMb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgdmFyIGxvZ2luID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCk7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudGVtcGxvZ2luID09PSB0cnVlKSB7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gX3QuYXBpKCcvJywgJ2dldCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIGlmIChkLmNvZGUgIT09IDIwMCkgcmVqZWN0KGQpO1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLnR4dFVzZXJJZCA9IGxvZ2luLmJpbnVzaWQ7XG4gICAgICAgICAgICAgIGRhdGEudHh0UGFzc3dvcmQgPSBsb2dpbi5wYXNzd29yZDtcbiAgICAgICAgICAgICAgZGF0YS5idG5Mb2dpbiA9IFwiTG9nIEluIFwiO1xuICAgICAgICAgICAgICByZXR1cm4gX3QuYXBpKCcvJywgJ3Bvc3QnLCBkYXRhKTtcbiAgICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnRlbXBsb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFwaTogZnVuY3Rpb24oZW5kcG9pbnQsIG1ldGhvZCwgcGFyYW1zLCBub0VuZHBvaW50KSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgdHlwZW9mIG5vRW5kcG9pbnQgIT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IHRydWU7XG4gICAgICBpZiAobG9jYWxTdG9yYWdlLmNvb2tpZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBfdC5fZ2V0Q29va2llKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoZW5kcG9pbnQsIG1ldGhvZCwgcGFyYW1zKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpZiAobWV0aG9kID09PSBcImdldFwiKSB7XG4gICAgICAgICAgICBodHRwY2xpZW50LmdldCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgcmVzb2x2ZSwgcmVqZWN0LCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IF90LmhlYWRlcnMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBjbGllbnQucG9zdCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgcGFyYW1zLCByZXNvbHZlLCByZWplY3QsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogX3QuaGVhZGVycygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmcmFtZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzLFxuICAgICAgICBfdXJsID0gJyc7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiBfdC5hcGkodXJsLCAnZ2V0JylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKCQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3AxX2lmckFwcFwiKS5hdHRyKFwic3JjXCIpLCAnZ2V0Jyk7XG4gICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIF91cmwgPSAkKGQucmVzdWx0KS5maW5kKFwiI2lmckFwcFwiKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaShfdXJsLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgdXJsOiBfdXJsLFxuICAgICAgICAgICAgICByZXN1bHQ6IGRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgX2dldENvb2tpZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBodHRwY2xpZW50LmdldChfdC5fYmltYXlfdXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jb29raWUgPSBkYXRhLmhlYWRlclsnU2V0LUNvb2tpZSddO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHByb21wdFBhc3N3b3JkOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NvcGUpIHtcbiAgICAgIHNjb3BlLnByb21wdFBhc3MgPSB7fTtcbiAgICAgIHZhciBteVBvcHVwID0gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICAgIHRlbXBsYXRlOiAnPHAgbmctc2hvdz1cInByb21wdFBhc3MuZXJyb3JcIj5JbmNvcnJlY3QgUGFzc3dvcmQ8L3A+PGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwicHJvbXB0UGFzcy1mb3JtXCIgbmctbW9kZWw9XCJwcm9tcHRQYXNzLnBhc3N3b3JkXCI+JyxcbiAgICAgICAgdGl0bGU6ICdFbnRlciBCaW51c21heWEgUGFzc3dvcmQnLFxuICAgICAgICBzdWJUaXRsZTogJ1BsZWFzZSBlbnRlciBiaW51c21heWEgcGFzc3dvcmQgdG8gYWNjZXNzIHRoaXMgcGFnZScsXG4gICAgICAgIHNjb3BlOiBzY29wZSxcbiAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICB0ZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIy8nICsgbG9jYXRpb247XG4gICAgICAgICAgICBteVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgdGV4dDogJzxiPkVudGVyPC9iPicsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBteXBhc3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5sb2dpbklkKS5wYXNzd29yZDtcbiAgICAgICAgICAgIGlmIChteXBhc3MgPT0gc2NvcGUucHJvbXB0UGFzcy5wYXNzd29yZCkge1xuICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzID0ge307XG4gICAgICAgICAgICAgIHNjb3BlLmlzQWxsb3cgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjb3BlLnByb21wdFBhc3MuZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzLnBhc3N3b3JkID0gXCJcIjtcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgX3JlcXVlc3RFcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgfSxcbiAgICBncm91cGluZzogZnVuY3Rpb24oX2RhdGEpIHtcbiAgICAgIGlmIChfZGF0YS5sZW5ndGggPD0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgbSA9IFtdLFxuICAgICAgICBwID0gJycsXG4gICAgICAgIGMgPSAtMSxcbiAgICAgICAgY2ggPSAwO1xuICAgICAgX2RhdGEuZm9yRWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgIGlmIChwID09IGQuZGF0ZSkge1xuICAgICAgICAgIG1bY10uZGF0YVtjaF0gPSBkO1xuICAgICAgICAgIGNoKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2ggPSAxO1xuICAgICAgICAgIGMrKztcbiAgICAgICAgICBwID0gZC5kYXRlO1xuICAgICAgICAgIG1bY10gPSB7XG4gICAgICAgICAgICBkYXRlOiBkLmRhdGUsXG4gICAgICAgICAgICBkYXRhOiBbXVxuICAgICAgICAgIH07XG4gICAgICAgICAgbVtjXS5kYXRhWzBdID0gZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbTtcbiAgICB9XG4gIH07XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnbGlzdFJvdXRlJywgW10pXG5cbi5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCdpbmRleCcsIHtcbiAgICAgIHVybDogJy8nLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ2xvZ2luLmh0bWwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnc2NoZWR1bGUnLCB7XG4gICAgICB1cmw6ICcvc2NoZWR1bGUnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NjaGVkdWxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdTY2hlZHVsZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnYWJvdXQnLCB7XG4gICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ2Fib3V0Lmh0bWwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnZm9ydW0nLCB7XG4gICAgICB1cmw6ICcvZm9ydW0nLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ2ZvcnVtLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdGb3J1bUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnc2VydmljZXMnLCB7XG4gICAgICB1cmw6ICcvc2VydmljZXMnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2luZGV4Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJ2aWNlc0NvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnbXljbGFzcycsIHtcbiAgICAgIHVybDogJy9teWNsYXNzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdteWNsYXNzLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUNsYXNzQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdteWNsYXNzRGV0YWlsJywge1xuICAgICAgdXJsOiAnL215Y2xhc3MtZGV0YWlsLzpjb2RlJyxcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgZGF0YXNldDogZnVuY3Rpb24oJHEsICRzdGF0ZVBhcmFtcywgJGxvY2F0aW9uKSB7XG4gICAgICAgICAgdmFyIF9nb3QgPSBmYWxzZTtcbiAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgIHZhciBjbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG4gICAgICAgICAgZm9yICh2YXIgZCBpbiBjbGFzc0RhdGEpIHtcbiAgICAgICAgICAgIGlmIChjbGFzc0RhdGFbZF0uY29kZSA9PSAkc3RhdGVQYXJhbXMuY29kZSkge1xuICAgICAgICAgICAgICBfZ290ID0gZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF9nb3QpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2dvdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbXljbGFzcycpLnJlcGxhY2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbXljbGFzc0luc2lkZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTXlDbGFzc0RldGFpbENvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnZXhhbVNjaGVkdWxlJywge1xuICAgICAgdXJsOiAnL2V4YW0tc2NoZWR1bGUnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2V4YW0tc2NoZWR1bGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0V4YW1TY2hlZHVsZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnZXhhbVNjb3JlJywge1xuICAgICAgdXJsOiAnL2V4YW0tc2NvcmUnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2V4YW0tc2NvcmUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0V4YW1TY29yZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnZmluYW5jZVN0YXR1cycsIHtcbiAgICAgIHVybDogJy9maW5hbmNlLXN0YXR1cycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvYmlsbGluZy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRmluYW5jZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnYWJzZW5jZScsIHtcbiAgICAgIHVybDogJy9hYnNlbmNlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9hYnNlbmNlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYnNlbmNlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdjb21pbmcnLCB7XG4gICAgICB1cmw6ICcvY29taW5nJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdjb21pbmcuaHRtbCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvY29taW5nXCIpO1xufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ0Fic2VuY2VDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRodHRwLCAkbG9jYXRpb24sXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCkge1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaEFic2VuY2UoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYWJzZW5jZSA9IEpTT04uc3RyaW5naWZ5KGRvbmUpO1xuICAgICAgICAgICAgICAkc2NvcGUuYWJzZW5jZSA9IGRvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlcnJIYW5kbGUoZXJyKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hBYnNlbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX2RhdGEgPSBbXSwgY291bnQgPSAwO1xuICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YXR1cyhzdHIpIHtcblx0XHRcdFx0XHRcdGlmKC9iYWlrLy50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdiYWxhbmNlZCc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoL3dhcm5pbmcvLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2NhbG0nO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKC9tYXhpbXVtLy50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdlbmVyZ2l6ZWQnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKC9vdmVybGltaXQvLnRlc3Qoc3RyKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ2Fzc2VydGl2ZSc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuICAgICAgICAgICQoZGF0YSkuZmluZCgnI3JwdFRhYmxlIHRyJykuZWFjaChmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgaWYgKGh0Lmxlbmd0aCA+PSA4KSB7XG4gICAgICAgICAgICAgICAgX2RhdGFbY291bnRdID0ge1xuICAgICAgICAgICAgICAgICAgbmFtZTogaHQuZXEoMCkuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgYWJzZW5jZTogW3tcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBodC5lcSg0KS5odG1sKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogaHQuZXEoMikudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGdldFN0YXR1cyhodC5lcSg1KS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIikpXG4gICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZGF0YVtjb3VudCAtIDFdLmFic2VuY2UucHVzaCh7XG4gICAgICAgICAgICAgICAgICBtYXg6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIHRvdGFsOiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGh0LmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogZ2V0U3RhdHVzKGh0LmVxKDQpLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvYWJzZW5jZS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIFx0QmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgJChkLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdE1haW5NZW51U3R1ZGVudF9jdGwwMV9saW5rTWVudVN0dWRlbnRcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdFN1Yk1lbnVfY3RsMDJfbGlua1N1Yk1lbnVcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShjLnJlc3VsdCkpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYWJzZW5jZSA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmFic2VuY2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICRzY29wZS5hYnNlbmNlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuYWJzZW5jZSk7XG4gICAgfVxuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG4gIH0pOyIsImFwcC5jb250cm9sbGVyKCdFeGFtU2NoZWR1bGVDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRodHRwLCAkbG9jYXRpb24sIFxuICBcdCRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXApIHtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hTY2hlZHVsZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgXHRpZihkb25lLmxlbmd0aCA+IDApXG4gICAgICAgICAgXHR7XG5cdCAgICAgICAgICBcdGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUgPSBKU09OLnN0cmluZ2lmeShkb25lKTtcblx0ICAgICAgICAgICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBkb25lO1xuICAgICAgICAgIFx0fVxuICAgICAgICAgIFx0JHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlcnJIYW5kbGUoZXJyKTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hTY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgXHR2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBcdFx0dmFyIF9kYXRhID0gW107XG4gICAgICBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBcdFx0XHR2YXIgdGVybSA9ICQoZGF0YVtpXSkuZmluZChcInRhYmxlOmVxKDIpIHRyIHRkIGxpXCIpLnRleHQoKTtcblx0ICAgICAgXHRcdCQoZGF0YVtpXSkuZmluZChcIi50YWJsZXdpdGhib3JkZXIgdHJcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG5cdCAgICAgIFx0XHRcdGlmKGkgPiAwKSB7XG5cdFx0ICAgICAgXHRcdFx0X2RhdGEucHVzaCh7XG5cdFx0ICAgICAgXHRcdFx0XHR0ZXJtOiBcdFx0ICB0ZXJtLFxuXHRcdCAgICAgIFx0XHRcdFx0Y29kZTogXHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoMCkudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0bmFtZTogXHRcdFx0JChkKS5maW5kKFwidGRcIikuZXEoMSkudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0c2tzOiBcdFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDIpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdGRhdGU6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDMpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdGhvdXI6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDQpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdHJvb206IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDUpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdGNhbXB1czogXHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDYpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdGNsYXNzTmFtZTogXHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg3KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRzZWF0OiBcdFx0XHRwYXJzZUludCgkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg4KS50ZXh0KCkpXG5cdFx0ICAgICAgXHRcdFx0fSk7XG5cdCAgICAgIFx0XHRcdH1cblx0ICAgICAgXHRcdH0pO1xuICAgICAgXHRcdH1cbiAgICAgIFx0XHRyZXR1cm4gQmludXNNYXlhLmdyb3VwaW5nKF8uc29ydEJ5KF9kYXRhLCAnZGF0ZScpKTtcbiAgICAgIFx0fTtcbiAgICAgIFx0dmFyIGRhdGFTY2hlZHVsZSA9IFtdLFxuICAgICAgXHRcdFx0c2NoZWR1bGVfdXJsID0gXCJcIjtcbiAgICAgIFx0aWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvZXhhbS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZC5kYXRhKTtcbiAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2V4YW0tcHJhY3RpY3VtLmh0bWwnKTtcbiAgICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZS5kYXRhKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkYXRhU2NoZWR1bGUpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIFx0QmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIFx0Ly8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgXHQudGhlbihmdW5jdGlvbihkKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG5cdCAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgzKSA+IGFcIikuYXR0cihcImhyZWZcIilcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcblx0ICAgICAgICAgIH0pXG5cdCAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDJfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdHNjaGVkdWxlX3VybCA9IGQucmVzdWx0O1xuICAgICAgICAgICAgXHRyZXR1cm4gQmludXNNYXlhLmFwaSgkKHNjaGVkdWxlX3VybCkuZmluZChcIi5pdGVtQ29udGVudFNlcnZpY2UgbGk6ZXEoMCkgYVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQucmVzdWx0KTtcbiAgICAgICAgICAgIFx0cmV0dXJuIEJpbnVzTWF5YS5hcGkoJChzY2hlZHVsZV91cmwpLmZpbmQoXCIuaXRlbUNvbnRlbnRTZXJ2aWNlIGxpOmVxKDEpIGFcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChkLnJlc3VsdCk7XG4gICAgICAgICAgICBcdHJldHVybiBCaW51c01heWEuYXBpKCQoc2NoZWR1bGVfdXJsKS5maW5kKFwiLml0ZW1Db250ZW50U2VydmljZSBsaTplcSgyKSBhXCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZC5yZXN1bHQpO1xuICAgICAgICAgICAgXHRyZXNvbHZlKHJldHVyblJlc3BvbnNlKGRhdGFTY2hlZHVsZSkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXhhbVNjaGVkdWxlTGlzdCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmV4YW1TY2hlZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICB9KTsiLCIvKipcbiAqIEZpbmFuY2UgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0ZpbmFuY2VDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY1BvcHVwLCAkcSwgJGh0dHApIHtcblxuICAgICRzY29wZS5pc0FsbG93ID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoRmluYW5jZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBkb25lO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUudG9Nb25leSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoRmluYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgYmlsbGluZyA9IDA7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJpbGxpbmcgPSBwYXJzZUludCgkKGRhdGEpLmZpbmQoXCJ0YWJsZTplcSgwKSB0ciB0ZFwiKS5odG1sKCkubWF0Y2goL1swLTldKy8pWzBdKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIHZhciBoYXNpbCA9IFtdO1xuICAgICAgICAgICQoZGF0YSkuZmluZCgndGFibGUjcnB0VGFibGUgdHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgICAgIHZhciBodCA9ICQodGhpcykuZmluZCgndGQnKTtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICBoYXNpbC5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRlOiBodC5lcSgxKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICB0ZXJtOiBodC5lcSgzKS5odG1sKCksXG4gICAgICAgICAgICAgICAgZHVlOiBodC5lcSg0KS5odG1sKCksXG4gICAgICAgICAgICAgICAgY2hhcmdlOiBpc05hTihwYXJzZUludChodC5lcSg1KS5odG1sKCkpKSA9PT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg1KS5odG1sKCkpLFxuICAgICAgICAgICAgICAgIHBheW1lbnQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKSkpID09PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKS5tYXRjaCgvWzAtOV0rLykpLFxuICAgICAgICAgICAgICAgIHJlZnVuZDogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNykuaHRtbCgpKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgZmluYWxfZGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGE6IEJpbnVzTWF5YS5ncm91cGluZyhoYXNpbCksXG4gICAgICAgICAgICBiaWxsaW5nOiBiaWxsaW5nLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZTogbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJylcbiAgICAgICAgICB9O1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5maW5hbmNlID0gSlNPTi5zdHJpbmdpZnkoZmluYWxfZGF0YSk7XG4gICAgICAgICAgcmV0dXJuIGZpbmFsX2RhdGE7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvZmluYW5jZS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdE1haW5NZW51U3R1ZGVudF9jdGwwNl9saW5rTWVudVN0dWRlbnRcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfcnB0U3ViTWVudV9jdGwwM19saW5rU3ViTWVudVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5maW5hbmNlTGlzdCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlLmZpbmFuY2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICRzY29wZS5maW5hbmNlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmZpbmFuY2UpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICAgIEJpbnVzTWF5YS5wcm9tcHRQYXNzd29yZCgnc2VydmljZXMnLCAkc2NvcGUpO1xuICB9XG4pOyIsImFwcC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLFxuZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNQb3B1cCwgJHRpbWVvdXQsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCAkcm9vdFNjb3BlLCBCaW51c01heWEpIHtcblxuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSB0cnVlO1xuICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYXIoZmFsc2UpO1xuXG4gICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuXG4gICAgJGlvbmljSGlzdG9yeS5uZXh0Vmlld09wdGlvbnMoe1xuICAgICAgZGlzYWJsZUJhY2s6IHRydWVcbiAgICB9KTtcblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghKCRzY29wZS5iaW51c2lkICYmICRzY29wZS5wYXNzd29yZCkpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ1BsZWFzZSBJbnB1dCBCaW51c2lhbiBJRCBhbmQgUGFzc3dvcmQnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnb24tbG9hZGluZyc7XG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgQmludXNNYXlhLmFwaSgnLycsICdnZXQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgaWYoZC5jb2RlICE9PSAyMDApIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS50eHRVc2VySWQgPSAkc2NvcGUuYmludXNpZDtcbiAgICAgICAgICBkYXRhLnR4dFBhc3N3b3JkID0gJHNjb3BlLnBhc3N3b3JkO1xuICAgICAgICAgIGRhdGEuYnRuTG9naW4gPSBcIkxvZyBJbiBcIjtcbiAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdwb3N0JywgZGF0YSk7XG4gICAgICAgIH0sIGhhbmRsZUVycm9yKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSAkKGQucmVzdWx0KS5maW5kKFwiI2NvbnRlbnQgI3RvcGJhciAucmlnaHQgc3Ryb25nXCIpO1xuICAgICAgICAgIC8vIFdoZW4gU3VjY2Vzc1xuICAgICAgICAgIGlmKGQuY29kZSAhPT0gMjAwKVxuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZCk7XG4gICAgICAgICAgaWYobmFtZS5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZCwgJChkLnJlc3VsdCkuZmluZChcIiNsYmxFcnJvclwiKS50ZXh0KCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJIFRoaW5rIHRoYXQgbm90IGJlc3QgbWV0aG9kXG4gICAgICAgICAgICAgKiBAdG9kbyBtYWtlIGl0IGhhc2hcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxvZ2luSWQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGJpbnVzaWQ6ICRzY29wZS5iaW51c2lkLFxuICAgICAgICAgICAgICBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzbG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmZuYW1lID0gbmFtZS50ZXh0KCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgICRyb290U2NvcGUubG9naW5OYW1lID0gbG9jYWxTdG9yYWdlLmZuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5DbGFzcyA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvc2NoZWR1bGUnO1xuICAgICAgICAgICAgJGlvbmljSGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYWNrQnV0dG9uKGZhbHNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xuXG4gICAgICAgIHZhciBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uKGRhdGEsIHRleHQpIHtcbiAgICAgICAgICB0eXBlb2YgdGV4dCAhPT0gXCJ1bmRlZmluZWRcIiA/IHRleHQgOiBudWxsO1xuICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcbiAgICAgICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGV4dCA/IHRleHQgOiAnU29tZXRoaW5nIHdyb25nICEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuKTtcbiIsIi8qKlxuICogTXkgQ2xhc3MgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ015Q2xhc3NDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlLCAkc3RhdGUsICRsb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCkge1xuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gdHJ1ZTtcbiAgICAkaW9uaWNQbGF0Zm9ybS5vbkhhcmR3YXJlQmFja0J1dHRvbihmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuXG4gICAgdmFyIHJlZnJlc2hNeUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICApO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICB2YXIgX3JlRGF0YSA9IFtdLFxuICAgICAgICAgICAgICBfcHJvbWlzZXNZb3UgPSBbXSxcbiAgICAgICAgICAgICAgX3Byb21pc2VzQ291bnQgPSAwO1xuICAgICAgICAgICAgJChjLnJlc3VsdC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxUZW9yaSB1bCBsaVwiKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGQpLmZpbmQoXCJhXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICByZWcgPSBuYW1lLm1hdGNoKC9eKC4qKS0oLiopIFxcKCguKilcXCkvaSk7XG4gICAgICAgICAgICAgIF9yZURhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5kZXhJdGVtOiBpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlZ1syXSxcbiAgICAgICAgICAgICAgICB1cmw6ICQoZCkuZmluZChcImFcIikuYXR0cignaHJlZicpLFxuICAgICAgICAgICAgICAgIGNvZGU6IHJlZ1sxXSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHJlZ1szXVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeShfcmVEYXRhKTtcbiAgICAgICAgICAgIHJlc29sdmUoX3JlRGF0YSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbXkgY2xhc3NcIik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaE15Q2xhc3MoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgaWYgKGRvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YSA9IGRvbmU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyckhhbmRsZShcIllvdSBkb24ndCBoYXZlIGFueSBjbGFzc1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgfSk7IiwiLyoqXG4gKiBNeSBDbGFzcyBJbnNpZGVcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdNeUNsYXNzRGV0YWlsQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkbG9jYXRpb24sXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgZGF0YXNldCkge1xuXG4gICAgJHNjb3BlLmNsYXNzRGF0YSA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLm15Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5teUNsYXNzKSA6IGZhbHNlKTtcbiAgICAkc2NvcGUuc3RhdGUgPSB7XG4gICAgICBpc0RhdGE6IGZhbHNlLFxuICAgICAgbG9hZGluZzogdHJ1ZVxuICAgIH07XG4gICAgJHNjb3BlLmRhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdO1xuICAgICRzY29wZS5pc1BhZ2VUb3BpYyA9IGZhbHNlO1xuXG4gICAgdmFyIGdldENsYXNzRGV0YWlsID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRmFpbCB0byByZS1sb2dpblxuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDApID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoX2JpbWF5X2FwaV91cmwgKyAnL0xNUy8nICsgdXJsLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdmFyIGRvbmUgPSBkLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBkZXNjX21haW4gPSAkKGRvbmUpLmZpbmQoXCIjZGVzY19jb3Vyc2VfZGVzYyA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICBkZXNjX2dyYWQgPSAkKGRvbmUpLmZpbmQoXCIjZGVzY19ncmFkX2NvbXBldGUgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgY291cnNlID0gW107XG5cbiAgICAgICAgICAgICQoZG9uZSkuZmluZChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3BubENvbnRlbnRUaGVvcnkgdGFibGUgdGJvZHkgdHJcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgY291cnNlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2Vzc2lvbjogcGFyc2VJbnQoJChkKS5maW5kKFwidGQ6ZXEoMCkgPiBzcGFuXCIpLmh0bWwoKSksXG4gICAgICAgICAgICAgICAgICBtb2RlOiAkKGQpLmZpbmQoXCJ0ZDplcSgxKSA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZDplcSgyKSA+IGFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgZGF0ZTogJChkKS5maW5kKFwidGQ6ZXEoMykgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIGxpbmtzOiAkKGQpLmZpbmQoXCJ0ZDplcSg0KSA+IGlucHV0XCIpLmF0dHIoJ25hbWUnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIF9yZURhdGEgPSB7XG4gICAgICAgICAgICAgIG1haW5fZGVzY3JpcHRpb246IGRlc2NfbWFpbixcbiAgICAgICAgICAgICAgZ3JhZF9kZXNjcmlwdGlvbjogZGVzY19ncmFkLFxuICAgICAgICAgICAgICBjb3Vyc2U6IGNvdXJzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc29sdmUoX3JlRGF0YSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gY291cnNlIHBhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnZXRDbGFzc0RldGFpbCgkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLnVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsID0gZGF0YTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UubXlDbGFzcyA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS5jbGFzc0RhdGEpO1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICB9XG5cbiAgICBpZiAoJHNjb3BlLmlzUGFnZVRvcGljID09PSBmYWxzZSkge1xuICAgICAgJHNjb3BlLmluZm9UYWIgPSAnYWN0aXZlJztcbiAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLmluZm9UYWIgPSAnJztcbiAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnYWN0aXZlJztcbiAgICB9XG5cbiAgICAkc2NvcGUuc3dpdGNoVGFiID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAkc2NvcGUuaXNQYWdlVG9waWMgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmluZm9UYWIgPSAnYWN0aXZlJztcbiAgICAgICAgJHNjb3BlLnRvcGljc1RhYiA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlID09PSAxKSB7XG4gICAgICAgICRzY29wZS5pc1BhZ2VUb3BpYyA9IHRydWU7XG4gICAgICAgICRzY29wZS5pbmZvVGFiID0gJyc7XG4gICAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnYWN0aXZlJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICB9O1xuXG5cbiAgfSk7XG4iLCIvKipcbiAqIFNjaGVkdWxlIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdTY2hlZHVsZUNvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsICRpb25pY1BvcHVwLCAkdGltZW91dCwgJGlvbmljSGlzdG9yeSwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sIEJpbnVzTWF5YSwgJHEsICRodHRwKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gZmFsc2U7XG4gICAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IHRydWU7XG4gICAgJGlvbmljUGxhdGZvcm0ub25IYXJkd2FyZUJhY2tCdXR0b24oZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmdldFN0YXRlID0gZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHRvZGF5ID0gbW9tZW50KCk7XG4gICAgICAvL3RvZGF5XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9kYXknO1xuICAgICAgfSBlbHNlXG4gICAgICAvL3RvbW9ycm93XG4gICAgICBpZiAobW9tZW50KGQpLmlzU2FtZSh0b2RheS5hZGQoMSwgJ2QnKSwgJ2RheScpKSB7XG4gICAgICAgIHJldHVybiAndG9tb3Jyb3cnO1xuICAgICAgfSBlbHNlXG4gICAgICAvL2xhc3RlZFxuICAgICAgaWYgKG1vbWVudChkKSA8IHRvZGF5KSB7XG4gICAgICAgIHJldHVybiAnY29tcGxldG8nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdGUgPSBmdW5jdGlvbihkLCBtKSB7XG4gICAgICB2YXIgbm93ID0gbW9tZW50KCksXG4gICAgICAgIGdldE1vbWVudCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgZ2V0TGFzdCA9IG0uc3BsaXQoXCItXCIpWzFdLnNwbGl0KFwiOlwiKSxcbiAgICAgICAgICBnZXRIb3VyID0gcGFyc2VJbnQoZ2V0TGFzdFswXSksXG4gICAgICAgICAgZ2V0TWludXRlID0gcGFyc2VJbnQoZ2V0TGFzdFsxXSk7XG5cbiAgICAgICAgZ2V0TW9tZW50ID0gbW9tZW50KGQpLmhvdXIoZ2V0SG91cikubWludXRlKGdldE1pbnV0ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGdldE1vbWVudCA9IG1vbWVudChkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdldE1vbWVudCA8IG5vdykge1xuICAgICAgICByZXR1cm4gJ2NvbXBsZXRvJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzU2NoZWR1bGUgPSBmYWxzZTtcbiAgICAkc2NvcGUuc2NoZWR1bGUgPSBbXTtcblxuICAgIGlmIChsb2NhbFN0b3JhZ2UuamFkd2FsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuamFkd2FsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmlzU2NoZWR1bGUgPSB0cnVlO1xuICAgICAgICAgICRzY29wZS5zY2hlZHVsZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmphZHdhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0b0pzb24gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgaGFzaWwgPSBbXTtcbiAgICAgICQoZGF0YSkuZmluZCgndHInKS5lYWNoKGZ1bmN0aW9uKGksIGEpIHtcbiAgICAgICAgdmFyIGh0ID0gJCh0aGlzKS5maW5kKCd0ZCcpO1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBodC5lcSgzKS5odG1sKCkubWF0Y2goLyguKiktKC4qKS8pO1xuICAgICAgICAgIGhhc2lsLnB1c2goe1xuICAgICAgICAgICAgZGF0ZTogaHQuZXEoMCkuaHRtbCgpLFxuICAgICAgICAgICAgdGltZTogaHQuZXEoMSkuaHRtbCgpLFxuICAgICAgICAgICAgc3RhdGU6IGh0LmVxKDIpLmh0bWwoKSxcbiAgICAgICAgICAgIGNvdXJzZTogbWF0Y2hbMl0sXG4gICAgICAgICAgICBjb2RlOiBtYXRjaFsxXSxcbiAgICAgICAgICAgIG15Q2xhc3M6IGh0LmVxKDUpLmh0bWwoKSxcbiAgICAgICAgICAgIHJvb206IGh0LmVxKDYpLmh0bWwoKSxcbiAgICAgICAgICAgIGJ1aWxkaW5nOiBodC5lcSg3KS5odG1sKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaGFzaWw7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoSmFkd2FsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXR1cm5SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgX3NjaGVkdWxlID0gJChkYXRhKS5maW5kKFwidGFibGVcIiksXG4gICAgICAgICAgICAgIHRvZGF5ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgwKS5odG1sKCkpLFxuICAgICAgICAgICAgICBuZXh0ID0gdG9Kc29uKF9zY2hlZHVsZS5lcSgxKS5odG1sKCkpLFxuICAgICAgICAgICAgICBza2VkdWwgPSB0b2RheS5jb25jYXQobmV4dCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuamFkd2FsID0gSlNPTi5zdHJpbmdpZnkoQmludXNNYXlhLmdyb3VwaW5nKHNrZWR1bCkpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0QgTU1NTSBZWVlZIGg6bW06c3MnKTtcbiAgICAgICAgICAgIHJldHVybiB7amFkd2FsOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpLCBsYXN0VXBkYXRlOiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9zY2hlZHVsZS5odG1sJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge30sXG4gICAgICAgICAgICAgICAgZCA9IGMucmVzdWx0O1xuICAgICAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLl9fRVZFTlRUQVJHRVQgPSAnY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRidG5TY2hlZHVsZSc7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvTXlDbGFzcy5hc3B4JywgJ3Bvc3QnLCBkYXRhLCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHNjaGVkdWxlIHBhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hKYWR3YWwoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUoKTtcbiAgICAgICAgaWYgKGRhdGEuamFkd2FsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IHRydWU7XG4gICAgICAgICAgJHNjb3BlLnNjaGVkdWxlID0gZGF0YS5qYWR3YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJySGFuZGxlKFwiTm8gU2NoZWR1bGUgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgIH0sIGVyckhhbmRsZSk7XG5cbiAgICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gIH0pO1xuIiwiLyoqXG4gKiBTZXJ2aWNlcyBDb250cm9sbGVyXG4gKiBAYXV0aG9yIFBlZG94IDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdTZXJ2aWNlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICdCaW51c01heWEnLCAnJGlvbmljTmF2QmFyRGVsZWdhdGUnLFxuZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY05hdkJhckRlbGVnYXRlKSB7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya","$timeout",function(t,e,n,a,o,i){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.profilePicture=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.StatusBar&&StatusBar.styleDefault(),localStorage.islogin&&r()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){localStorage.clear(),window.location.hash="#/",n.clearHistory(),a.showBackButton(!1),location.reload()};var r=function(){console.log("perform"),localStorage.profilePicture?(e.profilePicture=localStorage.profilePicture,console.log("perform")):"undefined"==typeof httpclient?console.log("make request to another !"):(console.log("make request !"),o.profilePicture().then(function(t){console.log("Apply !"),i(function(){localStorage.profilePicture=t,e.profilePicture=t})},function(){}))};window.location.hash=e.login?"/schedule":"/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,n=localStorage.loginId?JSON.parse(localStorage.loginId):!1;return t(function(t,a){if(localStorage.templogin===!0)t(!0);else{if(n!==!1)return e.api("/","get").then(function(t){200!==t.code&&a(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=n.binusid,o.txtPassword=n.password,o.btnLogin="Log In ",e.api("/","post",o)},a).then(function(){localStorage.templogin=!0,t(!0)},a);a("please login")}})},api:function(e,n,a,o){var i=this;return void 0===localStorage.cookie?i._getCookie().then(function(){return i.api(e,n,a)}):t(function(t,r){"get"===n?httpclient.get(o?e:i._bimay_url+e,t,r,{headers:i.headers()}):httpclient.post(o?e:i._bimay_url+e,a,t,r,{headers:i.headers()})})},frame:function(e){var n=this,a="";return t(function(t,o){return n.api(e,"get").then(function(t){return n.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return a=$(t.result).find("#ifrApp").attr("src"),n.api(a,"get",{},!0)},o).then(function(e){t({url:a,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,n){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):n(e)},n)})},profilePicture:function(){var e=this;return t(function(t,n){e.checkLogin().then(function(){return e.frame("/")},n).then(function(a){var o=$(a.result.result).find("#ctl00_cpRight_ucPhoto_imgProfilePic").attr("src");httpclient.image(e._bimay_api_url+"/home/"+o,function(e){t("data:image/jpeg;base64,"+e.result.replace(/(\r\n|\n|\r)/gm,""))},n,{headers:e.headers()})},n)})},promptPassword:function(t,n){n.promptPass={};var a=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter Binusmaya Password",subTitle:"",scope:n,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+t,a.close()}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(t){var e=JSON.parse(localStorage.loginId).password;return e==n.promptPass.password?(n.promptPass={},n.isAllow=!0,!0):(n.promptPass.error=!0,n.promptPass.password="",t.preventDefault(),void 0)}}]})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],n="",a=-1,o=0;return t.forEach(function(t){n==t.date?(e[a].data[o]=t,o++):(o=1,a++,n=t.date,e[a]={date:t.date,data:[]},e[a].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,n){var a=!1,o=t.defer(),i="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var r in i)i[r].code==e.code&&(a=r);return a?o.resolve(a):n.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("AbsenceController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,n,a,o,i,r,l,c,s,u,f){t.doRefresh=function(){d().then(function(e){t.$applyAsync(function(){e.length>0&&(localStorage.absence=JSON.stringify(e),t.absence=e),t.$broadcast("scroll.refreshComplete")})},function(e){p(e),t.$broadcast("scroll.refreshComplete")})};var d=function(){return u(function(t,n){var a=function(t){function e(t){return/baik/.test(t)?"balanced":/warning/.test(t)?"calm":/maximum/.test(t)?"energized":/overlimit/.test(t)?"assertive":void 0}var n=[],a=0;return $(t).find("#rptTable tr").each(function(t){var o=$(this).find("td");t>0&&(o.length>=8?(n[a]={name:o.eq(0).html(),absence:[{max:o.eq(3).html(),total:o.eq(4).html(),component:o.eq(2).text(),status:e(o.eq(5).find("img").attr("src"))}]},a++):n[a-1].absence.push({max:o.eq(2).html(),total:o.eq(3).html(),component:o.eq(1).text(),status:e(o.eq(4).find("img").attr("src"))}))}),n};"undefined"==typeof httpclient?o.get("http://localhost:2505/absence.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl01_linkMenuStudent").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl02_linkSubMenu").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(e){t(a(e.result))},function(){n("can't access to main frame")})})};t.absence=!1,"undefined"!=typeof localStorage.absence&&(t.absence=JSON.parse(localStorage.absence));var p=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ExamScheduleController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$http","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,n,a,o,i,r,l,c,s,u,f){t.doRefresh=function(){d().then(function(e){t.$applyAsync(function(){e.length>0&&(localStorage.examSchedule=JSON.stringify(e),t.examScheduleList=e),t.$broadcast("scroll.refreshComplete")})},function(e){p(e),t.$broadcast("scroll.refreshComplete")})};var d=function(){return u(function(t,n){var a=function(t){for(var n=[],a=0;a<t.length;a++){var o=$(t[a]).find("table:eq(2) tr td li").text();$(t[a]).find(".tablewithborder tr").each(function(t,e){t>0&&n.push({term:o,code:$(e).find("td").eq(0).text(),name:$(e).find("td").eq(1).text(),sks:$(e).find("td").eq(2).text(),date:$(e).find("td").eq(3).text(),hour:$(e).find("td").eq(4).text(),room:$(e).find("td").eq(5).text(),campus:$(e).find("td").eq(6).text(),className:$(e).find("td").eq(7).text(),seat:parseInt($(e).find("td").eq(8).text())})})}return e.grouping(_.sortBy(n,"date"))},i=[],r="";"undefined"==typeof httpclient?o.get("http://localhost:2505/exam.html").then(function(t){return i.push(t.data),o.get("http://localhost:2505/exam-practicum.html")},n).then(function(e){i.push(e.data),t(a(i))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl02_linkMenuStudent").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(t){return r=t.result,e.api($(r).find(".itemContentService li:eq(0) a").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(1) a").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(t){return i.push(t.result),e.api($(r).find(".itemContentService li:eq(2) a").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(e){i.push(e.result),t(a(i))},function(){n("can't access to main frame")})})};t.examScheduleList=!1,"undefined"!=typeof localStorage.examSchedule&&(t.examScheduleList=JSON.parse(localStorage.examSchedule));var p=function(e){f.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http",function(t,e,n,a,o){t.isAllow=!1,t.doRefresh=function(){i().then(function(e){t.$applyAsync(function(){t.financeList=e,t.$broadcast("scroll.refreshComplete")})},function(e){r(e),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var i=function(){return a(function(t,n){var a=function(t){var n=0;try{n=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(a){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:isNaN(parseInt(e.eq(5).html()))===!0?0:parseInt(e.eq(5).html()),payment:isNaN(parseInt(e.eq(6).html()))===!0?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:isNaN(parseInt(e.eq(7).html()))===!0?0:parseInt(e.eq(7).html())})});var i={data:e.grouping(o),billing:n,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return localStorage.finance=JSON.stringify(i),i};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(t){return e.api($(t.result.result).find("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(t){return e.api($(t.result).find("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){n("can't access to main frame")}).then(function(e){t(a(e.result))},function(){n("can't access to main frame")})})};t.financeList=!1,"undefined"!=typeof localStorage.finance&&(t.financeList=JSON.parse(localStorage.finance));var r=function(e){n.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t)}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,n,a,o,i,r){i.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",a.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,r.api("/","get").then(function(e){200!==e.code&&n(e);var a={};return $($(e.result).serializeArray()).each(function(t,e){a[e.name]=e.value}),a.txtUserId=t.binusid,a.txtPassword=t.password,a.btnLogin="Log In ",r.api("/","post",a)},n).then(function(e){var r=$(e.result).find("#content #topbar .right strong");200!==e.code&&n(e),r.length<=0?n(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=r.text(),i.login=!0,i.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,location.reload(),a.clearHistory(),o.showBackButton(!1))},n);var n=function(n,a){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:a?a:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","$ionicLoading","$http",function(t,e,n,a,o,i,r,l,c,s,u,f,d){l.noHeader=!1,l.leftMenu=!0,c.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var p=function(){return s(function(t,n){var a=function(t){var e=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,n){var a=$(n).find("a").html(),o=a.match(/^(.*)-(.*) \((.*)\)/i);e.push({indexItem:t,name:o[2],url:$(n).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(e),e};"undefined"==typeof httpclient?d.get("http://localhost:2505/myclass.html").then(function(e){t(a(e.data))},n):e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(e){t(a(e.result.result))},function(){n("can't access to my class")})})};t.doRefresh=function(){p().then(function(e){t.classData=e,f.hide(),t.$broadcast("scroll.refreshComplete")},e);var e=function(e){f.hide(),u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}},t.classData||(f.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh())}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$http","$ionicScrollDelegate","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset","$timeout","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s,u,f,d,p,c,m){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[p],t.showpage=0,t.linksSetAssigment=[],t.linksSet=[];var h=function(t){return f(function(n,a){var o=function(t){var e=$(t).find("#desc_course_desc > span").html(),n=$(t).find("#desc_grad_compete > span").html(),a=[],o=[];return $(t).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&a.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlMainAssignment table tbody tr").each(function(t,e){0!==t&&o.push({term:"Main Assigment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),$(t).find("#ctl00_ContentPlaceHolder1_pnlAdditionalAssignment2 table tbody tr").each(function(t,e){0!==t&&o.push({term:"Additional Assigment",session:parseInt($(e).find("td").eq(0).text()),topics:$(e).find("td").eq(1).text(),title:$(e).find("td").eq(2).text(),desc:$(e).find("td").eq(3).text(),deadline:$(e).find("td").eq(4).text(),upload:$(e).find("td").eq(5).find("img").length?!0:!1,checked:$(e).find("td").eq(6).find("img").length?!0:!1,link:$(e).find("td").eq(7).find("input:eq(0)").attr("name")})}),{main_description:e,grad_description:n,assigment:o.length>0?o:!1,course:a}};"undefined"==typeof httpclient?i.get("http://localhost:2505/myclass-inside.html").then(function(t){n(o(t.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){a("can't access to my class")}).then(function(t){n(o(t.result))},function(){a("can't access to course page")})})};"undefined"==typeof t.classData[p].detail?h(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),t.$broadcast("scroll.refreshComplete")},g):(t.state.loading=!1,t.state.isData=t.classData[p].detail),t.switchTab=function(e){t.showpage=e,setTimeout(function(){r.resize()},100)};var g=function(e){d.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};t.downloadAssigment=function(e){t.linksSetAssigment[e]={isLoading:!0},c(function(){t.linksSetAssigment[e]={isLoading:!1}},1e4)},t.refresh=function(){m.show({template:'<ion-spinner icon="android" class="overlay-spinner"></ion-spinner> Loading...'}),h(t.classData[p].url).then(function(e){console.log(e),t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),m.hide(),r.resize()},function(t){m.hide(),g(t)})}}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http","$ionicLoading",function(t,e,n,a,o,i,r,l,c,s){o.noHeader=!1,o.leftMenu=!0,i.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var n=moment(),a=null;try{var o=e.split("-")[1].split(":"),i=parseInt(o[0]),r=parseInt(o[1]);a=moment(t).hour(i).minute(r)}catch(l){a=moment(t)}return n>a?"completo":void 0},t.isSchedule=!1,t.schedule=[];var u=function(t){var e=[];return $(t).find("tr").each(function(t){var n=$(this).find("td");if(t>0){var a=n.eq(3).html().match(/(.*)-(.*)/);e.push({date:n.eq(0).html(),time:n.eq(1).html(),state:n.eq(2).html(),course:a[2],code:a[1],myClass:n.eq(5).html(),room:n.eq(6).html(),building:n.eq(7).html()})}}),e},f=function(){return l(function(t,e){var n=function(t){var e=$(t).find("table"),n=u(e.eq(0).html()),a=u(e.eq(1).html()),o=n.concat(a),i=r.grouping(o);return i.length>0&&(localStorage.jadwal=JSON.stringify(i)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:i,lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?c.get("http://localhost:2505/schedule.html").then(function(e){t(n(e.data))},e):r.checkLogin().then(function(){return r.api("/","get")},function(){e("can't re-auth your account")}).then(function(t){return r.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){e("can't access to main frame")}).then(function(t){var e={},n=t.result;return $($(n.result).serializeArray()).each(function(t,n){e[n.name]=n.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",r.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){e("can't access frame")}).then(function(e){t(n(e.result))},function(){e("can't access schedule page")})})};if(t.doRefresh=function(){f().then(function(e){s.hide(),t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),t.isSchedule=!0,t.schedule=e.jadwal},n);var n=function(n){s.hide(),e.alert({title:"Oops !",template:n}),t.$broadcast("scroll.refreshComplete")}},localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(d){}else i.ready(function(){s.show({templateUrl:"views/module/loading.html",noBackdrop:!0}),t.doRefresh()})}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvYWJzZW5jZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvZXhhbVNjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9maW5hbmNlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9sb2dpbi5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzcy5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbXljbGFzc0luc2lkZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2NoZWR1bGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NlcnZpY2VzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxXQUFBLFNBQ0EsT0FBQSxVQUNBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxJQUFBLFFBQUEsT0FBQSxhQUFBLFFBQUEsWUFBQSxxQkFFQSxLQUFBLGlCQUFBLGFBQUEsZ0JBQUEsdUJBQUEsWUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLG1CQUFBLGNBQUEsU0FBQSxFQUFBLGFBQUEsUUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLGdCQUFBLEVBQ0EsRUFBQSxVQUFBLG1CQUFBLGNBQUEsTUFBQSxLQUFBLGFBQUEsTUFBQSxvQkFDQSxjQUFBLGFBQ0EsY0FBQSxVQUVBLEVBQUEsTUFBQSxXQUNBLEVBQUEsYUFDQSxRQUFBLEdBT0EsT0FBQSxXQUNBLFVBQUEsZUFFQSxhQUFBLFNBQ0EsTUFJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFdBQUEsbUJBQUEsY0FBQSxXQUFBLFdBQUEsYUFBQSxZQUVBLEVBQUEsZ0JBQ0EsRUFBQSxPQUFBLFdBQ0EsYUFBQSxRQUNBLE9BQUEsU0FBQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FDQSxTQUFBLFNBR0EsSUFBQSxHQUFBLFdBRUEsUUFBQSxJQUFBLFdBQ0EsYUFBQSxnQkFDQSxFQUFBLGVBQUEsYUFBQSxlQUNBLFFBQUEsSUFBQSxZQUVBLG1CQUFBLFlBQ0EsUUFBQSxJQUFBLDhCQUVBLFFBQUEsSUFBQSxrQkFDQSxFQUFBLGlCQUNBLEtBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxXQUNBLEVBQUEsV0FDQSxhQUFBLGVBQUEsRUFDQSxFQUFBLGVBQUEsS0FFQSxlQVNBLFFBQUEsU0FBQSxLQURBLEVBQUEsTUFDQSxZQUVBLE9BSUEsUUFBQSx1QkFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLGNBQUEsR0FDQSxFQUFBLE1BQUEsU0FBQSxLQzFGQSxTQUFBLE9BQUEsdUJBRUEsUUFBQSxhQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxPQUVBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsUUFDQSxPQUFBLGFBQUEsT0FBQSxhQUFBLE9BQUEsS0FDQSxPQUFBLEVBQUEsV0FDQSxRQUFBLEVBQUEsYUFHQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLFFBQUEsS0FBQSxNQUFBLGFBQUEsVUFBQSxDQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLGFBQUEsYUFBQSxFQUNBLEdBQUEsT0FDQSxDQUFBLEdBQUEsS0FBQSxFQUdBLE1BQUEsR0FBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLEdBQ0EsS0FBQSxXQUNBLGFBQUEsV0FBQSxFQUNBLEdBQUEsSUFDQSxFQWpCQSxHQUFBLG9CQXFCQSxJQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsSUFFQSxPQUFBLFVBQUEsYUFBQSxPQUNBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLEtBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLEVBQ0EsV0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLFlBR0EsV0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxRQUFBLEVBQUEsZUFPQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FDQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLHFCQUFBLEtBQUEsT0FBQSxRQUNBLEdBQ0EsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEsV0FBQSxLQUFBLE9BQ0EsRUFBQSxJQUFBLEVBQUEsVUFBQSxJQUNBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FDQSxJQUFBLEVBQ0EsT0FBQSxLQUVBLE1BSUEsV0FBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxXQUFBLElBQUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsTUFDQSxhQUFBLE9BQUEsRUFBQSxPQUFBLGNBQ0EsR0FBQSxJQUVBLEVBQUEsSUFFQSxNQUdBLGVBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsTUFBQSxNQUNBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSx3Q0FBQSxLQUFBLE1BQ0EsWUFBQSxNQUFBLEVBQUEsZUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsMEJBQUEsRUFBQSxPQUFBLFFBQUEsaUJBQUEsTUFDQSxHQUVBLFFBQUEsRUFBQSxhQUVBLE1BR0EsZUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLEVBQUEsTUFDQSxTQUFBLHFJQUNBLE1BQUEsMkJBQ0EsU0FBQSxHQUNBLE1BQUEsRUFDQSxVQUNBLEtBQUEsU0FDQSxNQUFBLFdBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsV0FHQSxLQUFBLGVBQ0EsS0FBQSxrQkFDQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxNQUFBLGFBQUEsU0FBQSxRQUNBLE9BQUEsSUFBQSxFQUFBLFdBQUEsVUFDQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEdBQ0EsSUFFQSxFQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxpQkFGQSxjQVFBLGNBQUEsYUFHQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsUUFBQSxFQUNBLFFBRUEsSUFBQSxNQUNBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxDQWdCQSxPQWZBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUFBLEtBQUEsR0FBQSxFQUNBLE1BRUEsRUFBQSxFQUNBLElBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxLQUNBLFNBRUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxLQUdBLE9DaExBLFFBQUEsT0FBQSxnQkFFQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQ0EsTUFBQSxTQUNBLElBQUEsSUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGlCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxnQkFDQSxXQUFBLHlCQUlBLE1BQUEsU0FDQSxJQUFBLFNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsYUFDQSxXQUFBLHNCQUlBLE1BQUEsWUFDQSxJQUFBLFlBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxzQkFDQSxXQUFBLHlCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxlQUNBLFdBQUEsd0JBSUEsTUFBQSxpQkFDQSxJQUFBLHdCQUNBLFNBQ0EsU0FBQSxLQUFBLGVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEVBUUEsT0FMQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxZQUFBLFVBRUEsRUFBQSxXQUdBLE9BQ0EsYUFDQSxZQUFBLFVBQUEscUJBQ0EsV0FBQSw4QkFJQSxNQUFBLGdCQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSw4QkFDQSxXQUFBLDZCQUlBLE1BQUEsYUFDQSxJQUFBLGNBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSwyQkFDQSxXQUFBLDBCQUlBLE1BQUEsaUJBQ0EsSUFBQSxrQkFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxXQUNBLElBQUEsV0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHdCQUNBLFdBQUEsd0JBSUEsTUFBQSxVQUNBLElBQUEsVUFDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGtCQUtBLEVBQUEsVUFBQSxjQ2hJQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLElBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsV0FBQSw2QkFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsV0FBQSw0QkFJQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxNQUFBLE9BQUEsS0FBQSxHQUNBLFdBQ0EsVUFBQSxLQUFBLEdBQ0EsT0FDQSxVQUFBLEtBQUEsR0FDQSxZQUNBLFlBQUEsS0FBQSxHQUNBLFlBREEsT0FSQSxHQUFBLE1BQUEsRUFBQSxDQW9DQSxPQXhCQSxHQUFBLEdBQUEsS0FBQSxnQkFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxHQUFBLElBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxJQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxVQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FBQSxXQUdBLEtBRUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxNQUNBLElBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FBQSxhQUtBLEVBRUEsb0JBQUEsWUFDQSxFQUFBLElBQUEsc0NBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsUUFBQSxLQUFBLDZEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaURBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxTQUFBLEVBQ0EsbUJBQUEsY0FBQSxVQUNBLEVBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxTQUdBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDhCQ25IQSxJQUFBLFdBQUEsMEJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsUUFBQSxZQUFBLGVBQUEsV0FBQSxhQUFBLGlCQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxXQUNBLElBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLElBRUEsYUFBQSxhQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsaUJBQUEsR0FFQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsNEJBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSx3QkFBQSxNQUNBLEdBQUEsRUFBQSxJQUFBLEtBQUEsdUJBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsRUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLElBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsVUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxZQUtBLE1BQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLFVBRUEsS0FDQSxFQUFBLEVBQ0Esb0JBQUEsWUFDQSxFQUFBLElBQUEsbUNBQ0EsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSw4Q0FDQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFFBQUEsS0FBQSw2REFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxrQ0FBQSxLQUFBLFFBQUEsVUFBQSxJQUNBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxFQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLGtDQUFBLEtBQUEsUUFBQSxVQUFBLElBQ0EsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsa0NBQUEsS0FBQSxRQUFBLFVBQUEsSUFDQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsS0FDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxrQkFBQSxFQUNBLG1CQUFBLGNBQUEsZUFDQSxFQUFBLGlCQUFBLEtBQUEsTUFBQSxhQUFBLGNBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsOEJDbkhBLElBQUEsV0FBQSxxQkFDQSxTQUFBLFlBQUEsY0FBQSxLQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUFBLEVBRUEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsV0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFdBQUEsNkJBRUEsU0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLFdBQUEsNkJBR0EsRUFBQSxRQUFBLFNBQUEsR0FDQSxJQUNBLE1BQUEsR0FBQSxRQUFBLEdBQUEsUUFBQSxzQkFBQSxPQUNBLE1BQUEsR0FDQSxNQUFBLElBSUEsSUFBQSxHQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBQ0EsS0FDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEscUJBQUEsT0FBQSxNQUFBLFVBQUEsSUFDQSxNQUFBLElBQ0EsR0FBQSxLQUNBLEdBQUEsR0FBQSxLQUFBLHFCQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxLQUNBLEdBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsSUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsTUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxRQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxZQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLE9BQUEsTUFBQSxXQUNBLE9BQUEsTUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBQUEsRUFBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsV0FJQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFNBQUEsR0FDQSxRQUFBLEVBQ0EsV0FBQSxTQUFBLE9BQUEsdUJBR0EsT0FEQSxjQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFHQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSxzQ0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxFQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxRQUFBLEtBQUEsNkRBQUEsS0FBQSxRQUFBLFVBQUEsSUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxpREFBQSxLQUFBLFFBQUEsVUFBQSxJQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFdBQ0EsRUFBQSxrQ0FNQSxHQUFBLGFBQUEsRUFDQSxtQkFBQSxjQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFBQSxhQUFBLFNBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsMEJBR0EsR0FBQSxlQUFBLFdBQUEsTUN0SEEsSUFBQSxXQUFBLG1CQUNBLFNBQUEsY0FBQSxXQUFBLGdCQUFBLHVCQUFBLGFBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEdBRUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxXQUFBLEdBRUEsRUFBQSxpQkFDQSxhQUFBLElBR0EsRUFBQSxPQUFBLFdBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxTQUtBLENBQ0EsRUFBQSxXQUFBLGFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLElBQUEsT0FDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEVBQ0EsSUFBQSxLQU9BLE9BTkEsR0FBQSxFQUFBLEVBQUEsUUFBQSxrQkFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsUUFFQSxFQUFBLFVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLElBQUEsT0FBQSxJQUNBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEsaUNBRUEsT0FBQSxFQUFBLE1BQ0EsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGFBQUEsU0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FNQSxhQUFBLFFBQUEsS0FBQSxXQUNBLFFBQUEsRUFBQSxRQUNBLFNBQUEsRUFBQSxXQUdBLGFBQUEsU0FBQSxFQUNBLGFBQUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQ0EsRUFBQSxVQUFBLGFBQUEsTUFBQSxjQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLFNBQUEsU0FDQSxFQUFBLGVBQ0EsRUFBQSxnQkFBQSxLQUdBLEVBRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxFQUFBLEVBQUEsMkJBMURBLEdBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSw4Q0NiQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsWUFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsZ0JBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxxQkFBQSxTQUFBLEdBQ0EsRUFBQSxtQkFHQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FFQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEtBYUEsT0FaQSxHQUFBLEdBQUEsS0FBQSw2Q0FBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsdUJBQ0EsR0FBQSxNQUNBLFVBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQSxRQUNBLEtBQUEsRUFBQSxHQUNBLFVBQUEsRUFBQSxPQUdBLGFBQUEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUdBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHNDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsVUFDQSxXQUNBLEVBQUEsZ0NBTUEsR0FBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDJCQUNBLEVBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLDRCQUlBLEVBQUEsWUFDQSxFQUFBLE1BQUEsWUFBQSw0QkFBQSxZQUFBLElBQ0EsRUFBQSxnQkMvRUEsSUFBQSxXQUFBLDJCQUNBLFNBQUEsWUFBQSx1QkFBQSxTQUFBLFlBQUEsUUFBQSx1QkFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsVUFBQSxXQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsRUFDQSxFQUFBLE9BQ0EsUUFBQSxFQUNBLFNBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxTQUFBLEVBRUEsRUFBQSxxQkFDQSxFQUFBLFdBRUEsSUFBQSxHQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsNEJBQUEsT0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLDZCQUFBLE9BQ0EsS0FDQSxJQTJDQSxPQTFDQSxHQUFBLEdBQUEsS0FBQSw4REFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsUUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLFFBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxtQkFBQSxPQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsZ0JBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxvQkFBQSxLQUFBLFlBSUEsRUFBQSxHQUFBLEtBQUEsK0RBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsaUJBQ0EsUUFBQSxTQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLFFBQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsU0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLE9BQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLFFBQUEsR0FBQSxFQUNBLFFBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLFFBQUEsR0FBQSxFQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsS0FBQSxlQUFBLEtBQUEsWUFJQSxFQUFBLEdBQUEsS0FBQSxzRUFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSx1QkFDQSxRQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsUUFDQSxPQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsUUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsUUFBQSxHQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsR0FBQSxLQUFBLGVBQUEsS0FBQSxhQU1BLGlCQUFBLEVBQ0EsaUJBQUEsRUFDQSxVQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFDQSxPQUFBLEdBSUEsb0JBQUEsWUFDQSxFQUFBLElBQUEsNkNBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsYUFDQSxLQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsSUFBQSxRQUNBLFdBRUEsRUFBQSxnQ0FHQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGdDQUFBLEtBQUEsVUFFQSxXQUNBLEVBQUEsZ0NBRUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLGVBQUEsUUFBQSxFQUFBLFVBQUEsSUFDQSxXQUNBLEVBQUEsOEJBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsbUNBTUEsb0JBQUEsR0FBQSxVQUFBLEdBQUEsT0FDQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEtBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsT0FBQSxFQUNBLGFBQUEsUUFBQSxLQUFBLFVBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxXQUNBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxVQUFBLEdBQUEsU0FFQSxFQUFBLFdBQUEsMkJBQ0EsSUFFQSxFQUFBLE1BQUEsU0FBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsVUFBQSxHQUFBLFFBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxXQUFBLFdBQ0EsRUFBQSxVQUNBLEtBR0EsSUFBQSxHQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsTUFBQSxTQUNBLFNBQUEsSUFFQSxFQUFBLFdBQUEsMEJBR0EsR0FBQSxrQkFBQSxTQUFBLEdBQ0EsRUFBQSxrQkFBQSxJQUFBLFdBQUEsR0FDQSxFQUFBLFdBQ0EsRUFBQSxrQkFBQSxJQUFBLFdBQUEsSUFDQSxNQUdBLEVBQUEsUUFBQSxXQUVBLEVBQUEsTUFBQSxTQUFBLGtGQUVBLEVBQUEsRUFBQSxVQUFBLEdBQUEsS0FDQSxLQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxPQUFBLEVBQ0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsR0FBQSxTQUVBLEVBQUEsT0FDQSxFQUFBLFVBQ0EsU0FBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLFNDbEtBLElBQUEsV0FBQSxzQkFDQSxTQUFBLGNBQUEsV0FBQSxnQkFBQSxhQUFBLGlCQUFBLFlBQUEsS0FBQSxRQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLHFCQUFBLFNBQUEsR0FDQSxFQUFBLG1CQUdBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBRUEsT0FBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLE9BQ0EsUUFHQSxPQUFBLEdBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLE9BQ0EsV0FHQSxPQUFBLEdBQUEsRUFDQSxXQURBLFFBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUNBLEVBQUEsSUFDQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUEsS0FDQSxFQUFBLFNBQUEsRUFBQSxJQUNBLEVBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxPQUFBLEdBQUEsS0FBQSxHQUFBLE9BQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLEdBR0EsTUFBQSxHQUFBLEVBQ0EsV0FEQSxRQUtBLEVBQUEsWUFBQSxFQUNBLEVBQUEsV0FFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsS0FpQkEsT0FoQkEsR0FBQSxHQUFBLEtBQUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsS0FDQSxJQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxPQUFBLE1BQUEsWUFDQSxHQUFBLE1BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLEdBQ0EsUUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsR0FBQSxHQUFBLFlBSUEsR0FHQSxFQUFBLFdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFFBQ0EsRUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsU0FBQSxFQUtBLE9BSkEsR0FBQSxPQUFBLElBQ0EsYUFBQSxPQUFBLEtBQUEsVUFBQSxJQUVBLGFBQUEsV0FBQSxTQUFBLE9BQUEsd0JBRUEsT0FBQSxFQUFBLFdBQUEsYUFBQSxZQUlBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHVDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsTUFDQSxFQUFBLEVBQUEsTUFLQSxPQUpBLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxjQUFBLHdDQUNBLEVBQUEsSUFBQSxlQUFBLG9CQUFBLE9BQUEsR0FBQSxJQUNBLFdBQ0EsRUFBQSx3QkFFQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUNBLFdBQ0EsRUFBQSxrQ0EwQkEsSUFwQkEsRUFBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxXQUFBLDBCQUNBLEVBQUEsZ0JBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxFQUVBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSw0QkFJQSxhQUFBLE9BQ0EsSUFDQSxLQUFBLE1BQUEsYUFBQSxRQUFBLE9BQUEsSUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxNQUFBLGFBQUEsU0FFQSxNQUFBLFFBSUEsR0FBQSxNQUFBLFdBQ0EsRUFBQSxNQUFBLFlBQUEsNEJBQUEsWUFBQSxJQUNBLEVBQUEsaUJDN0pBLElBQUEsV0FBQSxzQkFBQSxTQUFBLFlBQUEsdUJBQ0EiLCJmaWxlIjoid3d3L2pzL2NvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCSU5VU01BWUEgTU9EVUxFXG4gKiBAYXV0aG9yIFBlZG94IDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cblxuXG4vLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ3N0YXJ0ZXInIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG5cbnZhciB2aWV3X3BhdGggPSAndmlld3MvJyxcbiAgcGNvbG9yID0gJyMxQzUzNkYnLFxuICBfYmltYXlfdXJsID0gJ2h0dHA6Ly9iaW51c21heWEuYmludXMuYWMuaWQnLFxuICBfYmltYXlfYXBpX3VybCA9ICdodHRwOi8vYXBwcy5iaW51c21heWEuYmludXMuYWMuaWQnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0JpbnVzTWF5YScsIFsnaW9uaWMnLCAnbGlzdFJvdXRlJywgJ0JpbnVzTWF5YUZhY3RvcnknXSlcblxuLnJ1bihmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgJHJvb3RTY29wZSwgJGlvbmljSGlzdG9yeSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsIEJpbnVzTWF5YSwgJHRpbWVvdXQpIHtcblxuICAkcm9vdFNjb3BlLmxvZ2luID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UuaXNsb2dpbiA9PSBcInVuZGVmaW5lZFwiID8gZmFsc2UgOiBsb2NhbFN0b3JhZ2UuaXNsb2dpbik7XG4gICRyb290U2NvcGUubGVmdE1lbnUgPSBmYWxzZTtcbiAgJHJvb3RTY29wZS5wcm9maWxlUGljdHVyZSA9IGZhbHNlO1xuICAkcm9vdFNjb3BlLmxvZ2luTmFtZSA9IHR5cGVvZiBsb2NhbFN0b3JhZ2UuZm5hbWUgPT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBsb2NhbFN0b3JhZ2UuZm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgZGVsZXRlIGxvY2FsU3RvcmFnZS5jb29raWU7XG4gIGRlbGV0ZSBsb2NhbFN0b3JhZ2UudGVtcGxvZ2luO1xuXG4gICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICRyb290U2NvcGUub25Mb2FkU3R5bGUgPSB7XG4gICAgICBvcGFjaXR5OiAxXG4gICAgfTtcbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIC8qaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQpIHtcbiAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5oaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIodHJ1ZSk7XG4gICAgfSovXG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gICAgaWYobG9jYWxTdG9yYWdlLmlzbG9naW4pIHtcbiAgICAgIGdldFByb2ZpbGVJbWFnZSgpOyAgXG4gICAgfVxuICB9KTtcblxuICAkcm9vdFNjb3BlLmdldExhc3RVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAkcm9vdFNjb3BlLmxhc3RVcGRhdGUgPSB0eXBlb2YgbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGUgPT09IFwidW5kZWZpbmVkXCIgPyBcIldoYXRldmVyXCIgOiBsb2NhbFN0b3JhZ2UubGFzdFVwZGF0ZTtcbiAgfTtcbiAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlKCk7XG4gICRyb290U2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIy8nO1xuICAgICRpb25pY0hpc3RvcnkuY2xlYXJIaXN0b3J5KCk7XG4gICAgJGlvbmljTmF2QmFyRGVsZWdhdGUuc2hvd0JhY2tCdXR0b24oZmFsc2UpO1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9O1xuXG4gIHZhciBnZXRQcm9maWxlSW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAvKiogcGVmb3JtIGF2YXRhciAqKi9cbiAgICBjb25zb2xlLmxvZyhcInBlcmZvcm1cIik7XG4gICAgaWYobG9jYWxTdG9yYWdlLnByb2ZpbGVQaWN0dXJlKSB7XG4gICAgICAkcm9vdFNjb3BlLnByb2ZpbGVQaWN0dXJlID0gbG9jYWxTdG9yYWdlLnByb2ZpbGVQaWN0dXJlO1xuICAgICAgY29uc29sZS5sb2coXCJwZXJmb3JtXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJtYWtlIHJlcXVlc3QgdG8gYW5vdGhlciAhXCIpOyAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1ha2UgcmVxdWVzdCAhXCIpO1xuICAgICAgICBCaW51c01heWEucHJvZmlsZVBpY3R1cmUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHkgIVwiKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5wcm9maWxlUGljdHVyZSA9IGRvbmU7XG4gICAgICAgICAgICAgICRyb290U2NvcGUucHJvZmlsZVBpY3R1cmUgPSBkb25lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIFxuXG4gIGlmICgkcm9vdFNjb3BlLmxvZ2luKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnL3NjaGVkdWxlJztcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcvJztcbiAgfVxufSlcblxuLmNvbmZpZyhmdW5jdGlvbigkaW9uaWNDb25maWdQcm92aWRlcikge1xuICAkaW9uaWNDb25maWdQcm92aWRlci52aWV3cy5mb3J3YXJkQ2FjaGUoZmFsc2UpO1xuICAkaW9uaWNDb25maWdQcm92aWRlci52aWV3cy5tYXhDYWNoZSgwKTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0JpbnVzTWF5YUZhY3RvcnknLCBbXSlcblxuLmZhY3RvcnkoJ0JpbnVzTWF5YScsIGZ1bmN0aW9uKCRxLCAkaW9uaWNQb3B1cCkge1xuICByZXR1cm4ge1xuXG4gICAgX2JpbWF5X3VybDogJ2h0dHA6Ly9iaW51c21heWEuYmludXMuYWMuaWQnLFxuICAgIF9iaW1heV9hcGlfdXJsOiAnaHR0cDovL2FwcHMuYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcblxuICAgIGhlYWRlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIENvb2tpZTogbG9jYWxTdG9yYWdlLmNvb2tpZSA/IGxvY2FsU3RvcmFnZS5jb29raWUgOiBudWxsLFxuICAgICAgICBPcmlnaW46IF90Ll9iaW1heV91cmwsXG4gICAgICAgIFJlZmVyZXI6IF90Ll9iaW1heV91cmxcbiAgICAgIH07XG4gICAgfSxcbiAgICBjaGVja0xvZ2luOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICB2YXIgbG9naW4gPSBsb2NhbFN0b3JhZ2UubG9naW5JZCA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxvZ2luSWQpIDogZmFsc2U7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudGVtcGxvZ2luID09PSB0cnVlKSB7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmKGxvZ2luID09PSBmYWxzZSkge1xuICAgICAgICAgIHJlamVjdChcInBsZWFzZSBsb2dpblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gX3QuYXBpKCcvJywgJ2dldCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIGlmIChkLmNvZGUgIT09IDIwMCkgcmVqZWN0KGQpO1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLnR4dFVzZXJJZCA9IGxvZ2luLmJpbnVzaWQ7XG4gICAgICAgICAgICAgIGRhdGEudHh0UGFzc3dvcmQgPSBsb2dpbi5wYXNzd29yZDtcbiAgICAgICAgICAgICAgZGF0YS5idG5Mb2dpbiA9IFwiTG9nIEluIFwiO1xuICAgICAgICAgICAgICByZXR1cm4gX3QuYXBpKCcvJywgJ3Bvc3QnLCBkYXRhKTtcbiAgICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnRlbXBsb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFwaTogZnVuY3Rpb24oZW5kcG9pbnQsIG1ldGhvZCwgcGFyYW1zLCBub0VuZHBvaW50KSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgdHlwZW9mIG5vRW5kcG9pbnQgIT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IHRydWU7XG4gICAgICBpZiAobG9jYWxTdG9yYWdlLmNvb2tpZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBfdC5fZ2V0Q29va2llKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoZW5kcG9pbnQsIG1ldGhvZCwgcGFyYW1zKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpZiAobWV0aG9kID09PSBcImdldFwiKSB7XG4gICAgICAgICAgICBodHRwY2xpZW50LmdldCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgcmVzb2x2ZSwgcmVqZWN0LCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IF90LmhlYWRlcnMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBjbGllbnQucG9zdCgobm9FbmRwb2ludCA/IGVuZHBvaW50IDogX3QuX2JpbWF5X3VybCArIGVuZHBvaW50KSwgcGFyYW1zLCByZXNvbHZlLCByZWplY3QsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogX3QuaGVhZGVycygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmcmFtZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzLFxuICAgICAgICBfdXJsID0gJyc7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiBfdC5hcGkodXJsLCAnZ2V0JylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKCQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3AxX2lmckFwcFwiKS5hdHRyKFwic3JjXCIpLCAnZ2V0Jyk7XG4gICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIF91cmwgPSAkKGQucmVzdWx0KS5maW5kKFwiI2lmckFwcFwiKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaShfdXJsLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgIH0sIHJlamVjdClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgdXJsOiBfdXJsLFxuICAgICAgICAgICAgICByZXN1bHQ6IGRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgX2dldENvb2tpZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3QgPSB0aGlzO1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBodHRwY2xpZW50LmdldChfdC5fYmltYXlfdXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jb29raWUgPSBkYXRhLmhlYWRlclsnU2V0LUNvb2tpZSddO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcHJvZmlsZVBpY3R1cmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgX3QuY2hlY2tMb2dpbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfdC5mcmFtZSgnLycpO1xuICAgICAgICB9LCByZWplY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgdmFyIHVybCA9ICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwUmlnaHRfdWNQaG90b19pbWdQcm9maWxlUGljXCIpLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgaHR0cGNsaWVudC5pbWFnZShfdC5fYmltYXlfYXBpX3VybCArIFwiL2hvbWUvXCIgKyB1cmwsIGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICByZXNvbHZlKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBkLnJlc3VsdC5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLFwiXCIpKTtcbiAgICAgICAgICB9LCByZWplY3QsIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IF90LmhlYWRlcnMoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwcm9tcHRQYXNzd29yZDogZnVuY3Rpb24obG9jYXRpb24sIHNjb3BlKSB7XG4gICAgICBzY29wZS5wcm9tcHRQYXNzID0ge307XG4gICAgICB2YXIgbXlQb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgICB0ZW1wbGF0ZTogJzxwIG5nLXNob3c9XCJwcm9tcHRQYXNzLmVycm9yXCI+SW5jb3JyZWN0IFBhc3N3b3JkPC9wPjxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cInByb21wdFBhc3MtZm9ybVwiIG5nLW1vZGVsPVwicHJvbXB0UGFzcy5wYXNzd29yZFwiPicsXG4gICAgICAgIHRpdGxlOiAnRW50ZXIgQmludXNtYXlhIFBhc3N3b3JkJyxcbiAgICAgICAgc3ViVGl0bGU6ICcnLFxuICAgICAgICBzY29wZTogc2NvcGUsXG4gICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgdGV4dDogJ0NhbmNlbCcsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvJyArIGxvY2F0aW9uO1xuICAgICAgICAgICAgbXlQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIHRleHQ6ICc8Yj5FbnRlcjwvYj4nLFxuICAgICAgICAgIHR5cGU6ICdidXR0b24tcG9zaXRpdmUnLFxuICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgbXlwYXNzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubG9naW5JZCkucGFzc3dvcmQ7XG4gICAgICAgICAgICBpZiAobXlwYXNzID09IHNjb3BlLnByb21wdFBhc3MucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcyA9IHt9O1xuICAgICAgICAgICAgICBzY29wZS5pc0FsbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY29wZS5wcm9tcHRQYXNzLmVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcy5wYXNzd29yZCA9IFwiXCI7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9LFxuICAgIF9yZXF1ZXN0RXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgIH0sXG4gICAgZ3JvdXBpbmc6IGZ1bmN0aW9uKF9kYXRhKSB7XG4gICAgICBpZiAoX2RhdGEubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIG0gPSBbXSxcbiAgICAgICAgcCA9ICcnLFxuICAgICAgICBjID0gLTEsXG4gICAgICAgIGNoID0gMDtcbiAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICBpZiAocCA9PSBkLmRhdGUpIHtcbiAgICAgICAgICBtW2NdLmRhdGFbY2hdID0gZDtcbiAgICAgICAgICBjaCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoID0gMTtcbiAgICAgICAgICBjKys7XG4gICAgICAgICAgcCA9IGQuZGF0ZTtcbiAgICAgICAgICBtW2NdID0ge1xuICAgICAgICAgICAgZGF0ZTogZC5kYXRlLFxuICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICB9O1xuICAgICAgICAgIG1bY10uZGF0YVswXSA9IGQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG07XG4gICAgfVxuICB9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2xpc3RSb3V0ZScsIFtdKVxuXG4uY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaW5kZXgnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdsb2dpbi5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NjaGVkdWxlJywge1xuICAgICAgdXJsOiAnL3NjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzY2hlZHVsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdhYm91dC5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZvcnVtJywge1xuICAgICAgdXJsOiAnL2ZvcnVtJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdmb3J1bS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRm9ydW1Db250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3NlcnZpY2VzJywge1xuICAgICAgdXJsOiAnL3NlcnZpY2VzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9pbmRleC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZXNDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ215Y2xhc3MnLCB7XG4gICAgICB1cmw6ICcvbXljbGFzcycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbXljbGFzcy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTXlDbGFzc0NvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnbXljbGFzc0RldGFpbCcsIHtcbiAgICAgIHVybDogJy9teWNsYXNzLWRldGFpbC86Y29kZScsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIGRhdGFzZXQ6IGZ1bmN0aW9uKCRxLCAkc3RhdGVQYXJhbXMsICRsb2NhdGlvbikge1xuICAgICAgICAgIHZhciBfZ290ID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICB2YXIgY2xhc3NEYXRhID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UubXlDbGFzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLm15Q2xhc3MpIDogZmFsc2UpO1xuICAgICAgICAgIGZvciAodmFyIGQgaW4gY2xhc3NEYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2xhc3NEYXRhW2RdLmNvZGUgPT0gJHN0YXRlUGFyYW1zLmNvZGUpIHtcbiAgICAgICAgICAgICAgX2dvdCA9IGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfZ290KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9nb3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL215Y2xhc3MnKS5yZXBsYWNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ215Y2xhc3NJbnNpZGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ015Q2xhc3NEZXRhaWxDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY2hlZHVsZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjaGVkdWxlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjaGVkdWxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NoZWR1bGVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2V4YW1TY29yZScsIHtcbiAgICAgIHVybDogJy9leGFtLXNjb3JlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9leGFtLXNjb3JlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeGFtU2NvcmVDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2ZpbmFuY2VTdGF0dXMnLCB7XG4gICAgICB1cmw6ICcvZmluYW5jZS1zdGF0dXMnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2JpbGxpbmcuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0ZpbmFuY2VDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2Fic2VuY2UnLCB7XG4gICAgICB1cmw6ICcvYWJzZW5jZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvYWJzZW5jZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnQWJzZW5jZUNvbnRyb2xsZXInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnY29taW5nJywge1xuICAgICAgdXJsOiAnL2NvbWluZycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnY29taW5nLmh0bWwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2NvbWluZ1wiKTtcbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdBYnNlbmNlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkaHR0cCwgJGxvY2F0aW9uLFxuICAgICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXApIHtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hBYnNlbmNlKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChkb25lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmFic2VuY2UgPSBKU09OLnN0cmluZ2lmeShkb25lKTtcbiAgICAgICAgICAgICAgJHNjb3BlLmFic2VuY2UgPSBkb25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoQWJzZW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIF9kYXRhID0gW10sIGNvdW50ID0gMDtcbiAgICAgICAgICBmdW5jdGlvbiBnZXRTdGF0dXMoc3RyKSB7XG5cdFx0XHRcdFx0XHRpZigvYmFpay8udGVzdChzdHIpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAnYmFsYW5jZWQnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKC93YXJuaW5nLy50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdjYWxtJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZigvbWF4aW11bS8udGVzdChzdHIpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAnZW5lcmdpemVkJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZigvb3ZlcmxpbWl0Ly50ZXN0KHN0cikpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICdhc3NlcnRpdmUnO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cbiAgICAgICAgICAkKGRhdGEpLmZpbmQoJyNycHRUYWJsZSB0cicpLmVhY2goZnVuY3Rpb24oaSwgYSkge1xuICAgICAgICAgICAgdmFyIGh0ID0gJCh0aGlzKS5maW5kKCd0ZCcpO1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgIGlmIChodC5sZW5ndGggPj0gOCkge1xuICAgICAgICAgICAgICAgIF9kYXRhW2NvdW50XSA9IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGh0LmVxKDApLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIGFic2VuY2U6IFt7XG4gICAgICAgICAgICAgICAgICAgIG1heDogaHQuZXEoMykuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogaHQuZXEoNCkuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGh0LmVxKDIpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBnZXRTdGF0dXMoaHQuZXEoNSkuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIpKVxuICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2RhdGFbY291bnQgLSAxXS5hYnNlbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbWF4OiBodC5lcSgyKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICB0b3RhbDogaHQuZXEoMykuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBodC5lcSgxKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgICBzdGF0dXM6IGdldFN0YXR1cyhodC5lcSg0KS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIikpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gX2RhdGE7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2Fic2VuY2UuaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICBcdEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDMpID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoXG4gICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDFfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRTdWJNZW51X2N0bDAyX2xpbmtTdWJNZW51XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoYy5yZXN1bHQpKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFic2VuY2UgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZS5hYnNlbmNlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAkc2NvcGUuYWJzZW5jZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmFic2VuY2UpO1xuICAgIH1cblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICB9KTsiLCJhcHAuY29udHJvbGxlcignRXhhbVNjaGVkdWxlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkaHR0cCwgJGxvY2F0aW9uLCBcbiAgXHQkc3RhdGVQYXJhbXMsICR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkaW9uaWNQbGF0Zm9ybSwgJHEsICRpb25pY1BvcHVwKSB7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoU2NoZWR1bGUoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIFx0aWYoZG9uZS5sZW5ndGggPiAwKVxuICAgICAgICAgIFx0e1xuXHQgICAgICAgICAgXHRsb2NhbFN0b3JhZ2UuZXhhbVNjaGVkdWxlID0gSlNPTi5zdHJpbmdpZnkoZG9uZSk7XG5cdCAgICAgICAgICAgICRzY29wZS5leGFtU2NoZWR1bGVMaXN0ID0gZG9uZTtcbiAgICAgICAgICBcdH1cbiAgICAgICAgICBcdCRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XHRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZXJySGFuZGxlKGVycik7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciByZWZyZXNoU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIFx0dmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgXHRcdHZhciBfZGF0YSA9IFtdO1xuICAgICAgXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgXHRcdFx0dmFyIHRlcm0gPSAkKGRhdGFbaV0pLmZpbmQoXCJ0YWJsZTplcSgyKSB0ciB0ZCBsaVwiKS50ZXh0KCk7XG5cdCAgICAgIFx0XHQkKGRhdGFbaV0pLmZpbmQoXCIudGFibGV3aXRoYm9yZGVyIHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuXHQgICAgICBcdFx0XHRpZihpID4gMCkge1xuXHRcdCAgICAgIFx0XHRcdF9kYXRhLnB1c2goe1xuXHRcdCAgICAgIFx0XHRcdFx0dGVybTogXHRcdCAgdGVybSxcblx0XHQgICAgICBcdFx0XHRcdGNvZGU6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDApLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdG5hbWU6IFx0XHRcdCQoZCkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcblx0XHQgICAgICBcdFx0XHRcdHNrczogXHRcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgyKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRkYXRlOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgzKS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRob3VyOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg0KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRyb29tOiBcdFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg1KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRjYW1wdXM6IFx0XHQkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg2KS50ZXh0KCksXG5cdFx0ICAgICAgXHRcdFx0XHRjbGFzc05hbWU6IFx0JChkKS5maW5kKFwidGRcIikuZXEoNykudGV4dCgpLFxuXHRcdCAgICAgIFx0XHRcdFx0c2VhdDogXHRcdFx0cGFyc2VJbnQoJChkKS5maW5kKFwidGRcIikuZXEoOCkudGV4dCgpKVxuXHRcdCAgICAgIFx0XHRcdH0pO1xuXHQgICAgICBcdFx0XHR9XG5cdCAgICAgIFx0XHR9KTtcbiAgICAgIFx0XHR9XG4gICAgICBcdFx0cmV0dXJuIEJpbnVzTWF5YS5ncm91cGluZyhfLnNvcnRCeShfZGF0YSwgJ2RhdGUnKSk7XG4gICAgICBcdH07XG4gICAgICBcdHZhciBkYXRhU2NoZWR1bGUgPSBbXSxcbiAgICAgIFx0XHRcdHNjaGVkdWxlX3VybCA9IFwiXCI7XG4gICAgICBcdGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2V4YW0uaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQuZGF0YSk7XG4gICAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9leGFtLXByYWN0aWN1bS5odG1sJyk7XG4gICAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGUuZGF0YSk7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZGF0YVNjaGVkdWxlKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICBcdEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICBcdC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgIFx0LnRoZW4oZnVuY3Rpb24oZCkge1xuXHQgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuXHQgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG5cdCAgICAgICAgICB9KVxuXHQgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShcbiAgICAgICAgICAgICAgICAkKGQucmVzdWx0LnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcENvbnRlbnRfcnB0TWFpbk1lbnVTdHVkZW50X2N0bDAyX2xpbmtNZW51U3R1ZGVudFwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRzY2hlZHVsZV91cmwgPSBkLnJlc3VsdDtcbiAgICAgICAgICAgIFx0cmV0dXJuIEJpbnVzTWF5YS5hcGkoJChzY2hlZHVsZV91cmwpLmZpbmQoXCIuaXRlbUNvbnRlbnRTZXJ2aWNlIGxpOmVxKDApIGFcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgXHRkYXRhU2NoZWR1bGUucHVzaChkLnJlc3VsdCk7XG4gICAgICAgICAgICBcdHJldHVybiBCaW51c01heWEuYXBpKCQoc2NoZWR1bGVfdXJsKS5maW5kKFwiLml0ZW1Db250ZW50U2VydmljZSBsaTplcSgxKSBhXCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIFx0ZGF0YVNjaGVkdWxlLnB1c2goZC5yZXN1bHQpO1xuICAgICAgICAgICAgXHRyZXR1cm4gQmludXNNYXlhLmFwaSgkKHNjaGVkdWxlX3VybCkuZmluZChcIi5pdGVtQ29udGVudFNlcnZpY2UgbGk6ZXEoMikgYVwiKS5hdHRyKFwiaHJlZlwiKSwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICBcdGRhdGFTY2hlZHVsZS5wdXNoKGQucmVzdWx0KTtcbiAgICAgICAgICAgIFx0cmVzb2x2ZShyZXR1cm5SZXNwb25zZShkYXRhU2NoZWR1bGUpKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmV4YW1TY2hlZHVsZUxpc3QgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZS5leGFtU2NoZWR1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICRzY29wZS5leGFtU2NoZWR1bGVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZXhhbVNjaGVkdWxlKTtcbiAgICB9XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgfSk7IiwiLyoqXG4gKiBGaW5hbmNlIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdGaW5hbmNlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNQb3B1cCwgJHEsICRodHRwKSB7XG5cbiAgICAkc2NvcGUuaXNBbGxvdyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaEZpbmFuY2UoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmZpbmFuY2VMaXN0ID0gZG9uZTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLnRvTW9uZXkgPSBmdW5jdGlvbihuKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gbi50b0ZpeGVkKDIpLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrXFwuKS9nLCAnJDEsJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaEZpbmFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICB2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIGJpbGxpbmcgPSAwO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBiaWxsaW5nID0gcGFyc2VJbnQoJChkYXRhKS5maW5kKFwidGFibGU6ZXEoMCkgdHIgdGRcIikuaHRtbCgpLm1hdGNoKC9bMC05XSsvKVswXSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICB2YXIgaGFzaWwgPSBbXTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoJ3RhYmxlI3JwdFRhYmxlIHRyJykuZWFjaChmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgaGFzaWwucHVzaCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogaHQuZXEoMSkuaHRtbCgpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBodC5lcSgyKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdGVybTogaHQuZXEoMykuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGR1ZTogaHQuZXEoNCkuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGNoYXJnZTogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNSkuaHRtbCgpKSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNSkuaHRtbCgpKSxcbiAgICAgICAgICAgICAgICBwYXltZW50OiBpc05hTihwYXJzZUludChodC5lcSg2KS5odG1sKCkpKSA9PT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg2KS5odG1sKCkubWF0Y2goL1swLTldKy8pKSxcbiAgICAgICAgICAgICAgICByZWZ1bmQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDcpLmh0bWwoKSkpID09PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDcpLmh0bWwoKSlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGZpbmFsX2RhdGEgPSB7XG4gICAgICAgICAgICBkYXRhOiBCaW51c01heWEuZ3JvdXBpbmcoaGFzaWwpLFxuICAgICAgICAgICAgYmlsbGluZzogYmlsbGluZyxcbiAgICAgICAgICAgIGxhc3RVcGRhdGU6IG1vbWVudCgpLmZvcm1hdCgnRCBNTU1NIFlZWVkgaDptbTpzcycpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZmluYW5jZSA9IEpTT04uc3RyaW5naWZ5KGZpbmFsX2RhdGEpO1xuICAgICAgICAgIHJldHVybiBmaW5hbF9kYXRhO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L2ZpbmFuY2UuaHRtbCcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuUmVzcG9uc2UoZC5kYXRhKSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAvLyBMb2FkIFRoZXNlIFBhZ2VcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAkKGQucmVzdWx0KS5maW5kKFwiLml0ZW1Db250ZW50IHVsIGxpOmVxKDMpID4gYVwiKS5hdHRyKFwiaHJlZlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDZfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIjY3RsMDBfY3BDb250ZW50X3JwdFN1Yk1lbnVfY3RsMDNfbGlua1N1Yk1lbnVcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShjLnJlc3VsdCkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZS5maW5hbmNlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5maW5hbmNlKTtcbiAgICB9XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgICBCaW51c01heWEucHJvbXB0UGFzc3dvcmQoJ3NlcnZpY2VzJywgJHNjb3BlKTtcbiAgfVxuKTsiLCJhcHAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJyxcbmZ1bmN0aW9uKCRzY29wZSwgJGlvbmljUG9wdXAsICR0aW1lb3V0LCAkaW9uaWNIaXN0b3J5LCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHJvb3RTY29wZSwgQmludXNNYXlhKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gdHJ1ZTtcbiAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFyKGZhbHNlKTtcblxuICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcblxuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoISgkc2NvcGUuYmludXNpZCAmJiAkc2NvcGUucGFzc3dvcmQpKSB7XG4gICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgdGVtcGxhdGU6ICdQbGVhc2UgSW5wdXQgQmludXNpYW4gSUQgYW5kIFBhc3N3b3JkJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJ29uLWxvYWRpbmcnO1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0JylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIGlmKGQuY29kZSAhPT0gMjAwKSBoYW5kbGVFcnJvcihkKTtcbiAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGEudHh0VXNlcklkID0gJHNjb3BlLmJpbnVzaWQ7XG4gICAgICAgICAgZGF0YS50eHRQYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcbiAgICAgICAgICBkYXRhLmJ0bkxvZ2luID0gXCJMb2cgSW4gXCI7XG4gICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAncG9zdCcsIGRhdGEpO1xuICAgICAgICB9LCBoYW5kbGVFcnJvcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBuYW1lID0gJChkLnJlc3VsdCkuZmluZChcIiNjb250ZW50ICN0b3BiYXIgLnJpZ2h0IHN0cm9uZ1wiKTtcbiAgICAgICAgICAvLyBXaGVuIFN1Y2Nlc3NcbiAgICAgICAgICBpZihkLmNvZGUgIT09IDIwMClcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIGlmKG5hbWUubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQsICQoZC5yZXN1bHQpLmZpbmQoXCIjbGJsRXJyb3JcIikudGV4dCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSSBUaGluayB0aGF0IG5vdCBiZXN0IG1ldGhvZFxuICAgICAgICAgICAgICogQHRvZG8gbWFrZSBpdCBoYXNoXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sb2dpbklkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBiaW51c2lkOiAkc2NvcGUuYmludXNpZCxcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc2xvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5mbmFtZSA9IG5hbWUudGV4dCgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2luTmFtZSA9IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICRpb25pY0hpc3RvcnkuY2xlYXJIaXN0b3J5KCk7XG4gICAgICAgICAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFja0J1dHRvbihmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0sIGhhbmRsZUVycm9yKTtcblxuICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihkYXRhLCB0ZXh0KSB7XG4gICAgICAgICAgdHlwZW9mIHRleHQgIT09IFwidW5kZWZpbmVkXCIgPyB0ZXh0IDogbnVsbDtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG4gICAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRleHQgPyB0ZXh0IDogJ1NvbWV0aGluZyB3cm9uZyAhJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cbik7XG4iLCIvKipcbiAqIE15IENsYXNzIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdNeUNsYXNzQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkbG9jYXRpb24sICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsICRpb25pY0xvYWRpbmcsICRodHRwKSB7XG4gICAgJHJvb3RTY29wZS5ub0hlYWRlciA9IGZhbHNlO1xuICAgICRyb290U2NvcGUubGVmdE1lbnUgPSB0cnVlO1xuICAgICRpb25pY1BsYXRmb3JtLm9uSGFyZHdhcmVCYWNrQnV0dG9uKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICRzY29wZS5jbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG5cbiAgICB2YXIgcmVmcmVzaE15Q2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBfcmVEYXRhID0gW107XG4gICAgICAgICAgJChkYXRhKS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sVGVvcmkgdWwgbGlcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICQoZCkuZmluZChcImFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICByZWcgPSBuYW1lLm1hdGNoKC9eKC4qKS0oLiopIFxcKCguKilcXCkvaSk7XG4gICAgICAgICAgICBfcmVEYXRhLnB1c2goe1xuICAgICAgICAgICAgICBpbmRleEl0ZW06IGksXG4gICAgICAgICAgICAgIG5hbWU6IHJlZ1syXSxcbiAgICAgICAgICAgICAgdXJsOiAkKGQpLmZpbmQoXCJhXCIpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgY29kZTogcmVnWzFdLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IHJlZ1szXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeShfcmVEYXRhKTtcbiAgICAgICAgICByZXR1cm4gX3JlRGF0YTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZih0eXBlb2YgaHR0cGNsaWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDoyNTA1L215Y2xhc3MuaHRtbCcpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGMucmVzdWx0LnJlc3VsdCkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBteSBjbGFzc1wiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVmcmVzaE15Q2xhc3MoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YSA9IGRvbmU7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgfSwgZXJySGFuZGxlKTtcblxuICAgICAgdmFyIGVyckhhbmRsZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYoISRzY29wZS5jbGFzc0RhdGEpIHtcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG4gICAgICAkc2NvcGUuZG9SZWZyZXNoKCk7XG4gICAgfVxuXG4gIH0pOyIsIi8qKlxuICogTXkgQ2xhc3MgSW5zaWRlXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignTXlDbGFzc0RldGFpbENvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGxvY2F0aW9uLCAkaHR0cCwgJGlvbmljU2Nyb2xsRGVsZWdhdGUsXG4gICAgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGlvbmljUGxhdGZvcm0sICRxLCAkaW9uaWNQb3B1cCwgZGF0YXNldCwgJHRpbWVvdXQsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRzY29wZS5jbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG4gICAgJHNjb3BlLnN0YXRlID0ge1xuICAgICAgaXNEYXRhOiBmYWxzZSxcbiAgICAgIGxvYWRpbmc6IHRydWVcbiAgICB9O1xuICAgICRzY29wZS5kYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XTtcbiAgICAkc2NvcGUuc2hvd3BhZ2UgPSAwO1xuXG4gICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50ID0gW107XG4gICAgJHNjb3BlLmxpbmtzU2V0ID0gW107XG5cbiAgICB2YXIgZ2V0Q2xhc3NEZXRhaWwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBkZXNjX21haW4gPSAkKGRhdGEpLmZpbmQoXCIjZGVzY19jb3Vyc2VfZGVzYyA+IHNwYW5cIikuaHRtbCgpLFxuICAgICAgICAgICAgICBkZXNjX2dyYWQgPSAkKGRhdGEpLmZpbmQoXCIjZGVzY19ncmFkX2NvbXBldGUgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgY291cnNlID0gW10sIFxuICAgICAgICAgICAgICBhc3NpZ21lbnQgPSBbXTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxDb250ZW50VGhlb3J5IHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgY291cnNlLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkOmVxKDApID4gc3BhblwiKS5odG1sKCkpLFxuICAgICAgICAgICAgICAgIG1vZGU6ICQoZCkuZmluZChcInRkOmVxKDEpID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgdG9waWNzOiAkKGQpLmZpbmQoXCJ0ZDplcSgyKSA+IGFcIikuaHRtbCgpLFxuICAgICAgICAgICAgICAgIGRhdGU6ICQoZCkuZmluZChcInRkOmVxKDMpID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgbGlua3M6ICQoZCkuZmluZChcInRkOmVxKDQpID4gaW5wdXRcIikuYXR0cignbmFtZScpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgICQoZGF0YSkuZmluZChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3BubE1haW5Bc3NpZ25tZW50IHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgYXNzaWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHRlcm06ICdNYWluIEFzc2lnbWVudCcsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogcGFyc2VJbnQoJChkKS5maW5kKFwidGRcIikuZXEoMCkudGV4dCgpKSxcbiAgICAgICAgICAgICAgICB0b3BpY3M6ICQoZCkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJChkKS5maW5kKFwidGRcIikuZXEoMikudGV4dCgpLFxuICAgICAgICAgICAgICAgIGRlc2M6ICQoZCkuZmluZChcInRkXCIpLmVxKDMpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBkZWFkbGluZTogJChkKS5maW5kKFwidGRcIikuZXEoNCkudGV4dCgpLFxuICAgICAgICAgICAgICAgIHVwbG9hZDogJChkKS5maW5kKFwidGRcIikuZXEoNSkuZmluZChcImltZ1wiKS5sZW5ndGggPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2hlY2tlZDogJChkKS5maW5kKFwidGRcIikuZXEoNikuZmluZChcImltZ1wiKS5sZW5ndGggPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbGluazogJChkKS5maW5kKFwidGRcIikuZXEoNykuZmluZChcImlucHV0OmVxKDApXCIpLmF0dHIoJ25hbWUnKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRhdGEpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxBZGRpdGlvbmFsQXNzaWdubWVudDIgdGFibGUgdGJvZHkgdHJcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICBhc3NpZ21lbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgdGVybTogJ0FkZGl0aW9uYWwgQXNzaWdtZW50JyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiBwYXJzZUludCgkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgwKS50ZXh0KCkpLFxuICAgICAgICAgICAgICAgIHRvcGljczogJChkKS5maW5kKFwidGRcIikuZXEoMSkudGV4dCgpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSgyKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgZGVzYzogJChkKS5maW5kKFwidGRcIikuZXEoMykudGV4dCgpLFxuICAgICAgICAgICAgICAgIGRlYWRsaW5lOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg0KS50ZXh0KCksXG4gICAgICAgICAgICAgICAgdXBsb2FkOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg1KS5maW5kKFwiaW1nXCIpLmxlbmd0aCA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjaGVja2VkOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg2KS5maW5kKFwiaW1nXCIpLmxlbmd0aCA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsaW5rOiAkKGQpLmZpbmQoXCJ0ZFwiKS5lcSg3KS5maW5kKFwiaW5wdXQ6ZXEoMClcIikuYXR0cignbmFtZScpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1haW5fZGVzY3JpcHRpb246IGRlc2NfbWFpbixcbiAgICAgICAgICAgIGdyYWRfZGVzY3JpcHRpb246IGRlc2NfZ3JhZCxcbiAgICAgICAgICAgIGFzc2lnbWVudDogYXNzaWdtZW50Lmxlbmd0aCA+IDAgPyBhc3NpZ21lbnQgOiBmYWxzZSxcbiAgICAgICAgICAgIGNvdXJzZTogY291cnNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9teWNsYXNzLWluc2lkZS5odG1sJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvJyArIHVybCwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbXkgY2xhc3NcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIGNvdXJzZSBwYWdlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGdldENsYXNzRGV0YWlsKCRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0udXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWwgPSBkYXRhO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5teUNsYXNzID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLmNsYXNzRGF0YSk7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICB9LCBlcnJIYW5kbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuc3RhdGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgJHNjb3BlLnN0YXRlLmlzRGF0YSA9ICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsO1xuICAgIH1cblxuICAgICRzY29wZS5zd2l0Y2hUYWIgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgJHNjb3BlLnNob3dwYWdlID0gc3RhdGU7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS5yZXNpemUoKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfTtcblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb3dubG9hZEFzc2lnbWVudCA9IGZ1bmN0aW9uKGluZGV4LCBsaW5rcykge1xuICAgICAgJHNjb3BlLmxpbmtzU2V0QXNzaWdtZW50W2luZGV4XSA9IHtpc0xvYWRpbmc6IHRydWV9O1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5saW5rc1NldEFzc2lnbWVudFtpbmRleF0gPSB7aXNMb2FkaW5nOiBmYWxzZX07XG4gICAgICB9LCAxMDAwMCk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGU6ICc8aW9uLXNwaW5uZXIgaWNvbj1cImFuZHJvaWRcIiBjbGFzcz1cIm92ZXJsYXktc3Bpbm5lclwiPjwvaW9uLXNwaW5uZXI+IExvYWRpbmcuLi4nfSk7XG5cbiAgICAgIGdldENsYXNzRGV0YWlsKCRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0udXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWwgPSBkYXRhO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5teUNsYXNzID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLmNsYXNzRGF0YSk7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZS5pc0RhdGEgPSAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS5yZXNpemUoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgZXJySGFuZGxlKG1zZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICB9KTtcbiIsIi8qKlxuICogU2NoZWR1bGUgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NjaGVkdWxlQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGlvbmljUG9wdXAsICR0aW1lb3V0LCAkaW9uaWNIaXN0b3J5LCAkcm9vdFNjb3BlLCAkaW9uaWNQbGF0Zm9ybSwgQmludXNNYXlhLCAkcSwgJGh0dHAsICRpb25pY0xvYWRpbmcpIHtcblxuICAgICRyb290U2NvcGUubm9IZWFkZXIgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLmxlZnRNZW51ID0gdHJ1ZTtcbiAgICAkaW9uaWNQbGF0Zm9ybS5vbkhhcmR3YXJlQmFja0J1dHRvbihmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZ2V0U3RhdGUgPSBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgdG9kYXkgPSBtb21lbnQoKTtcbiAgICAgIC8vdG9kYXlcbiAgICAgIGlmIChtb21lbnQoZCkuaXNTYW1lKHRvZGF5LCAnZGF5JykpIHtcbiAgICAgICAgcmV0dXJuICd0b2RheSc7XG4gICAgICB9IGVsc2VcbiAgICAgIC8vdG9tb3Jyb3dcbiAgICAgIGlmIChtb21lbnQoZCkuaXNTYW1lKHRvZGF5LmFkZCgxLCAnZCcpLCAnZGF5JykpIHtcbiAgICAgICAgcmV0dXJuICd0b21vcnJvdyc7XG4gICAgICB9IGVsc2VcbiAgICAgIC8vbGFzdGVkXG4gICAgICBpZiAobW9tZW50KGQpIDwgdG9kYXkpIHtcbiAgICAgICAgcmV0dXJuICdjb21wbGV0byc7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRDb3Vyc2VTdGF0ZSA9IGZ1bmN0aW9uKGQsIG0pIHtcbiAgICAgIHZhciBub3cgPSBtb21lbnQoKSxcbiAgICAgICAgZ2V0TW9tZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBnZXRMYXN0ID0gbS5zcGxpdChcIi1cIilbMV0uc3BsaXQoXCI6XCIpLFxuICAgICAgICAgIGdldEhvdXIgPSBwYXJzZUludChnZXRMYXN0WzBdKSxcbiAgICAgICAgICBnZXRNaW51dGUgPSBwYXJzZUludChnZXRMYXN0WzFdKTtcblxuICAgICAgICBnZXRNb21lbnQgPSBtb21lbnQoZCkuaG91cihnZXRIb3VyKS5taW51dGUoZ2V0TWludXRlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZ2V0TW9tZW50ID0gbW9tZW50KGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2V0TW9tZW50IDwgbm93KSB7XG4gICAgICAgIHJldHVybiAnY29tcGxldG8nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuaXNTY2hlZHVsZSA9IGZhbHNlO1xuICAgICRzY29wZS5zY2hlZHVsZSA9IFtdO1xuXG4gICAgdmFyIHRvSnNvbiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBoYXNpbCA9IFtdO1xuICAgICAgJChkYXRhKS5maW5kKCd0cicpLmVhY2goZnVuY3Rpb24oaSwgYSkge1xuICAgICAgICB2YXIgaHQgPSAkKHRoaXMpLmZpbmQoJ3RkJyk7XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGh0LmVxKDMpLmh0bWwoKS5tYXRjaCgvKC4qKS0oLiopLyk7XG4gICAgICAgICAgaGFzaWwucHVzaCh7XG4gICAgICAgICAgICBkYXRlOiBodC5lcSgwKS5odG1sKCksXG4gICAgICAgICAgICB0aW1lOiBodC5lcSgxKS5odG1sKCksXG4gICAgICAgICAgICBzdGF0ZTogaHQuZXEoMikuaHRtbCgpLFxuICAgICAgICAgICAgY291cnNlOiBtYXRjaFsyXSxcbiAgICAgICAgICAgIGNvZGU6IG1hdGNoWzFdLFxuICAgICAgICAgICAgbXlDbGFzczogaHQuZXEoNSkuaHRtbCgpLFxuICAgICAgICAgICAgcm9vbTogaHQuZXEoNikuaHRtbCgpLFxuICAgICAgICAgICAgYnVpbGRpbmc6IGh0LmVxKDcpLmh0bWwoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBoYXNpbDtcbiAgICB9O1xuXG4gICAgdmFyIHJlZnJlc2hKYWR3YWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJldHVyblJlc3BvbnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBfc2NoZWR1bGUgPSAkKGRhdGEpLmZpbmQoXCJ0YWJsZVwiKSxcbiAgICAgICAgICAgICAgdG9kYXkgPSB0b0pzb24oX3NjaGVkdWxlLmVxKDApLmh0bWwoKSksXG4gICAgICAgICAgICAgIG5leHQgPSB0b0pzb24oX3NjaGVkdWxlLmVxKDEpLmh0bWwoKSksXG4gICAgICAgICAgICAgIHNrZWR1bCA9IHRvZGF5LmNvbmNhdChuZXh0KSxcbiAgICAgICAgICAgICAgamFkd2FsID0gQmludXNNYXlhLmdyb3VwaW5nKHNrZWR1bCk7XG4gICAgICAgICAgICBpZihqYWR3YWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuamFkd2FsID0gSlNPTi5zdHJpbmdpZnkoamFkd2FsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBqYWR3YWw6IGphZHdhbCwgbGFzdFVwZGF0ZTogbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodHlwZW9mIGh0dHBjbGllbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MjUwNS9zY2hlZHVsZS5odG1sJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG4gICAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge30sXG4gICAgICAgICAgICAgICAgZCA9IGMucmVzdWx0O1xuICAgICAgICAgICAgICAkKCQoZC5yZXN1bHQpLnNlcmlhbGl6ZUFycmF5KCkpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICAgIGRhdGFbZC5uYW1lXSA9IGQudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLl9fRVZFTlRUQVJHRVQgPSAnY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRidG5TY2hlZHVsZSc7XG4gICAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvTXlDbGFzcy5hc3B4JywgJ3Bvc3QnLCBkYXRhLCB0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJldHVyblJlc3BvbnNlKGQucmVzdWx0KSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHNjaGVkdWxlIHBhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hKYWR3YWwoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlKCk7XG4gICAgICAgICRzY29wZS5pc1NjaGVkdWxlID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLnNjaGVkdWxlID0gZGF0YS5qYWR3YWw7XG4gICAgICB9LCBlcnJIYW5kbGUpO1xuXG4gICAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgIHRlbXBsYXRlOiBtc2dcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAobG9jYWxTdG9yYWdlLmphZHdhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmphZHdhbCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRzY29wZS5pc1NjaGVkdWxlID0gdHJ1ZTtcbiAgICAgICAgICAkc2NvcGUuc2NoZWR1bGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7dGVtcGxhdGVVcmw6ICd2aWV3cy9tb2R1bGUvbG9hZGluZy5odG1sJyxub0JhY2tkcm9wOiB0cnVlfSk7XG4gICAgICAgICRzY29wZS5kb1JlZnJlc2goKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcbiIsIi8qKlxuICogU2VydmljZXMgQ29udHJvbGxlclxuICogQGF1dGhvciBQZWRveCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignU2VydmljZXNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnQmludXNNYXlhJywgJyRpb25pY05hdkJhckRlbGVnYXRlJyxcbmZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSkge1xuXG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
var view_path="views/",pcolor="#1C536F",_bimay_url="http://binusmaya.binus.ac.id",_bimay_api_url="http://apps.binusmaya.binus.ac.id",app=angular.module("BinusMaya",["ionic","listRoute","BinusMayaFactory"]).run(["$ionicPlatform","$rootScope","$ionicHistory","$ionicNavBarDelegate","BinusMaya",function(t,e,a,n,o){e.login="undefined"==typeof localStorage.islogin?!1:localStorage.islogin,e.leftMenu=!1,e.loginName="undefined"==typeof localStorage.fname?null:localStorage.fname.toLowerCase(),e.profileImage="undefined"==typeof localStorage.profileImage?!1:localStorage.profileImage,delete localStorage.cookie,delete localStorage.templogin,t.ready(function(){e.onLoadStyle={opacity:1},window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()}),e.getLastUpdate=function(){e.lastUpdate="undefined"==typeof localStorage.lastUpdate?"Whatever":localStorage.lastUpdate},e.getLastUpdate(),e.logout=function(){localStorage.clear(),window.location.hash="#/",a.clearHistory(),n.showBackButton(!1),location.reload()},e.getProfileImage=function(){o.getProfileImage(function(t){localStorage.profileImage=t,e.profileImage=t},function(){})},window.location.hash=e.login?"/schedule":"/"}]).config(["$ionicConfigProvider",function(t){t.views.forwardCache(!1),t.views.maxCache(0)}]);angular.module("BinusMayaFactory",[]).factory("BinusMaya",["$q","$ionicPopup",function(t,e){return{_bimay_url:"http://binusmaya.binus.ac.id",_bimay_api_url:"http://apps.binusmaya.binus.ac.id",headers:function(){var t=this;return{Cookie:localStorage.cookie?localStorage.cookie:null,Origin:t._bimay_url,Referer:t._bimay_url}},checkLogin:function(){var e=this,a=JSON.parse(localStorage.loginId);return t(function(t,n){return localStorage.templogin!==!0?e.api("/","get").then(function(t){200!==t.code&&n(t);var o={};return $($(t.result).serializeArray()).each(function(t,e){o[e.name]=e.value}),o.txtUserId=a.binusid,o.txtPassword=a.password,o.btnLogin="Log In ",e.api("/","post",o)},n).then(function(){localStorage.templogin=!0,t(!0)},n):(t(!0),void 0)})},api:function(e,a,n,o){var r=this;return void 0===localStorage.cookie?r._getCookie().then(function(){return r.api(e,a,n)}):t(function(t,i){"get"===a?httpclient.get(o?e:r._bimay_url+e,t,i,{headers:r.headers()}):httpclient.post(o?e:r._bimay_url+e,n,t,i,{headers:r.headers()})})},frame:function(e){var a=this,n="";return t(function(t,o){return a.api(e,"get").then(function(t){return a.api($(t.result).find("#ctl00_cp1_ifrApp").attr("src"),"get")},o).then(function(t){return n=$(t.result).find("#ifrApp").attr("src"),a.api(n,"get",{},!0)},o).then(function(e){t({url:n,result:e})},o)})},_getCookie:function(){var e=this;return t(function(t,a){httpclient.get(e._bimay_url,function(e){200==e.code?(localStorage.cookie=e.header["Set-Cookie"],t(!0)):a(e)},t)})},promptPassword:function(t,a){a.promptPass={};var n=e.show({template:'<p ng-show="promptPass.error">Incorrect Password</p><input type="password" class="promptPass-form" ng-model="promptPass.password">',title:"Enter Binusmaya Password",subTitle:"Please enter binusmaya password to access this page",scope:a,buttons:[{text:"Cancel",onTap:function(){window.location.hash="#/"+t,n.close()}},{text:"<b>Enter</b>",type:"button-positive",onTap:function(t){var e=JSON.parse(localStorage.loginId).password;return e==a.promptPass.password?(a.promptPass={},a.isAllow=!0,!0):(a.promptPass.error=!0,a.promptPass.password="",t.preventDefault(),void 0)}}]})},_requestError:function(){},grouping:function(t){if(t.length<=0)return[];var e=[],a="",n=-1,o=0;return t.forEach(function(t){a==t.date?(e[n].data[o]=t,o++):(o=1,n++,a=t.date,e[n]={date:t.date,data:[]},e[n].data[0]=t)}),e}}}]),angular.module("listRoute",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",views:{"main-view":{templateUrl:view_path+"login.html"}}}).state("schedule",{url:"/schedule",views:{"main-view":{templateUrl:view_path+"schedule.html",controller:"ScheduleController"}}}).state("about",{url:"/about",views:{"main-view":{templateUrl:view_path+"about.html"}}}).state("forum",{url:"/forum",views:{"main-view":{templateUrl:view_path+"forum.html",controller:"ForumController"}}}).state("services",{url:"/services",views:{"main-view":{templateUrl:view_path+"services/index.html",controller:"ServicesController"}}}).state("myclass",{url:"/myclass",views:{"main-view":{templateUrl:view_path+"myclass.html",controller:"MyClassController"}}}).state("myclassDetail",{url:"/myclass-detail/:code",resolve:{dataset:["$q","$stateParams","$location",function(t,e,a){var n=!1,o=t.defer(),r="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;for(var i in r)r[i].code==e.code&&(n=i);return n?o.resolve(n):a.path("/myclass").replace(),o.promise}]},views:{"main-view":{templateUrl:view_path+"myclassInside.html",controller:"MyClassDetailController"}}}).state("examSchedule",{url:"/exam-schedule",views:{"main-view":{templateUrl:view_path+"services/exam-schedule.html",controller:"ExamScheduleController"}}}).state("examScore",{url:"/exam-score",views:{"main-view":{templateUrl:view_path+"services/exam-score.html",controller:"ExamScoreController"}}}).state("financeStatus",{url:"/finance-status",views:{"main-view":{templateUrl:view_path+"services/billing.html",controller:"FinanceController"}}}).state("absence",{url:"/absence",views:{"main-view":{templateUrl:view_path+"services/absence.html",controller:"AbsenceController"}}}).state("coming",{url:"/coming",views:{"main-view":{templateUrl:view_path+"coming.html"}}}),e.otherwise("/coming")}]),app.controller("FinanceController",["$scope","BinusMaya","$ionicPopup","$q","$http",function(t,e,a,n,o){t.isAllow=!1,t.doRefresh=function(){r().then(function(e){t.$applyAsync(function(){t.financeList=e,t.$broadcast("scroll.refreshComplete")})},function(e){i(e),t.$broadcast("scroll.refreshComplete")})},t.toMoney=function(t){try{return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}catch(e){return 0}};var r=function(){return n(function(t,a){var n=function(t){var a=0;try{a=parseInt($(t).find("table:eq(0) tr td").html().match(/[0-9]+/)[0])}catch(n){}var o=[];$(t).find("table#rptTable tr").each(function(t){var e=$(this).find("td");t>0&&o.push({date:e.eq(1).html(),title:e.eq(2).html(),term:e.eq(3).html(),due:e.eq(4).html(),charge:1==isNaN(parseInt(e.eq(5).html()))?0:parseInt(e.eq(5).html()),payment:1==isNaN(parseInt(e.eq(6).html()))?0:parseInt(e.eq(6).html().match(/[0-9]+/)),refund:1==isNaN(parseInt(e.eq(7).html()))?0:parseInt(e.eq(7).html())})});var r={data:e.grouping(o),billing:a,lastUpdate:moment().format("D MMMM YYYY h:mm:ss")};return localStorage.finance=JSON.stringify(r),r};"undefined"==typeof httpclient?o.get("http://localhost:2505/finance.html").then(function(e){t(n(e.data))},a):e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(3) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(){return e.api($("#ctl00_cpContent_rptMainMenuStudent_ctl06_linkMenuStudent").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(){return e.api($("#ctl00_cpContent_rptSubMenu_ctl03_linkSubMenu").attr("href"),"get",{},!0)},function(){a("can't access to main frame")}).then(function(e){t(n(e.result))},function(){a("can't access to main frame")})})};t.financeList=!1,"undefined"!=typeof localStorage.finance&&(t.financeList=JSON.parse(localStorage.finance));var i=function(e){a.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")};e.promptPassword("services",t)}]),app.controller("LoginController",["$scope","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$rootScope","BinusMaya",function(t,e,a,n,o,r,i){r.noHeader=!0,o.showBar(!1),t.loading=!1,t.loginClass="",n.nextViewOptions({disableBack:!0}),t.submit=function(){if(t.binusid&&t.password){t.loginClass="on-loading",t.loading=!0,i.api("/","get").then(function(e){200!==e.code&&a(e);var n={};return $($(e.result).serializeArray()).each(function(t,e){n[e.name]=e.value}),n.txtUserId=t.binusid,n.txtPassword=t.password,n.btnLogin="Log In ",i.api("/","post",n)},a).then(function(e){var i=$(e.result).find("#content #topbar .right strong");200!==e.code&&a(e),i.length<=0?a(e,$(e.result).find("#lblError").text()):(t.loading=!1,t.loginClass="",localStorage.loginId=JSON.stringify({binusid:t.binusid,password:t.password}),localStorage.islogin=!0,localStorage.fname=i.text(),r.login=!0,r.loginName=localStorage.fname.toLowerCase(),t.loginClass="",t.loading=!1,window.location.hash="#/schedule",n.clearHistory(),o.showBackButton(!1))},a);var a=function(a,n){t.loading=!1,t.loginClass="",e.alert({title:"Oops !",template:n?n:"Something wrong !"})}}else e.alert({title:"Oops !",template:"Please Input Binusian ID and Password"})}}]),app.controller("MyClassController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup",function(t,e,a,n,o,r,i,l,s,c,u){l.noHeader=!1,l.leftMenu=!0,s.onHardwareBackButton(function(t){t.preventDefault()}),t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1;var p=function(){return c(function(t,a){e.checkLogin().then(function(){return e.api("/","get")},function(){a("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){a("can't access to main frame")}).then(function(e){var a=[];$(e.result.result).find("#ctl00_ContentPlaceHolder1_pnlTeori ul li").each(function(t,e){var n=$(e).find("a").html(),o=n.match(/^(.*)-(.*) \((.*)\)/i);a.push({indexItem:t,name:o[2],url:$(e).find("a").attr("href"),code:o[1],className:o[3]})}),localStorage.myClass=JSON.stringify(a),t(a)},function(){a("can't access to my class")})})};t.doRefresh=function(){p().then(function(a){a.length>0?t.classData=a:e("You don't have any class"),t.$broadcast("scroll.refreshComplete")},e);var e=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("MyClassDetailController",["$scope","BinusMaya","$ionicNavBarDelegate","$state","$location","$stateParams","$timeout","$rootScope","$ionicPlatform","$q","$ionicPopup","dataset",function(t,e,a,n,o,r,i,l,s,c,u,p){t.classData="undefined"!=typeof localStorage.myClass?JSON.parse(localStorage.myClass):!1,t.state={isData:!1,loading:!0},t.data=t.classData[p],t.isPageTopic=!1;var f=function(t){return c(function(a,n){e.checkLogin().then(function(){return e.api("/","get")},function(){n("can't re-auth your account")}).then(function(t){return e.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){n("can't access to main frame")}).then(function(){return e.api(_bimay_api_url+"/LMS/"+t,"get",{},!0)},function(){n("can't access to my class")}).then(function(t){var e=t.result,n=$(e).find("#desc_course_desc > span").html(),o=$(e).find("#desc_grad_compete > span").html(),r=[];$(e).find("#ctl00_ContentPlaceHolder1_pnlContentTheory table tbody tr").each(function(t,e){0!==t&&r.push({session:parseInt($(e).find("td:eq(0) > span").html()),mode:$(e).find("td:eq(1) > span").html(),topics:$(e).find("td:eq(2) > a").html(),date:$(e).find("td:eq(3) > span").html(),links:$(e).find("td:eq(4) > input").attr("name")})});var i={main_description:n,grad_description:o,course:r};a(i)},function(){n("can't access to course page")})})};"undefined"==typeof t.classData[p].detail?f(t.classData[p].url).then(function(e){t.classData[p].detail=e,localStorage.myClass=JSON.stringify(t.classData),t.$applyAsync(function(){t.state.loading=!1,t.state.isData=t.classData[p].detail}),t.$broadcast("scroll.refreshComplete")},d):(t.state.loading=!1,t.state.isData=t.classData[p].detail),t.isPageTopic===!1?(t.infoTab="active",t.topicsTab=""):(t.infoTab="",t.topicsTab="active"),t.switchTab=function(e){0===e&&(t.isPageTopic=!1,t.infoTab="active",t.topicsTab=""),1===e&&(t.isPageTopic=!0,t.infoTab="",t.topicsTab="active")};var d=function(e){u.alert({title:"Oops !",template:e}),t.$broadcast("scroll.refreshComplete")}}]),app.controller("ScheduleController",["$scope","$ionicPopup","$timeout","$ionicHistory","$rootScope","$ionicPlatform","BinusMaya","$q","$http",function(t,e,a,n,o,r,i,l,s){if(o.noHeader=!1,o.leftMenu=!0,r.onHardwareBackButton(function(t){t.preventDefault()}),t.getState=function(t){var e=moment();return moment(t).isSame(e,"day")?"today":moment(t).isSame(e.add(1,"d"),"day")?"tomorrow":moment(t)<e?"completo":void 0},t.getCourseState=function(t,e){var a=moment(),n=null;try{var o=e.split("-")[1].split(":"),r=parseInt(o[0]),i=parseInt(o[1]);n=moment(t).hour(r).minute(i)}catch(l){n=moment(t)}return a>n?"completo":void 0},t.isSchedule=!1,t.schedule=[],localStorage.jadwal)try{JSON.parse(localStorage.jadwal).length>0&&(t.isSchedule=!0,t.schedule=JSON.parse(localStorage.jadwal))}catch(c){}var u=function(t){var e=[];return $(t).find("tr").each(function(t){var a=$(this).find("td");if(t>0){var n=a.eq(3).html().match(/(.*)-(.*)/);e.push({date:a.eq(0).html(),time:a.eq(1).html(),state:a.eq(2).html(),course:n[2],code:n[1],myClass:a.eq(5).html(),room:a.eq(6).html(),building:a.eq(7).html()})}}),e},p=function(){return l(function(t,e){var a=function(t){var e=$(t).find("table"),a=u(e.eq(0).html()),n=u(e.eq(1).html()),o=a.concat(n);return localStorage.jadwal=JSON.stringify(i.grouping(o)),localStorage.lastUpdate=moment().format("D MMMM YYYY h:mm:ss"),{jadwal:JSON.parse(localStorage.jadwal),lastUpdate:localStorage.lastUpdate}};"undefined"==typeof httpclient?s.get("http://localhost:2505/schedule.html").then(function(e){t(a(e.data))},e):i.checkLogin().then(function(){return i.api("/","get")},function(){e("can't re-auth your account")}).then(function(t){return i.frame($(t.result).find(".itemContent ul li:eq(0) > a").attr("href"))},function(){e("can't access to main frame")}).then(function(t){var e={},a=t.result;return $($(a.result).serializeArray()).each(function(t,a){e[a.name]=a.value}),e.__EVENTTARGET="ctl00$ContentPlaceHolder1$btnSchedule",i.api(_bimay_api_url+"/LMS/MyClass.aspx","post",e,!0)},function(){e("can't access frame")}).then(function(e){t(a(e.result))},function(){e("can't access schedule page")})})};t.doRefresh=function(){p().then(function(e){t.$broadcast("scroll.refreshComplete"),o.getLastUpdate(),e.jadwal.length>0?(t.isSchedule=!0,t.schedule=e.jadwal):a("No Schedule found")},a);var a=function(a){e.alert({title:"Oops !",template:a}),t.$broadcast("scroll.refreshComplete")}}}]),app.controller("ServicesController",["$scope","BinusMaya","$ionicNavBarDelegate",function(){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJpbnVzbWF5YS5qcyIsInJvdXRlLmpzIiwiY29udHJvbGxlcnMvZmluYW5jZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW4uY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL215Y2xhc3MuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL215Y2xhc3NJbnNpZGUuY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NjaGVkdWxlLmNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zZXJ2aWNlcy5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVVBLEdBQUEsV0FBQSxTQUNBLE9BQUEsVUFDQSxXQUFBLCtCQUNBLGVBQUEsb0NBRUEsSUFBQSxRQUFBLE9BQUEsYUFBQSxRQUFBLFlBQUEscUJBRUEsS0FBQSxpQkFBQSxhQUFBLGdCQUFBLHVCQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLG1CQUFBLGNBQUEsU0FBQSxFQUFBLGFBQUEsUUFDQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxNQUFBLEtBQUEsYUFBQSxNQUFBLGNBQ0EsRUFBQSxhQUFBLG1CQUFBLGNBQUEsY0FBQSxFQUFBLGFBQUEsbUJBQ0EsY0FBQSxhQUNBLGNBQUEsVUFFQSxFQUFBLE1BQUEsV0FDQSxFQUFBLGFBQ0EsUUFBQSxHQUlBLE9BQUEsU0FBQSxPQUFBLFFBQUEsUUFBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLDBCQUFBLEdBRUEsT0FBQSxXQUNBLFVBQUEsaUJBSUEsRUFBQSxjQUFBLFdBQ0EsRUFBQSxXQUFBLG1CQUFBLGNBQUEsV0FBQSxXQUFBLGFBQUEsWUFFQSxFQUFBLGdCQUNBLEVBQUEsT0FBQSxXQUNBLGFBQUEsUUFDQSxPQUFBLFNBQUEsS0FBQSxLQUNBLEVBQUEsZUFDQSxFQUFBLGdCQUFBLEdBQ0EsU0FBQSxVQUdBLEVBQUEsZ0JBQUEsV0FFQSxFQUFBLGdCQUNBLFNBQUEsR0FDQSxhQUFBLGFBQUEsRUFDQSxFQUFBLGFBQUEsR0FFQSxlQU1BLE9BQUEsU0FBQSxLQURBLEVBQUEsTUFDQSxZQUVBLE9BSUEsUUFBQSx1QkFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLGNBQUEsR0FDQSxFQUFBLE1BQUEsU0FBQSxLQ3pFQSxTQUFBLE9BQUEsdUJBRUEsUUFBQSxhQUFBLEtBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxPQUVBLFdBQUEsK0JBQ0EsZUFBQSxvQ0FFQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsUUFDQSxPQUFBLGFBQUEsT0FBQSxhQUFBLE9BQUEsS0FDQSxPQUFBLEVBQUEsV0FDQSxRQUFBLEVBQUEsYUFHQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLE1BQUEsYUFBQSxRQUNBLE9BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLGNBQUEsYUFBQSxFQUdBLEVBQUEsSUFBQSxJQUFBLE9BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQUEsRUFBQSxFQUNBLElBQUEsS0FPQSxPQU5BLEdBQUEsRUFBQSxFQUFBLFFBQUEsa0JBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFFBRUEsRUFBQSxVQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxJQUFBLE9BQUEsSUFDQSxHQUNBLEtBQUEsV0FDQSxhQUFBLFdBQUEsRUFDQSxHQUFBLElBQ0EsSUFqQkEsR0FBQSxHQUFBLFdBcUJBLElBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxJQUVBLE9BQUEsVUFBQSxhQUFBLE9BQ0EsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxFQUFBLEVBQUEsS0FHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLFFBQUEsRUFDQSxXQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxFQUFBLEVBQUEsR0FDQSxRQUFBLEVBQUEsWUFHQSxXQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLFFBQUEsRUFBQSxlQU9BLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFDQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxPQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEscUJBQUEsS0FBQSxPQUFBLFFBQ0EsR0FDQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxXQUFBLEtBQUEsT0FDQSxFQUFBLElBQUEsRUFBQSxVQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxHQUNBLElBQUEsRUFDQSxPQUFBLEtBRUEsTUFJQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsT0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLFdBQUEsSUFBQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxNQUNBLGFBQUEsT0FBQSxFQUFBLE9BQUEsY0FDQSxHQUFBLElBRUEsRUFBQSxJQUVBLE1BR0EsZUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLEVBQUEsTUFDQSxTQUFBLHFJQUNBLE1BQUEsMkJBQ0EsU0FBQSxzREFDQSxNQUFBLEVBQ0EsVUFDQSxLQUFBLFNBQ0EsTUFBQSxXQUNBLE9BQUEsU0FBQSxLQUFBLEtBQUEsRUFDQSxFQUFBLFdBR0EsS0FBQSxlQUNBLEtBQUEsa0JBQ0EsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsTUFBQSxhQUFBLFNBQUEsUUFDQSxPQUFBLElBQUEsRUFBQSxXQUFBLFVBQ0EsRUFBQSxjQUNBLEVBQUEsU0FBQSxHQUNBLElBRUEsRUFBQSxXQUFBLE9BQUEsRUFDQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsaUJBRkEsY0FRQSxjQUFBLGFBR0EsU0FBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFFBQUEsRUFDQSxRQUVBLElBQUEsTUFDQSxFQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsQ0FnQkEsT0FmQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxNQUNBLEVBQUEsR0FBQSxLQUFBLEdBQUEsRUFDQSxNQUVBLEVBQUEsRUFDQSxJQUNBLEVBQUEsRUFBQSxLQUNBLEVBQUEsSUFDQSxLQUFBLEVBQUEsS0FDQSxTQUVBLEVBQUEsR0FBQSxLQUFBLEdBQUEsS0FHQSxPQzVKQSxRQUFBLE9BQUEsZ0JBRUEsUUFBQSxpQkFBQSxxQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUNBLE1BQUEsU0FDQSxJQUFBLElBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxpQkFJQSxNQUFBLFlBQ0EsSUFBQSxZQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsZ0JBQ0EsV0FBQSx5QkFJQSxNQUFBLFNBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsaUJBSUEsTUFBQSxTQUNBLElBQUEsU0FDQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLGFBQ0EsV0FBQSxzQkFJQSxNQUFBLFlBQ0EsSUFBQSxZQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsc0JBQ0EsV0FBQSx5QkFJQSxNQUFBLFdBQ0EsSUFBQSxXQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsZUFDQSxXQUFBLHdCQUlBLE1BQUEsaUJBQ0EsSUFBQSx3QkFDQSxTQUNBLFNBQUEsS0FBQSxlQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLG1CQUFBLGNBQUEsUUFBQSxLQUFBLE1BQUEsYUFBQSxVQUFBLENBQ0EsS0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxFQVFBLE9BTEEsR0FDQSxFQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsWUFBQSxVQUVBLEVBQUEsV0FHQSxPQUNBLGFBQ0EsWUFBQSxVQUFBLHFCQUNBLFdBQUEsOEJBSUEsTUFBQSxnQkFDQSxJQUFBLGlCQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsOEJBQ0EsV0FBQSw2QkFJQSxNQUFBLGFBQ0EsSUFBQSxjQUNBLE9BQ0EsYUFDQSxZQUFBLFVBQUEsMkJBQ0EsV0FBQSwwQkFJQSxNQUFBLGlCQUNBLElBQUEsa0JBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSx3QkFDQSxXQUFBLHdCQUlBLE1BQUEsV0FDQSxJQUFBLFdBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSx3QkFDQSxXQUFBLHdCQUlBLE1BQUEsVUFDQSxJQUFBLFVBQ0EsT0FDQSxhQUNBLFlBQUEsVUFBQSxrQkFLQSxFQUFBLFVBQUEsY0M1SEEsSUFBQSxXQUFBLHFCQUNBLFNBQUEsWUFBQSxjQUFBLEtBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFNBQUEsRUFFQSxFQUFBLFVBQUEsV0FDQSxJQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxXQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsV0FBQSw2QkFFQSxTQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsV0FBQSw2QkFHQSxFQUFBLFFBQUEsU0FBQSxHQUNBLElBQ0EsTUFBQSxHQUFBLFFBQUEsR0FBQSxRQUFBLHNCQUFBLE9BQ0EsTUFBQSxHQUNBLE1BQUEsSUFJQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxLQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsS0FBQSxxQkFBQSxPQUFBLE1BQUEsVUFBQSxJQUNBLE1BQUEsSUFDQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEtBQUEscUJBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLEtBQ0EsR0FBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsTUFBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxJQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsT0FBQSxHQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxRQUNBLFFBQUEsR0FBQSxNQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsT0FBQSxNQUFBLFdBQ0EsT0FBQSxHQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxXQUlBLElBQUEsSUFDQSxLQUFBLEVBQUEsU0FBQSxHQUNBLFFBQUEsRUFDQSxXQUFBLFNBQUEsT0FBQSx1QkFHQSxPQURBLGNBQUEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUdBLG9CQUFBLFlBQ0EsRUFBQSxJQUFBLHNDQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLDZEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFDQSxFQUFBLGlEQUFBLEtBQUEsUUFBQSxVQUFBLElBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLFVBQ0EsV0FDQSxFQUFBLGtDQU1BLEdBQUEsYUFBQSxFQUNBLG1CQUFBLGNBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxNQUFBLGFBQUEsU0FHQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSwwQkFHQSxHQUFBLGVBQUEsV0FBQSxNQ3RIQSxJQUFBLFdBQUEsbUJBQ0EsU0FBQSxjQUFBLFdBQUEsZ0JBQUEsdUJBQUEsYUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFVBQUEsRUFDQSxFQUFBLFNBQUEsR0FFQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFdBQUEsR0FFQSxFQUFBLGlCQUNBLGFBQUEsSUFHQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLFNBS0EsQ0FDQSxFQUFBLFdBQUEsYUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLElBQUEsSUFBQSxPQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUFBLEVBQUEsRUFDQSxJQUFBLEtBT0EsT0FOQSxHQUFBLEVBQUEsRUFBQSxRQUFBLGtCQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxRQUVBLEVBQUEsVUFBQSxFQUFBLFFBQ0EsRUFBQSxZQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsVUFDQSxFQUFBLElBQUEsSUFBQSxPQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsS0FBQSxpQ0FFQSxPQUFBLEVBQUEsTUFDQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLEtBQUEsYUFBQSxTQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQU1BLGFBQUEsUUFBQSxLQUFBLFdBQ0EsUUFBQSxFQUFBLFFBQ0EsU0FBQSxFQUFBLFdBR0EsYUFBQSxTQUFBLEVBQ0EsYUFBQSxNQUFBLEVBQUEsT0FDQSxFQUFBLE9BQUEsRUFDQSxFQUFBLFVBQUEsYUFBQSxNQUFBLGNBQ0EsRUFBQSxXQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQ0EsT0FBQSxTQUFBLEtBQUEsYUFDQSxFQUFBLGVBQ0EsRUFBQSxnQkFBQSxLQUdBLEVBRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsU0FBQSxFQUNBLEVBQUEsV0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxFQUFBLEVBQUEsMkJBMURBLEdBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSw4Q0NiQSxJQUFBLFdBQUEscUJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsWUFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxxQkFBQSxTQUFBLEdBQ0EsRUFBQSxtQkFHQSxFQUFBLFVBQUEsbUJBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBLFVBQUEsQ0FFQSxJQUFBLEdBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxFQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEtBR0EsR0FBQSxFQUFBLE9BQUEsUUFBQSxLQUFBLDZDQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSx1QkFDQSxHQUFBLE1BQ0EsVUFBQSxFQUNBLEtBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxLQUFBLFFBQ0EsS0FBQSxFQUFBLEdBQ0EsVUFBQSxFQUFBLE9BR0EsYUFBQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsSUFDQSxXQUNBLEVBQUEsZ0NBS0EsR0FBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsRUFDQSxFQUFBLFVBQUEsRUFFQSxFQUFBLDRCQUVBLEVBQUEsV0FBQSwyQkFDQSxFQUVBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLCtCQ2xFQSxJQUFBLFdBQUEsMkJBQ0EsU0FBQSxZQUFBLHVCQUFBLFNBQUEsWUFBQSxlQUFBLFdBQUEsYUFBQSxpQkFBQSxLQUFBLGNBQUEsVUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxtQkFBQSxjQUFBLFFBQUEsS0FBQSxNQUFBLGFBQUEsVUFBQSxFQUNBLEVBQUEsT0FDQSxRQUFBLEVBQ0EsU0FBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLFVBQUEsR0FDQSxFQUFBLGFBQUEsQ0FFQSxJQUFBLEdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGFBQ0EsS0FBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLElBQUEsUUFDQSxXQUVBLEVBQUEsZ0NBR0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxnQ0FBQSxLQUFBLFVBRUEsV0FDQSxFQUFBLGdDQUVBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxlQUFBLFFBQUEsRUFBQSxVQUFBLElBQ0EsV0FDQSxFQUFBLDhCQUVBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEdBQUEsS0FBQSw0QkFBQSxPQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsNkJBQUEsT0FDQSxJQUVBLEdBQUEsR0FBQSxLQUFBLDhEQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUNBLEVBQUEsTUFDQSxRQUFBLFNBQUEsRUFBQSxHQUFBLEtBQUEsbUJBQUEsUUFDQSxLQUFBLEVBQUEsR0FBQSxLQUFBLG1CQUFBLE9BQ0EsT0FBQSxFQUFBLEdBQUEsS0FBQSxnQkFBQSxPQUNBLEtBQUEsRUFBQSxHQUFBLEtBQUEsbUJBQUEsT0FDQSxNQUFBLEVBQUEsR0FBQSxLQUFBLG9CQUFBLEtBQUEsV0FLQSxJQUFBLElBQ0EsaUJBQUEsRUFDQSxpQkFBQSxFQUNBLE9BQUEsRUFFQSxHQUFBLElBQ0EsV0FDQSxFQUFBLG1DQUtBLG9CQUFBLEdBQUEsVUFBQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLFVBQUEsR0FBQSxLQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsVUFBQSxHQUFBLE9BQUEsRUFDQSxhQUFBLFFBQUEsS0FBQSxVQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsV0FDQSxFQUFBLE1BQUEsU0FBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsVUFBQSxHQUFBLFNBRUEsRUFBQSxXQUFBLDJCQUNBLElBRUEsRUFBQSxNQUFBLFNBQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsR0FBQSxRQUdBLEVBQUEsZUFBQSxHQUNBLEVBQUEsUUFBQSxTQUNBLEVBQUEsVUFBQSxLQUVBLEVBQUEsUUFBQSxHQUNBLEVBQUEsVUFBQSxVQUdBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsSUFBQSxJQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsUUFBQSxTQUNBLEVBQUEsVUFBQSxJQUVBLElBQUEsSUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFVBQUEsVUFJQSxJQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsT0FDQSxNQUFBLFNBQ0EsU0FBQSxJQUVBLEVBQUEsV0FBQSw4QkMxR0EsSUFBQSxXQUFBLHNCQUNBLFNBQUEsY0FBQSxXQUFBLGdCQUFBLGFBQUEsaUJBQUEsWUFBQSxLQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0E2Q0EsR0EzQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxxQkFBQSxTQUFBLEdBQ0EsRUFBQSxtQkFHQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUVBLE9BQUEsUUFBQSxHQUFBLE9BQUEsRUFBQSxPQUNBLFFBR0EsT0FBQSxHQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxPQUNBLFdBR0EsT0FBQSxHQUFBLEVBQ0EsV0FEQSxRQUtBLEVBQUEsZUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FDQSxFQUFBLElBQ0EsS0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLEtBQ0EsRUFBQSxTQUFBLEVBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEdBQUEsT0FBQSxHQUFBLEtBQUEsR0FBQSxPQUFBLEdBQ0EsTUFBQSxHQUNBLEVBQUEsT0FBQSxHQUdBLE1BQUEsR0FBQSxFQUNBLFdBREEsUUFLQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFlBRUEsYUFBQSxPQUNBLElBQ0EsS0FBQSxNQUFBLGFBQUEsUUFBQSxPQUFBLElBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxhQUFBLFNBRUEsTUFBQSxJQUtBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxLQWlCQSxPQWhCQSxHQUFBLEdBQUEsS0FBQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxLQUNBLElBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLE9BQUEsTUFBQSxZQUNBLEdBQUEsTUFDQSxLQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLE1BQUEsRUFBQSxHQUFBLEdBQUEsT0FDQSxPQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsR0FDQSxRQUFBLEVBQUEsR0FBQSxHQUFBLE9BQ0EsS0FBQSxFQUFBLEdBQUEsR0FBQSxPQUNBLFNBQUEsRUFBQSxHQUFBLEdBQUEsWUFJQSxHQUdBLEVBQUEsV0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsUUFDQSxFQUFBLEVBQUEsT0FBQSxFQUdBLE9BRkEsY0FBQSxPQUFBLEtBQUEsVUFBQSxFQUFBLFNBQUEsSUFDQSxhQUFBLFdBQUEsU0FBQSxPQUFBLHdCQUNBLE9BQUEsS0FBQSxNQUFBLGFBQUEsUUFBQSxXQUFBLGFBQUEsWUFHQSxvQkFBQSxZQUNBLEVBQUEsSUFBQSx1Q0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxhQUNBLEtBQUEsV0FDQSxNQUFBLEdBQUEsSUFBQSxJQUFBLFFBQ0EsV0FFQSxFQUFBLGdDQUdBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsZ0NBQUEsS0FBQSxVQUVBLFdBQ0EsRUFBQSxnQ0FFQSxLQUFBLFNBQUEsR0FDQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLE1BS0EsT0FKQSxHQUFBLEVBQUEsRUFBQSxRQUFBLGtCQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxRQUVBLEVBQUEsY0FBQSx3Q0FDQSxFQUFBLElBQUEsZUFBQSxvQkFBQSxPQUFBLEdBQUEsSUFDQSxXQUNBLEVBQUEsd0JBRUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsVUFDQSxXQUNBLEVBQUEsa0NBTUEsR0FBQSxVQUFBLFdBQ0EsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsMEJBQ0EsRUFBQSxnQkFDQSxFQUFBLE9BQUEsT0FBQSxHQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLFFBRUEsRUFBQSxzQkFFQSxFQUVBLElBQUEsR0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUNBLE1BQUEsU0FDQSxTQUFBLElBRUEsRUFBQSxXQUFBLCtCQ3JKQSxJQUFBLFdBQUEsc0JBQUEsU0FBQSxZQUFBLHVCQUNBIiwiZmlsZSI6Ind3dy9qcy9jb21waWxlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQklOVVNNQVlBIE1PRFVMRVxuICogQGF1dGhvciBQZWRveCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5cblxuLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdzdGFydGVyJyBpcyB0aGUgbmFtZSBvZiB0aGlzIGFuZ3VsYXIgbW9kdWxlIGV4YW1wbGUgKGFsc28gc2V0IGluIGEgPGJvZHk+IGF0dHJpYnV0ZSBpbiBpbmRleC5odG1sKVxuLy8gdGhlIDJuZCBwYXJhbWV0ZXIgaXMgYW4gYXJyYXkgb2YgJ3JlcXVpcmVzJ1xuXG52YXIgdmlld19wYXRoID0gJ3ZpZXdzLycsXG4gIHBjb2xvciA9ICcjMUM1MzZGJyxcbiAgX2JpbWF5X3VybCA9ICdodHRwOi8vYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcbiAgX2JpbWF5X2FwaV91cmwgPSAnaHR0cDovL2FwcHMuYmludXNtYXlhLmJpbnVzLmFjLmlkJztcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdCaW51c01heWEnLCBbJ2lvbmljJywgJ2xpc3RSb3V0ZScsICdCaW51c01heWFGYWN0b3J5J10pXG5cbi5ydW4oZnVuY3Rpb24oJGlvbmljUGxhdGZvcm0sICRyb290U2NvcGUsICRpb25pY0hpc3RvcnksICRpb25pY05hdkJhckRlbGVnYXRlLCBCaW51c01heWEpIHtcblxuICAkcm9vdFNjb3BlLmxvZ2luID0gKHR5cGVvZiBsb2NhbFN0b3JhZ2UuaXNsb2dpbiA9PSBcInVuZGVmaW5lZFwiID8gZmFsc2UgOiBsb2NhbFN0b3JhZ2UuaXNsb2dpbik7XG4gICRyb290U2NvcGUubGVmdE1lbnUgPSBmYWxzZTtcbiAgJHJvb3RTY29wZS5sb2dpbk5hbWUgPSB0eXBlb2YgbG9jYWxTdG9yYWdlLmZuYW1lID09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogbG9jYWxTdG9yYWdlLmZuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICRyb290U2NvcGUucHJvZmlsZUltYWdlID0gdHlwZW9mIGxvY2FsU3RvcmFnZS5wcm9maWxlSW1hZ2UgPT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogbG9jYWxTdG9yYWdlLnByb2ZpbGVJbWFnZTtcbiAgZGVsZXRlIGxvY2FsU3RvcmFnZS5jb29raWU7XG4gIGRlbGV0ZSBsb2NhbFN0b3JhZ2UudGVtcGxvZ2luO1xuXG4gICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICRyb290U2NvcGUub25Mb2FkU3R5bGUgPSB7XG4gICAgICBvcGFjaXR5OiAxXG4gICAgfTtcbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5wbHVnaW5zLktleWJvYXJkKSB7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKHRydWUpO1xuICAgIH1cbiAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgU3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgJHJvb3RTY29wZS5sYXN0VXBkYXRlID0gdHlwZW9mIGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlID09PSBcInVuZGVmaW5lZFwiID8gXCJXaGF0ZXZlclwiIDogbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGU7XG4gIH07XG4gICRyb290U2NvcGUuZ2V0TGFzdFVwZGF0ZSgpO1xuICAkcm9vdFNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMvJztcbiAgICAkaW9uaWNIaXN0b3J5LmNsZWFySGlzdG9yeSgpO1xuICAgICRpb25pY05hdkJhckRlbGVnYXRlLnNob3dCYWNrQnV0dG9uKGZhbHNlKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfTtcblxuICAkcm9vdFNjb3BlLmdldFByb2ZpbGVJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8qKiBwZWZvcm0gYXZhdGFyICoqL1xuICAgIEJpbnVzTWF5YS5nZXRQcm9maWxlSW1hZ2UoXG4gICAgICBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5wcm9maWxlSW1hZ2UgPSBkb25lO1xuICAgICAgICAkcm9vdFNjb3BlLnByb2ZpbGVJbWFnZSA9IGRvbmU7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oKSB7XG5cbiAgICAgIH0pO1xuICB9O1xuXG4gIGlmICgkcm9vdFNjb3BlLmxvZ2luKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnL3NjaGVkdWxlJztcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcvJztcbiAgfVxufSlcblxuLmNvbmZpZyhmdW5jdGlvbigkaW9uaWNDb25maWdQcm92aWRlcikge1xuICAkaW9uaWNDb25maWdQcm92aWRlci52aWV3cy5mb3J3YXJkQ2FjaGUoZmFsc2UpO1xuICAkaW9uaWNDb25maWdQcm92aWRlci52aWV3cy5tYXhDYWNoZSgwKTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0JpbnVzTWF5YUZhY3RvcnknLCBbXSlcblxuLmZhY3RvcnkoJ0JpbnVzTWF5YScsIGZ1bmN0aW9uKCRxLCAkaW9uaWNQb3B1cCkge1xuICByZXR1cm4ge1xuXG4gICAgX2JpbWF5X3VybDogJ2h0dHA6Ly9iaW51c21heWEuYmludXMuYWMuaWQnLFxuICAgIF9iaW1heV9hcGlfdXJsOiAnaHR0cDovL2FwcHMuYmludXNtYXlhLmJpbnVzLmFjLmlkJyxcblxuICAgIGhlYWRlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF90ID0gdGhpcztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIENvb2tpZTogbG9jYWxTdG9yYWdlLmNvb2tpZSA/IGxvY2FsU3RvcmFnZS5jb29raWUgOiBudWxsLFxuICAgICAgICBPcmlnaW46IF90Ll9iaW1heV91cmwsXG4gICAgICAgIFJlZmVyZXI6IF90Ll9iaW1heV91cmxcbiAgICAgIH07XG4gICAgfSxcbiAgICBjaGVja0xvZ2luOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICB2YXIgbG9naW4gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5sb2dpbklkKTtcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS50ZW1wbG9naW4gPT09IHRydWUpIHtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBfdC5hcGkoJy8nLCAnZ2V0JylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgaWYgKGQuY29kZSAhPT0gMjAwKSByZWplY3QoZCk7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtkLm5hbWVdID0gZC52YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEudHh0VXNlcklkID0gbG9naW4uYmludXNpZDtcbiAgICAgICAgICAgICAgZGF0YS50eHRQYXNzd29yZCA9IGxvZ2luLnBhc3N3b3JkO1xuICAgICAgICAgICAgICBkYXRhLmJ0bkxvZ2luID0gXCJMb2cgSW4gXCI7XG4gICAgICAgICAgICAgIHJldHVybiBfdC5hcGkoJy8nLCAncG9zdCcsIGRhdGEpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudGVtcGxvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXBpOiBmdW5jdGlvbihlbmRwb2ludCwgbWV0aG9kLCBwYXJhbXMsIG5vRW5kcG9pbnQpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICB0eXBlb2Ygbm9FbmRwb2ludCAhPT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuY29va2llID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIF90Ll9nZXRDb29raWUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90LmFwaShlbmRwb2ludCwgbWV0aG9kLCBwYXJhbXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiZ2V0XCIpIHtcbiAgICAgICAgICAgIGh0dHBjbGllbnQuZ2V0KChub0VuZHBvaW50ID8gZW5kcG9pbnQgOiBfdC5fYmltYXlfdXJsICsgZW5kcG9pbnQpLCByZXNvbHZlLCByZWplY3QsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogX3QuaGVhZGVycygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHR0cGNsaWVudC5wb3N0KChub0VuZHBvaW50ID8gZW5kcG9pbnQgOiBfdC5fYmltYXlfdXJsICsgZW5kcG9pbnQpLCBwYXJhbXMsIHJlc29sdmUsIHJlamVjdCwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiBfdC5oZWFkZXJzKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGZyYW1lOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgIHZhciBfdCA9IHRoaXMsXG4gICAgICAgIF91cmwgPSAnJztcbiAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIF90LmFwaSh1cmwsICdnZXQnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdC5hcGkoJChkLnJlc3VsdCkuZmluZChcIiNjdGwwMF9jcDFfaWZyQXBwXCIpLmF0dHIoXCJzcmNcIiksICdnZXQnKTtcbiAgICAgICAgICB9LCByZWplY3QpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgX3VybCA9ICQoZC5yZXN1bHQpLmZpbmQoXCIjaWZyQXBwXCIpLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgICByZXR1cm4gX3QuYXBpKF91cmwsICdnZXQnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgfSwgcmVqZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICB1cmw6IF91cmwsXG4gICAgICAgICAgICAgIHJlc3VsdDogZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBfZ2V0Q29va2llOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGh0dHBjbGllbnQuZ2V0KF90Ll9iaW1heV91cmwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDIwMCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNvb2tpZSA9IGRhdGEuaGVhZGVyWydTZXQtQ29va2llJ107XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcHJvbXB0UGFzc3dvcmQ6IGZ1bmN0aW9uKGxvY2F0aW9uLCBzY29wZSkge1xuICAgICAgc2NvcGUucHJvbXB0UGFzcyA9IHt9O1xuICAgICAgdmFyIG15UG9wdXAgPSAkaW9uaWNQb3B1cC5zaG93KHtcbiAgICAgICAgdGVtcGxhdGU6ICc8cCBuZy1zaG93PVwicHJvbXB0UGFzcy5lcnJvclwiPkluY29ycmVjdCBQYXNzd29yZDwvcD48aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJwcm9tcHRQYXNzLWZvcm1cIiBuZy1tb2RlbD1cInByb21wdFBhc3MucGFzc3dvcmRcIj4nLFxuICAgICAgICB0aXRsZTogJ0VudGVyIEJpbnVzbWF5YSBQYXNzd29yZCcsXG4gICAgICAgIHN1YlRpdGxlOiAnUGxlYXNlIGVudGVyIGJpbnVzbWF5YSBwYXNzd29yZCB0byBhY2Nlc3MgdGhpcyBwYWdlJyxcbiAgICAgICAgc2NvcGU6IHNjb3BlLFxuICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgIHRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjLycgKyBsb2NhdGlvbjtcbiAgICAgICAgICAgIG15UG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICB0ZXh0OiAnPGI+RW50ZXI8L2I+JyxcbiAgICAgICAgICB0eXBlOiAnYnV0dG9uLXBvc2l0aXZlJyxcbiAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIG15cGFzcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxvZ2luSWQpLnBhc3N3b3JkO1xuICAgICAgICAgICAgaWYgKG15cGFzcyA9PSBzY29wZS5wcm9tcHRQYXNzLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgIHNjb3BlLnByb21wdFBhc3MgPSB7fTtcbiAgICAgICAgICAgICAgc2NvcGUuaXNBbGxvdyA9IHRydWU7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUucHJvbXB0UGFzcy5lcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgIHNjb3BlLnByb21wdFBhc3MucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBfcmVxdWVzdEVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICB9LFxuICAgIGdyb3VwaW5nOiBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgaWYgKF9kYXRhLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBtID0gW10sXG4gICAgICAgIHAgPSAnJyxcbiAgICAgICAgYyA9IC0xLFxuICAgICAgICBjaCA9IDA7XG4gICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgaWYgKHAgPT0gZC5kYXRlKSB7XG4gICAgICAgICAgbVtjXS5kYXRhW2NoXSA9IGQ7XG4gICAgICAgICAgY2grKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaCA9IDE7XG4gICAgICAgICAgYysrO1xuICAgICAgICAgIHAgPSBkLmRhdGU7XG4gICAgICAgICAgbVtjXSA9IHtcbiAgICAgICAgICAgIGRhdGU6IGQuZGF0ZSxcbiAgICAgICAgICAgIGRhdGE6IFtdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBtW2NdLmRhdGFbMF0gPSBkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtO1xuICAgIH1cbiAgfTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdsaXN0Um91dGUnLCBbXSlcblxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ2luZGV4Jywge1xuICAgICAgdXJsOiAnLycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnbG9naW4uaHRtbCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdzY2hlZHVsZScsIHtcbiAgICAgIHVybDogJy9zY2hlZHVsZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2NoZWR1bGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1NjaGVkdWxlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhYm91dCcsIHtcbiAgICAgIHVybDogJy9hYm91dCcsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnYWJvdXQuaHRtbCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdmb3J1bScsIHtcbiAgICAgIHVybDogJy9mb3J1bScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnZm9ydW0uaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0ZvcnVtQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdzZXJ2aWNlcycsIHtcbiAgICAgIHVybDogJy9zZXJ2aWNlcycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvaW5kZXguaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1NlcnZpY2VzQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdteWNsYXNzJywge1xuICAgICAgdXJsOiAnL215Y2xhc3MnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ215Y2xhc3MuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ015Q2xhc3NDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ215Y2xhc3NEZXRhaWwnLCB7XG4gICAgICB1cmw6ICcvbXljbGFzcy1kZXRhaWwvOmNvZGUnLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBkYXRhc2V0OiBmdW5jdGlvbigkcSwgJHN0YXRlUGFyYW1zLCAkbG9jYXRpb24pIHtcbiAgICAgICAgICB2YXIgX2dvdCA9IGZhbHNlO1xuICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgdmFyIGNsYXNzRGF0YSA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLm15Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5teUNsYXNzKSA6IGZhbHNlKTtcbiAgICAgICAgICBmb3IgKHZhciBkIGluIGNsYXNzRGF0YSkge1xuICAgICAgICAgICAgaWYgKGNsYXNzRGF0YVtkXS5jb2RlID09ICRzdGF0ZVBhcmFtcy5jb2RlKSB7XG4gICAgICAgICAgICAgIF9nb3QgPSBkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX2dvdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfZ290KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9teWNsYXNzJykucmVwbGFjZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdteWNsYXNzSW5zaWRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUNsYXNzRGV0YWlsQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdleGFtU2NoZWR1bGUnLCB7XG4gICAgICB1cmw6ICcvZXhhbS1zY2hlZHVsZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvZXhhbS1zY2hlZHVsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRXhhbVNjaGVkdWxlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdleGFtU2NvcmUnLCB7XG4gICAgICB1cmw6ICcvZXhhbS1zY29yZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbi12aWV3Jzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3X3BhdGggKyAnc2VydmljZXMvZXhhbS1zY29yZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRXhhbVNjb3JlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdmaW5hbmNlU3RhdHVzJywge1xuICAgICAgdXJsOiAnL2ZpbmFuY2Utc3RhdHVzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluLXZpZXcnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdfcGF0aCArICdzZXJ2aWNlcy9iaWxsaW5nLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdGaW5hbmNlQ29udHJvbGxlcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhYnNlbmNlJywge1xuICAgICAgdXJsOiAnL2Fic2VuY2UnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ3NlcnZpY2VzL2Fic2VuY2UuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0Fic2VuY2VDb250cm9sbGVyJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2NvbWluZycsIHtcbiAgICAgIHVybDogJy9jb21pbmcnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21haW4tdmlldyc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld19wYXRoICsgJ2NvbWluZy5odG1sJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9jb21pbmdcIik7XG59XSk7XG4iLCIvKipcbiAqIEZpbmFuY2UgQ29udHJvbGxlclxuICogQGF1dGhvciBOYXVmYWwgPG5hdWZhbEBtYXJ0YWJha2FuZy51cz5cbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0ZpbmFuY2VDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCBCaW51c01heWEsICRpb25pY1BvcHVwLCAkcSwgJGh0dHApIHtcblxuICAgICRzY29wZS5pc0FsbG93ID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoRmluYW5jZSgpXG4gICAgICAudGhlbihmdW5jdGlvbihkb25lKSB7XG4gICAgICBcdCRzY29wZS4kYXBwbHlBc3luYyhmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmluYW5jZUxpc3QgPSBkb25lO1xuXHQgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICBcdH0pO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGVyckhhbmRsZShlcnIpO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUudG9Nb25leSA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gbi50b0ZpeGVkKDIpLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrXFwuKS9nLCAnJDEsJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaEZpbmFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICBcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuICAgIFx0XHR2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgXHRcdFx0dmFyIGJpbGxpbmcgPSAwO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRiaWxsaW5nID0gcGFyc2VJbnQoJChkYXRhKS5maW5kKFwidGFibGU6ZXEoMCkgdHIgdGRcIikuaHRtbCgpLm1hdGNoKC9bMC05XSsvKVswXSk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkgeyB9XG5cdFx0XHRcdFx0dmFyIGhhc2lsID0gW107XG5cdFx0XHRcdFx0JChkYXRhKS5maW5kKCd0YWJsZSNycHRUYWJsZSB0cicpLmVhY2goZnVuY3Rpb24oaSwgYSkge1xuXHRcdFx0XHRcdFx0dmFyIGh0ID0gJCh0aGlzKS5maW5kKCd0ZCcpO1xuXHRcdFx0XHRcdFx0aWYoaSA+IDApIHtcblx0XHRcdFx0XHRcdFx0aGFzaWwucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0ZTogaHQuZXEoMSkuaHRtbCgpLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBodC5lcSgyKS5odG1sKCksXG5cdFx0XHRcdFx0XHRcdFx0dGVybTogaHQuZXEoMykuaHRtbCgpLFxuXHRcdFx0XHRcdFx0XHRcdGR1ZTogaHQuZXEoNCkuaHRtbCgpLFxuXHRcdFx0XHRcdFx0XHRcdGNoYXJnZTogaXNOYU4ocGFyc2VJbnQoaHQuZXEoNSkuaHRtbCgpKSkgPT0gdHJ1ZSA/IDAgOiBwYXJzZUludChodC5lcSg1KS5odG1sKCkpLFxuXHRcdFx0XHRcdFx0XHRcdHBheW1lbnQ6IGlzTmFOKHBhcnNlSW50KGh0LmVxKDYpLmh0bWwoKSkpID09IHRydWUgPyAwIDogcGFyc2VJbnQoaHQuZXEoNikuaHRtbCgpLm1hdGNoKC9bMC05XSsvKSksXG5cdFx0XHRcdFx0XHRcdFx0cmVmdW5kOiBpc05hTihwYXJzZUludChodC5lcSg3KS5odG1sKCkpKSA9PSB0cnVlID8gMCA6IHBhcnNlSW50KGh0LmVxKDcpLmh0bWwoKSlcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dmFyIGZpbmFsX2RhdGEgPSB7XG5cdFx0XHRcdFx0XHRkYXRhOiBCaW51c01heWEuZ3JvdXBpbmcoaGFzaWwpLFxuXHRcdFx0XHRcdFx0YmlsbGluZzogYmlsbGluZyxcblx0XHRcdFx0XHRcdGxhc3RVcGRhdGU6IG1vbWVudCgpLmZvcm1hdCgnRCBNTU1NIFlZWVkgaDptbTpzcycpXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2UuZmluYW5jZSA9IEpTT04uc3RyaW5naWZ5KGZpbmFsX2RhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBmaW5hbF9kYXRhO1xuICAgIFx0XHR9O1xuXG4gICAgXHRcdGlmKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgXHRcdFx0JGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvZmluYW5jZS5odG1sJylcbiAgICBcdFx0XHQudGhlbihmdW5jdGlvbihkKSB7XG4gICAgXHRcdFx0XHRyZXNvbHZlKHJldHVyblJlc3BvbnNlKGQuZGF0YSkpO1xuICAgIFx0XHRcdH0sIHJlamVjdCk7XG4gICAgXHRcdH0gZWxzZSB7XG5cdCAgICAgICAgQmludXNNYXlhLmNoZWNrTG9naW4oKVxuXHQgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKCcvJywgJ2dldCcpO1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cblx0ICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgcmUtYXV0aCB5b3VyIGFjY291bnRcIik7XG5cdCAgICAgICAgICB9KVxuXHQgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuXHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcblx0ICAgICAgICAgIHJldHVybiBCaW51c01heWEuZnJhbWUoXG5cdCAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMykgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG5cdCAgICAgICAgICApO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG5cdCAgICAgICAgfSlcblx0ICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcblx0ICAgICAgICBcdHJldHVybiBCaW51c01heWEuYXBpKFxuXHQgICAgICAgIFx0XHQkKFwiI2N0bDAwX2NwQ29udGVudF9ycHRNYWluTWVudVN0dWRlbnRfY3RsMDZfbGlua01lbnVTdHVkZW50XCIpLmF0dHIoXCJocmVmXCIpLCAnZ2V0Jywge30sIHRydWVcblx0ICAgICAgICBcdCk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgXHRyZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcblx0ICAgICAgICB9KVxuXHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIFx0cmV0dXJuIEJpbnVzTWF5YS5hcGkoXG5cdCAgICAgICAgXHRcdCQoXCIjY3RsMDBfY3BDb250ZW50X3JwdFN1Yk1lbnVfY3RsMDNfbGlua1N1Yk1lbnVcIikuYXR0cihcImhyZWZcIiksICdnZXQnLCB7fSwgdHJ1ZVxuXHQgICAgICAgIFx0KTtcblx0ICAgICAgICB9LCBmdW5jdGlvbigpIHtcblx0ICAgICAgICBcdHJlamVjdChcImNhbid0IGFjY2VzcyB0byBtYWluIGZyYW1lXCIpO1xuXHQgICAgICAgIH0pXG5cdCAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShyZXR1cm5SZXNwb25zZShjLnJlc3VsdCkpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIFx0cmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG5cdCAgICAgICAgfSk7XG4gICAgICBcdH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZS5maW5hbmNlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAkc2NvcGUuZmluYW5jZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5maW5hbmNlKTtcbiAgICB9XG5cbiAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgIH07XG5cbiAgICBCaW51c01heWEucHJvbXB0UGFzc3dvcmQoJ3NlcnZpY2VzJywgJHNjb3BlKTtcbiAgfVxuKTsiLCJhcHAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJyxcbmZ1bmN0aW9uKCRzY29wZSwgJGlvbmljUG9wdXAsICR0aW1lb3V0LCAkaW9uaWNIaXN0b3J5LCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHJvb3RTY29wZSwgQmludXNNYXlhKSB7XG5cbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gdHJ1ZTtcbiAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFyKGZhbHNlKTtcblxuICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcblxuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoISgkc2NvcGUuYmludXNpZCAmJiAkc2NvcGUucGFzc3dvcmQpKSB7XG4gICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgdGVtcGxhdGU6ICdQbGVhc2UgSW5wdXQgQmludXNpYW4gSUQgYW5kIFBhc3N3b3JkJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJ29uLWxvYWRpbmcnO1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgIEJpbnVzTWF5YS5hcGkoJy8nLCAnZ2V0JylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIGlmKGQuY29kZSAhPT0gMjAwKSBoYW5kbGVFcnJvcihkKTtcbiAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICQoJChkLnJlc3VsdCkuc2VyaWFsaXplQXJyYXkoKSkuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGEudHh0VXNlcklkID0gJHNjb3BlLmJpbnVzaWQ7XG4gICAgICAgICAgZGF0YS50eHRQYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcbiAgICAgICAgICBkYXRhLmJ0bkxvZ2luID0gXCJMb2cgSW4gXCI7XG4gICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5hcGkoJy8nLCAncG9zdCcsIGRhdGEpO1xuICAgICAgICB9LCBoYW5kbGVFcnJvcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBuYW1lID0gJChkLnJlc3VsdCkuZmluZChcIiNjb250ZW50ICN0b3BiYXIgLnJpZ2h0IHN0cm9uZ1wiKTtcbiAgICAgICAgICAvLyBXaGVuIFN1Y2Nlc3NcbiAgICAgICAgICBpZihkLmNvZGUgIT09IDIwMClcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQpO1xuICAgICAgICAgIGlmKG5hbWUubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIGhhbmRsZUVycm9yKGQsICQoZC5yZXN1bHQpLmZpbmQoXCIjbGJsRXJyb3JcIikudGV4dCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSSBUaGluayB0aGF0IG5vdCBiZXN0IG1ldGhvZFxuICAgICAgICAgICAgICogQHRvZG8gbWFrZSBpdCBoYXNoXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sb2dpbklkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBiaW51c2lkOiAkc2NvcGUuYmludXNpZCxcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc2xvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5mbmFtZSA9IG5hbWUudGV4dCgpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2luTmFtZSA9IGxvY2FsU3RvcmFnZS5mbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQ2xhc3MgPSAnJztcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjL3NjaGVkdWxlJztcbiAgICAgICAgICAgICRpb25pY0hpc3RvcnkuY2xlYXJIaXN0b3J5KCk7XG4gICAgICAgICAgICAkaW9uaWNOYXZCYXJEZWxlZ2F0ZS5zaG93QmFja0J1dHRvbihmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0sIGhhbmRsZUVycm9yKTtcblxuICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihkYXRhLCB0ZXh0KSB7XG4gICAgICAgICAgdHlwZW9mIHRleHQgIT09IFwidW5kZWZpbmVkXCIgPyB0ZXh0IDogbnVsbDtcbiAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICRzY29wZS5sb2dpbkNsYXNzID0gJyc7XG4gICAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRleHQgPyB0ZXh0IDogJ1NvbWV0aGluZyB3cm9uZyAhJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cbik7XG4iLCIvKipcbiAqIE15IENsYXNzIENvbnRyb2xsZXJcbiAqIEBhdXRob3IgTmF1ZmFsIDxuYXVmYWxAbWFydGFiYWthbmcudXM+XG4gKi9cbmFwcC5jb250cm9sbGVyKCdNeUNsYXNzQ29udHJvbGxlcicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSwgJHN0YXRlLCAkbG9jYXRpb24sICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXApIHtcbiAgICAkcm9vdFNjb3BlLm5vSGVhZGVyID0gZmFsc2U7XG4gICAgJHJvb3RTY29wZS5sZWZ0TWVudSA9IHRydWU7XG4gICAgJGlvbmljUGxhdGZvcm0ub25IYXJkd2FyZUJhY2tCdXR0b24oZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmNsYXNzRGF0YSA9ICh0eXBlb2YgbG9jYWxTdG9yYWdlLm15Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5teUNsYXNzKSA6IGZhbHNlKTtcblxuICAgIHZhciByZWZyZXNoTXlDbGFzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAudGhlbihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgdmFyIF9yZURhdGEgPSBbXSxcbiAgICAgICAgICAgICAgX3Byb21pc2VzWW91ID0gW10sXG4gICAgICAgICAgICAgIF9wcm9taXNlc0NvdW50ID0gMDtcbiAgICAgICAgICAgICQoYy5yZXN1bHQucmVzdWx0KS5maW5kKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfcG5sVGVvcmkgdWwgbGlcIikuZWFjaChmdW5jdGlvbihpLCBkKSB7XG4gICAgICAgICAgICAgIHZhciBuYW1lID0gJChkKS5maW5kKFwiYVwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgcmVnID0gbmFtZS5tYXRjaCgvXiguKiktKC4qKSBcXCgoLiopXFwpL2kpO1xuICAgICAgICAgICAgICBfcmVEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIGluZGV4SXRlbTogaSxcbiAgICAgICAgICAgICAgICBuYW1lOiByZWdbMl0sXG4gICAgICAgICAgICAgICAgdXJsOiAkKGQpLmZpbmQoXCJhXCIpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgICBjb2RlOiByZWdbMV0sXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiByZWdbM11cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5teUNsYXNzID0gSlNPTi5zdHJpbmdpZnkoX3JlRGF0YSk7XG4gICAgICAgICAgICByZXNvbHZlKF9yZURhdGEpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG15IGNsYXNzXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlZnJlc2hNeUNsYXNzKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgIGlmIChkb25lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRzY29wZS5jbGFzc0RhdGEgPSBkb25lO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJIYW5kbGUoXCJZb3UgZG9uJ3QgaGF2ZSBhbnkgY2xhc3NcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0sIGVyckhhbmRsZSk7XG5cbiAgICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgIHRpdGxlOiAnT29wcyAhJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gIH0pOyIsIi8qKlxuICogTXkgQ2xhc3MgSW5zaWRlXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignTXlDbGFzc0RldGFpbENvbnRyb2xsZXInLFxuICBmdW5jdGlvbigkc2NvcGUsIEJpbnVzTWF5YSwgJGlvbmljTmF2QmFyRGVsZWdhdGUsICRzdGF0ZSwgJGxvY2F0aW9uLFxuICAgICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQsICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCAkcSwgJGlvbmljUG9wdXAsIGRhdGFzZXQpIHtcblxuICAgICRzY29wZS5jbGFzc0RhdGEgPSAodHlwZW9mIGxvY2FsU3RvcmFnZS5teUNsYXNzICE9PSBcInVuZGVmaW5lZFwiID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXlDbGFzcykgOiBmYWxzZSk7XG4gICAgJHNjb3BlLnN0YXRlID0ge1xuICAgICAgaXNEYXRhOiBmYWxzZSxcbiAgICAgIGxvYWRpbmc6IHRydWVcbiAgICB9O1xuICAgICRzY29wZS5kYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XTtcbiAgICAkc2NvcGUuaXNQYWdlVG9waWMgPSBmYWxzZTtcblxuICAgIHZhciBnZXRDbGFzc0RldGFpbCA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBCaW51c01heWEuY2hlY2tMb2dpbigpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEZhaWwgdG8gcmUtbG9naW5cbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLy8gTG9hZCBUaGVzZSBQYWdlXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJpbnVzTWF5YS5mcmFtZShcbiAgICAgICAgICAgICAgJChkLnJlc3VsdCkuZmluZChcIi5pdGVtQ29udGVudCB1bCBsaTplcSgwKSA+IGFcIikuYXR0cihcImhyZWZcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoXCJjYW4ndCBhY2Nlc3MgdG8gbWFpbiBmcmFtZVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgIHJldHVybiBCaW51c01heWEuYXBpKF9iaW1heV9hcGlfdXJsICsgJy9MTVMvJyArIHVybCwgJ2dldCcsIHt9LCB0cnVlKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyB0byBteSBjbGFzc1wiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHZhciBkb25lID0gZC5yZXN1bHQ7XG4gICAgICAgICAgICB2YXIgZGVzY19tYWluID0gJChkb25lKS5maW5kKFwiI2Rlc2NfY291cnNlX2Rlc2MgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgZGVzY19ncmFkID0gJChkb25lKS5maW5kKFwiI2Rlc2NfZ3JhZF9jb21wZXRlID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgIGNvdXJzZSA9IFtdO1xuXG4gICAgICAgICAgICAkKGRvbmUpLmZpbmQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9wbmxDb250ZW50VGhlb3J5IHRhYmxlIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oaSwgZCkge1xuICAgICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGNvdXJzZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlSW50KCQoZCkuZmluZChcInRkOmVxKDApID4gc3BhblwiKS5odG1sKCkpLFxuICAgICAgICAgICAgICAgICAgbW9kZTogJChkKS5maW5kKFwidGQ6ZXEoMSkgPiBzcGFuXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIHRvcGljczogJChkKS5maW5kKFwidGQ6ZXEoMikgPiBhXCIpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgIGRhdGU6ICQoZCkuZmluZChcInRkOmVxKDMpID4gc3BhblwiKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICBsaW5rczogJChkKS5maW5kKFwidGQ6ZXEoNCkgPiBpbnB1dFwiKS5hdHRyKCduYW1lJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBfcmVEYXRhID0ge1xuICAgICAgICAgICAgICBtYWluX2Rlc2NyaXB0aW9uOiBkZXNjX21haW4sXG4gICAgICAgICAgICAgIGdyYWRfZGVzY3JpcHRpb246IGRlc2NfZ3JhZCxcbiAgICAgICAgICAgICAgY291cnNlOiBjb3Vyc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXNvbHZlKF9yZURhdGEpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIGNvdXJzZSBwYWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWwgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZ2V0Q2xhc3NEZXRhaWwoJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS51cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAkc2NvcGUuY2xhc3NEYXRhW2RhdGFzZXRdLmRldGFpbCA9IGRhdGE7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLm15Q2xhc3MgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUuY2xhc3NEYXRhKTtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlLmlzRGF0YSA9ICRzY29wZS5jbGFzc0RhdGFbZGF0YXNldF0uZGV0YWlsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgICAgIH0sIGVyckhhbmRsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAkc2NvcGUuc3RhdGUuaXNEYXRhID0gJHNjb3BlLmNsYXNzRGF0YVtkYXRhc2V0XS5kZXRhaWw7XG4gICAgfVxuXG4gICAgaWYgKCRzY29wZS5pc1BhZ2VUb3BpYyA9PT0gZmFsc2UpIHtcbiAgICAgICRzY29wZS5pbmZvVGFiID0gJ2FjdGl2ZSc7XG4gICAgICAkc2NvcGUudG9waWNzVGFiID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5pbmZvVGFiID0gJyc7XG4gICAgICAkc2NvcGUudG9waWNzVGFiID0gJ2FjdGl2ZSc7XG4gICAgfVxuXG4gICAgJHNjb3BlLnN3aXRjaFRhYiA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgJHNjb3BlLmlzUGFnZVRvcGljID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5pbmZvVGFiID0gJ2FjdGl2ZSc7XG4gICAgICAgICRzY29wZS50b3BpY3NUYWIgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZSA9PT0gMSkge1xuICAgICAgICAkc2NvcGUuaXNQYWdlVG9waWMgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuaW5mb1RhYiA9ICcnO1xuICAgICAgICAkc2NvcGUudG9waWNzVGFiID0gJ2FjdGl2ZSc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBlcnJIYW5kbGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdPb3BzICEnLFxuICAgICAgICB0ZW1wbGF0ZTogbXNnXG4gICAgICB9KTtcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwucmVmcmVzaENvbXBsZXRlJyk7XG4gICAgfTtcblxuXG4gIH0pO1xuIiwiLyoqXG4gKiBTY2hlZHVsZSBDb250cm9sbGVyXG4gKiBAYXV0aG9yIE5hdWZhbCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignU2NoZWR1bGVDb250cm9sbGVyJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNQb3B1cCwgJHRpbWVvdXQsICRpb25pY0hpc3RvcnksICRyb290U2NvcGUsICRpb25pY1BsYXRmb3JtLCBCaW51c01heWEsICRxLCAkaHR0cCkge1xuXG4gICAgJHJvb3RTY29wZS5ub0hlYWRlciA9IGZhbHNlO1xuICAgICRyb290U2NvcGUubGVmdE1lbnUgPSB0cnVlO1xuICAgICRpb25pY1BsYXRmb3JtLm9uSGFyZHdhcmVCYWNrQnV0dG9uKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICRzY29wZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciB0b2RheSA9IG1vbWVudCgpO1xuICAgICAgLy90b2RheVxuICAgICAgaWYgKG1vbWVudChkKS5pc1NhbWUodG9kYXksICdkYXknKSkge1xuICAgICAgICByZXR1cm4gJ3RvZGF5JztcbiAgICAgIH0gZWxzZVxuICAgICAgLy90b21vcnJvd1xuICAgICAgaWYgKG1vbWVudChkKS5pc1NhbWUodG9kYXkuYWRkKDEsICdkJyksICdkYXknKSkge1xuICAgICAgICByZXR1cm4gJ3RvbW9ycm93JztcbiAgICAgIH0gZWxzZVxuICAgICAgLy9sYXN0ZWRcbiAgICAgIGlmIChtb21lbnQoZCkgPCB0b2RheSkge1xuICAgICAgICByZXR1cm4gJ2NvbXBsZXRvJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldENvdXJzZVN0YXRlID0gZnVuY3Rpb24oZCwgbSkge1xuICAgICAgdmFyIG5vdyA9IG1vbWVudCgpLFxuICAgICAgICBnZXRNb21lbnQgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGdldExhc3QgPSBtLnNwbGl0KFwiLVwiKVsxXS5zcGxpdChcIjpcIiksXG4gICAgICAgICAgZ2V0SG91ciA9IHBhcnNlSW50KGdldExhc3RbMF0pLFxuICAgICAgICAgIGdldE1pbnV0ZSA9IHBhcnNlSW50KGdldExhc3RbMV0pO1xuXG4gICAgICAgIGdldE1vbWVudCA9IG1vbWVudChkKS5ob3VyKGdldEhvdXIpLm1pbnV0ZShnZXRNaW51dGUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBnZXRNb21lbnQgPSBtb21lbnQoZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChnZXRNb21lbnQgPCBub3cpIHtcbiAgICAgICAgcmV0dXJuICdjb21wbGV0byc7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5pc1NjaGVkdWxlID0gZmFsc2U7XG4gICAgJHNjb3BlLnNjaGVkdWxlID0gW107XG5cbiAgICBpZiAobG9jYWxTdG9yYWdlLmphZHdhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmphZHdhbCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRzY29wZS5pc1NjaGVkdWxlID0gdHJ1ZTtcbiAgICAgICAgICAkc2NvcGUuc2NoZWR1bGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5qYWR3YWwpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdG9Kc29uID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIGhhc2lsID0gW107XG4gICAgICAkKGRhdGEpLmZpbmQoJ3RyJykuZWFjaChmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgIHZhciBodCA9ICQodGhpcykuZmluZCgndGQnKTtcbiAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gaHQuZXEoMykuaHRtbCgpLm1hdGNoKC8oLiopLSguKikvKTtcbiAgICAgICAgICBoYXNpbC5wdXNoKHtcbiAgICAgICAgICAgIGRhdGU6IGh0LmVxKDApLmh0bWwoKSxcbiAgICAgICAgICAgIHRpbWU6IGh0LmVxKDEpLmh0bWwoKSxcbiAgICAgICAgICAgIHN0YXRlOiBodC5lcSgyKS5odG1sKCksXG4gICAgICAgICAgICBjb3Vyc2U6IG1hdGNoWzJdLFxuICAgICAgICAgICAgY29kZTogbWF0Y2hbMV0sXG4gICAgICAgICAgICBteUNsYXNzOiBodC5lcSg1KS5odG1sKCksXG4gICAgICAgICAgICByb29tOiBodC5lcSg2KS5odG1sKCksXG4gICAgICAgICAgICBidWlsZGluZzogaHQuZXEoNykuaHRtbCgpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGhhc2lsO1xuICAgIH07XG5cbiAgICB2YXIgcmVmcmVzaEphZHdhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcmV0dXJuUmVzcG9uc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIF9zY2hlZHVsZSA9ICQoZGF0YSkuZmluZChcInRhYmxlXCIpLFxuICAgICAgICAgICAgICB0b2RheSA9IHRvSnNvbihfc2NoZWR1bGUuZXEoMCkuaHRtbCgpKSxcbiAgICAgICAgICAgICAgbmV4dCA9IHRvSnNvbihfc2NoZWR1bGUuZXEoMSkuaHRtbCgpKSxcbiAgICAgICAgICAgICAgc2tlZHVsID0gdG9kYXkuY29uY2F0KG5leHQpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmphZHdhbCA9IEpTT04uc3RyaW5naWZ5KEJpbnVzTWF5YS5ncm91cGluZyhza2VkdWwpKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sYXN0VXBkYXRlID0gbW9tZW50KCkuZm9ybWF0KCdEIE1NTU0gWVlZWSBoOm1tOnNzJyk7XG4gICAgICAgICAgICByZXR1cm4ge2phZHdhbDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuamFkd2FsKSwgbGFzdFVwZGF0ZTogbG9jYWxTdG9yYWdlLmxhc3RVcGRhdGV9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmKHR5cGVvZiBodHRwY2xpZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjI1MDUvc2NoZWR1bGUuaHRtbCcpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLmRhdGEpKTtcbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEJpbnVzTWF5YS5jaGVja0xvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaSgnLycsICdnZXQnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBGYWlsIHRvIHJlLWxvZ2luXG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IHJlLWF1dGggeW91ciBhY2NvdW50XCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIExvYWQgVGhlc2UgUGFnZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmZyYW1lKFxuICAgICAgICAgICAgICAgICQoZC5yZXN1bHQpLmZpbmQoXCIuaXRlbUNvbnRlbnQgdWwgbGk6ZXEoMCkgPiBhXCIpLmF0dHIoXCJocmVmXCIpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIHRvIG1haW4gZnJhbWVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9LFxuICAgICAgICAgICAgICAgIGQgPSBjLnJlc3VsdDtcbiAgICAgICAgICAgICAgJCgkKGQucmVzdWx0KS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2QubmFtZV0gPSBkLnZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS5fX0VWRU5UVEFSR0VUID0gJ2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkYnRuU2NoZWR1bGUnO1xuICAgICAgICAgICAgICByZXR1cm4gQmludXNNYXlhLmFwaShfYmltYXlfYXBpX3VybCArICcvTE1TL015Q2xhc3MuYXNweCcsICdwb3N0JywgZGF0YSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuJ3QgYWNjZXNzIGZyYW1lXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5SZXNwb25zZShkLnJlc3VsdCkpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcImNhbid0IGFjY2VzcyBzY2hlZHVsZSBwYWdlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9SZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWZyZXNoSmFkd2FsKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgICAgJHJvb3RTY29wZS5nZXRMYXN0VXBkYXRlKCk7XG4gICAgICAgIGlmIChkYXRhLmphZHdhbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmlzU2NoZWR1bGUgPSB0cnVlO1xuICAgICAgICAgICRzY29wZS5zY2hlZHVsZSA9IGRhdGEuamFkd2FsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVyckhhbmRsZShcIk5vIFNjaGVkdWxlIGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICB9LCBlcnJIYW5kbGUpO1xuXG4gICAgICB2YXIgZXJySGFuZGxlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ09vcHMgIScsXG4gICAgICAgICAgdGVtcGxhdGU6IG1zZ1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3Njcm9sbC5yZWZyZXNoQ29tcGxldGUnKTtcbiAgICAgIH07XG4gICAgfTtcblxuICB9KTtcbiIsIi8qKlxuICogU2VydmljZXMgQ29udHJvbGxlclxuICogQGF1dGhvciBQZWRveCA8bmF1ZmFsQG1hcnRhYmFrYW5nLnVzPlxuICovXG5hcHAuY29udHJvbGxlcignU2VydmljZXNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnQmludXNNYXlhJywgJyRpb25pY05hdkJhckRlbGVnYXRlJyxcbmZ1bmN0aW9uKCRzY29wZSwgQmludXNNYXlhLCAkaW9uaWNOYXZCYXJEZWxlZ2F0ZSkge1xuXG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=